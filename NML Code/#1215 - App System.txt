&CMD`STAFFJUTSUAPPS #1215=$+Staff/JutsuApps:@break hasslabs(%#,staff-skill)={@pemit %#=[prompt(Staff)] Jutsu Queue [iter(get(#1215/List`JutsuApps),%r #@. [name(##)],|)]};@pemit %#=[Prompt(System)] You are not permitted to use this command.
&CMD`STAFFJUTSUVERIFY #1215=$+Staff/Jutsu Verify=*:@break hasslabs(%#,staff-skill)={@break match(get(#1215/List`JutsuApps),[pmatch(%0)],|)={@eval [pemit(%#,[prompt(Staff)]%t[name(num(*%0))]'s Jutsu Application %r%b%b%b%b%b 1. Jutsu App Name: [extract(get(#1215/JutsuApps`[pmatch(%0)]),1,1,|)] %r%b%b%b%b%b 2. Jutsu App Access: [extract(get(#1215/JutsuApps`[pmatch(%0)]),2,1,|)] %r%b%b%b%b%b 3. Jutsu App Category: [extract(get(#1215/JutsuApps`[pmatch(%0)]),3,1,|)] %r%b%b%b%b%b 4. Jutsu App Archetype: [extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)] %r%b%b%b%b%b 5. Jutsu App Type: [extract(get(#1215/JutsuApps`[pmatch(%0)]),5,1,|)] %r%b%b%b%b%b 6. Jutsu App Method: [extract(get(#1215/JutsuApps`[pmatch(%0)]),6,1,|)] %r%b%b%b%b%b 7. Jutsu App Special Action: [edit(extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|),~,%b)] %r%b%b%b%b%b 8. Jutsu App Range: [extract(get(#1215/JutsuApps`[pmatch(%0)]),8,1,|)] %r%b%b%b%b%b 9. Jutsu App Rank: [extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)] %r%b%b%b%b%b Jutsu App KP: [switch([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],E,2,D,3,C,4,B,6,A,7,S,8)] %r%b%b%b%b%b Jutsu App XP: [floor(mul(round(mul([extract(get(#254/dat`JutsuRanks`costs),[match(get(#254/Dat`JutsuRanks),extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|),|)],1,|)],add(1,mul([words([extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)],~)],.2),[if(match([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],All,|),.34,[if(gte(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|),1),[round(mul(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]),.08),2)],0)])])),-1),[switch(1,[and([match(get([pmatch(%0)]/Dat`AffinityList),[extract(get(#1215/JutsuApps`[pmatch(%0)]),5,1,|)],|)],[match(Ninjutsu|Nintaijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)])],.75,[and([match(get([pmatch(%0)]/Dat`AffinityList),Yang,|)],[match(Taijutsu|Bukijutsu,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)])],.75,[and([match(get([pmatch(%0)]/Dat`AffinityList),Yin,|)],[match(Seals|Calligraphy,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)])],.75,1)]))] %r%b%b%b%b%b Jutsu App AP: [if(match(Attack|Heal,[extract(get(#1215/JutsuApps`[pmatch(%0)]),6,1,|)],|),extract(get(#254/Dat`[extract(get(#1215/JutsuApps`[pmatch(%0)]),3,1,|)]`AP),[match(get(#254/dat`JutsuRanks),[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|)],1,|),0)] %r%b%b%b%b%b Jutsu App Stamina: [ceil(mul(extract(get(#254/Dat`[edit(extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|),%b,-)]`Stamina),[match(get(#254/dat`JutsuRanks),[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|)],1,|),add(1,mul([words([extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)],~)],.1),[if(match([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],All,|),.34,[if(gte(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|),1),[round(mul(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]),.08),2)],0)])])))] %r%b%b%b%b%b Jutsu App Chakra: [ceil(mul(extract(get(#254/Dat`[edit(extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|),%b,-)]`Chakra),[match(get(#254/dat`JutsuRanks),[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|)],1,|),add(1,mul([words([extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)],~)],.1),[if(match([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],All,^),.34,[if(gte(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|),1),[round(mul(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]),.08),2)],0)])])))] %r%b%b%b%b%b 10. Jutsu App Description: [extract(get(#1215/JutsuApps`[pmatch(%0)]),10,1,|)] %r%b%b%b%b%b 11. Jutsu App Alt Name(Japanese): [extract(get(#1215/JutsuApps`[pmatch(%0)]),11,1,|)] %r%b%b%b%b%b Jutsu App Creator: [name(*%0)] %r%b%b%b%b%b 12. Jutsu App Prefix: [extract(get(#1215/JutsuApps`[pmatch(%0)]),12,1,|)] %r%b%b%b%b%b Jutsu App Notes: [extract(get(#1215/JutsuApps`[pmatch(%0)]),13,1,|)] )]};@pemit %#=[Prompt(Staff)] There is currently no Jutsu Application for %0.};@pemit %#=[Prompt(System)] You are not permitted to use this command.
&CMD`STAFFJUTSUALTER #1215=$+Staff/JutsuAlter *=*/*:@break hasslabs(%#,staff-skill)={@break match(get(#1215/List`JutsuApps),[pmatch(%0)],|)={@break match(1 2 3 4 5 6 7 8 9 10 11 12,%1)={@pemit %#=[prompt(Staff)] %0's [switch(%1,1,Name Field:,2,AccessField:,3,Category Field:,4,Archetype Field:,5,Type Field:,6,Method Field:,7,Special Action Field:,8,Range Field:,9,Rank Field:,10,Description Field:,11,Alt Name Field:,12,Prefix Field:)]"[ansi(hw,extract(get(#1215/JutsuApps`[pmatch(%0)]),%1,1,|))]" is being altered to "[ansi(hw,%2)]". Make certain that this is correct before completing the application.;@set #1215=JutsuApps`[pmatch(%0)]:[replace(get(#1215/JutsuApps`[pmatch(%0)]),%1,[capstr(%2)],|)] };@pemit %#=[Prompt(Staff)] %1 is not between 1-12. Refer to +staff/jutsu Verfiy=%0 for list of alterable fields.};@pemit %#=[Prompt(Staff)] There is currently no Jutsu Application for %0.};@pemit %#=[Prompt(System)] You are not permitted to use this command.
&CMD`STAFFJUTSUAPPROVE #1215=$+Staff/Jutsu Approve=*:@break hasslabs(%#,staff-skill)={@break match(get(#1215/List`JutsuApps),[pmatch(%0)],|)={@break and(gte(get([pmatch(%0)]/Dat`KP),[switch([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],E,2,D,3,C,4,B,6,A,7,S,8)]),gte(get([pmatch(%0)]/Dat`XP),[floor(mul(round(mul([extract(get(#254/dat`JutsuRanks`costs),[match(get(#254/Dat`JutsuRanks),extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|),|)],1,|)],add(1,mul([words([extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)],~)],.2),[if(match([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],All,|),.34,[if(gte(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|),1),[round(mul(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]),.08),2)],0)])])),-1),[switch(1,[and([match(get([pmatch(%0)]/Dat`AffinityList),[extract(get(#1215/JutsuApps`[pmatch(%0)]),5,1,|)],|)],[match(Ninjutsu|Nintaijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)])],.75,[and([match(get([pmatch(%0)]/Dat`AffinityList),Yang,|)],[match(Taijutsu|Bukijutsu,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)])],.75,[and([match(get([pmatch(%0)]/Dat`AffinityList),Yin,|)],[match(Seals|Calligraphy,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)])],.75,1)]))]))={@assert [hasattr([pmatch(%0)]/dat`jutsuapproval)]={@set [pmatch(%0)]=dat`jutsuapproval:%#; @cemit monitor-app={[prompt(App)] [ansi(hc, %K)] has approved [ansi(hy,[name(*%0)])]'s Jutsu. They need one more staff member to approve them.}};@assert [!strmatch(%0, [get([pmatch(%0)]/dat`jutsuapproval)])]={@pemit %#=[prompt(App)] You can't approve them again. Ask some other staff member to do this.};@eval [setr(0,pmatch(%0))] [if(eq(t(sqlite_query(Game, select ID from Templates where Author like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),2,1,|)]" and Category like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),3,1,|)]" and Type like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),5,1,|)]" and Archetype like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)]" and Method like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),6,1,|)]" and Special like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)]" and PreReq like "" and Range like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),8,1,|)]" and Rank like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]" )),0),sqlite_query(Game,INSERT INTO Templates VALUES("[add(1,words(sqlite_query(Game,Select ID from Templates),^))]","[extract(get(#1215/JutsuApps`[pmatch(%0)]),2,1,|)]","[extract(get(#1215/JutsuApps`[pmatch(%0)]),3,1,|)]","[extract(get(#1215/JutsuApps`[pmatch(%0)]),5,1,|)]","[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)]","[extract(get(#1215/JutsuApps`[pmatch(%0)]),6,1,|)]","[extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)]","","[extract(get(#1215/JutsuApps`[pmatch(%0)]),8,1,|)]","[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]","[mul(match(get(#254/dat`JutsuRanks),[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|),2)]","[round(mul([extract(get(#254/dat`JutsuRanks`costs),[match(get(#254/Dat`JutsuRanks),extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|),|)],1,|)],add(1,mul([words([extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)],~)],.2),[if(match([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],All,|),.34,[if(gte(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|),1),[round(mul(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]),.08),2)],0)])])),-1)]","[ceil(mul(extract(get(#254/Dat`[edit(extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|),%b,-)]`Stamina),[match(get(#254/dat`JutsuRanks),[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|)],1,|),add(1,mul([words([extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)],~)],.1),[if(match([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],All,|),.34,[if(gte(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|),1),[round(mul(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]),.08),2)],0)])])))]","[ceil(mul(extract(get(#254/Dat`[edit(extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|),%b,-)]`Chakra),[match(get(#254/dat`JutsuRanks),[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|)],1,|),add(1,mul([words([extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)],~)],.1),[if(match([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],All,^),.34,[if(gte(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|),1),[round(mul(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]),.08),2)],0)])])))]","[if(match(Attack|Heal,[extract(get(#1215/JutsuApps`[pmatch(%0)]),6,1,|)],|),extract(get(#254/Dat`[extract(get(#1215/JutsuApps`[pmatch(%0)]),3,1,|)]`AP),[match(get(#254/dat`JutsuRanks),[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|)],1,|),0)]")),[pemit([pmatch(%#)],[prompt(App)] This Template already exists and thus was not added to the Data Base.)])];@set [pmatch(%0)]=Dat`JutsuAttributes`[edit(extract(get(#1215/JutsuApps`[pmatch(%0)]),1,1,|),%b,-)]:1|1|1|1|1|1|[if(eq(t(sqlite_query(Game, select ID from Templates where Author like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),2,1,|)]" and Category like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),3,1,|)]" and Type like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),5,1,|)]" and Archetype like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)]" and Method like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),6,1,|)]" and Special like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)]" and PreReq like "" and Range like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),8,1,|)]" and Rank like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]" )),1),[sqlite_query(Game, select ID from Templates where Author like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),2,1,|)]" and Category like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),3,1,|)]" and Type like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),5,1,|)]" and Archetype like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)]" and Method like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),6,1,|)]" and Special like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)]" and PreReq like "" and Range like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),8,1,|)]" and Rank like "[extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]" )],[add(1,words(sqlite_query(Game,Select ID from Templates),^))])]|[extract(get(#1215/JutsuApps`[pmatch(%0)]),1,1,|)]|[extract(get(#1215/JutsuApps`[pmatch(%0)]),10,1,|)]|[extract(get(#1215/JutsuApps`[pmatch(%0)]),5,1,|)]|[extract(get(#1215/JutsuApps`[pmatch(%0)]),11,1,|)]|[extract(get(#1215/JutsuApps`[pmatch(%0)]),12,1,|)]|[name(*%0)]|1|0;@cemit monitor-app=[prompt(App)] The jutsu "[extract(get(#1215/JutsuApps`[pmatch(%0)]),1,1,|)]" has been approved for [name(pmatch(%0))] by %K and [cname([get([pmatch(%0)]/dat`jutsuapproval)])]. There are [sub(words(get(#1215/List`JutsuApps),|),1)] remaining in queue.; @set [pmatch(%0)]=Dat`KP:[sub(get([pmatch(%0)]/Dat`KP),[switch([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],E,2,D,3,C,4,B,6,A,7,S,8)])];@set [pmatch(%0)]=Dat`XP:[sub(get([pmatch(%0)]/Dat`XP),[floor(mul(round(mul([extract(get(#254/dat`JutsuRanks`costs),[match(get(#254/Dat`JutsuRanks),extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|),|)],1,|)],add(1,mul([words([extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)],~)],.2),[if(match([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],All,|),.34,[if(gte(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|),1),[round(mul(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]),.08),2)],0)])])),-1),[switch(1,and([match(get([pmatch(%0)]/Dat`AffinityList),[extract(get(#1215/JutsuApps`[pmatch(%0)]),5,1,|)],|)],[match(Ninjutsu|Nintaijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)]),.75,and([match(get([pmatch(%0)]/Dat`AffinityList),Yang,|)],[match(Taijutsu|Bukijutsu,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)]),.75,and([match(get([pmatch(%0)]/Dat`AffinityList),Yin,|)],[match(Seals|Calligraphy,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)]),.75,1)]))])];@pemit [pmatch(%0)]=[prompt(App)] Your application for the "[extract(get(#1215/JutsuApps`[pmatch(%0)]),1,1,|)]" jutsu has been approved. [switch([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],E,2,D,3,C,4,B,6,A,7,S,8)] KP and [floor(mul(round(mul([extract(get(#254/dat`JutsuRanks`costs),[match(get(#254/Dat`JutsuRanks),extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|),|)],1,|)],add(1,mul([words([extract(get(#1215/JutsuApps`[pmatch(%0)]),7,1,|)],~)],.2),[if(match([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],All,|),.34,[if(gte(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)],|),1),[round(mul(words([extract(get(#1215/JutsuApps`[pmatch(%0)]),9,1,|)]),.08),2)],0)])])),-1),[switch(1,and([match(get([pmatch(%0)]/Dat`AffinityList),[extract(get(#1215/JutsuApps`[pmatch(%0)]),5,1,|)],|)],[match(Ninjutsu|Nintaijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)]),.75,and([match(get([pmatch(%0)]/Dat`AffinityList),Yang,|)],[match(Taijutsu|Bukijutsu,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)]),.75,and([match(get([pmatch(%0)]/Dat`AffinityList),Yin,|)],[match(Seals|Calligraphy,[extract(get(#1215/JutsuApps`[pmatch(%0)]),4,1,|)],|)]),.75,1)]))] XP has been deducted. ;@set #1215=JutsuApps`[pmatch(%0)]:||||||||||||; @set #1215=List`JutsuApps:[remove([get(#1215/List`JutsuApps)],[pmatch(%0)],|)]; @set [pmatch(%0)]=dat`jutsuapproval: };@pemit %#=[Prompt(App)] The applicant([name(pmatch(%0))]) does not currently have enough KP and/or XP to approve their request.;@pemit [pmatch(%0)]=[Prompt(App)] Your application could not be completed as you lack the KP and/or XP at this time. };@pemit %#=[Prompt(App)] There is currently no Jutsu Application for [pmatch(%0)].};@pemit %#=[Prompt(System)] You are not permitted to use this command.
&CMD`PROFICIENCYAPP #1215=$+buy/proficiency *:@break [member([get(%l/list`players)],%#)]={@pemit %#=%r%r[prompt(Game)] You cannot purchase things while in Order.%r};@break hasattr(%#/Dat`JutsuAttributes`[edit(%0,%b,-)])={@break gte(get(%#/Dat`KP),[max(sub(3,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])={@break gte(get(%#/Dat`XP),[switch([extract(get(%#/dat`jutsuattributes`[edit(%0,%b,-)]),14,1,|)],1,1000,2,2000,3,3000,4,4000,5,5000)])={@break lt([extract(get(%#/dat`jutsuattributes`[edit(%0,%b,-)]),14,1,|)],6)={ @set %#=Dat`JutsuAttributes`[edit(%0,%b,-)]:[replace(get(%#/dat`jutsuattributes`[edit(%0,%b,-)]),14,[add([extract(get(%#/Dat`jutsuattributes`[edit(%0,%b,-)]),14,1,|)],1)],|)] ;@set %#=Dat`XP:[sub(get(%#/Dat`XP),[switch([extract(get(%#/dat`jutsuattributes`[edit(%0,%b,-)]),14,1,|)],1,0,2,1000,3,2000,4,3000,5,4000,6,5000)])]; @set %#=Dat`KP:[sub(get(%#/Dat`KP),[max(sub(3,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])]; @set %#=Dat`JutsuAttributes`[edit(%0,%b,-)]:[replace(get(%#/dat`jutsuattributes`[edit(%0,%b,-)]),15,[add([extract(get(%#/Dat`jutsuattributes`[edit(%0,%b,-)]),15,1,|)],[switch([extract(get(%#/dat`jutsuattributes`[edit(%0,%b,-)]),14,1,|)],2,4,3,4,4,5,5,5,6,6)])],|)];@pemit %#=[prompt(Game)] %N has increased the Jutsu Proficiency Level of [caplist(%0)] to [extract(get(%#/Dat`jutsuattributes`[edit(%0,%b,-)]),14,1,|)], raising the amount of available Jutsu Mastery Points to [extract(get(%#/Dat`jutsuattributes`[edit(%0,%b,-)]),15,1,|)] for [switch([extract(get(%#/dat`jutsuattributes`[edit(%0,%b,-)]),14,1,|)],1,0,2,1000,3,2000,4,3000,5,4000,6,5000)] XP and [max(sub(3,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)] KP[if([match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],%b%(Elite Tradition%),)]. %r%r [get(%#/Dat`XP)] XP, and [get(%#/Dat`KP)] KP remain. ;@cemit monitor-app=[prompt(App)] %N has increased the Proficiency Level of their [caplist(%0,,,L)] jutsu to [extract(get(%#/Dat`jutsuattributes`[edit(%0,%b,-)]),14,1,|)]. };@pemit %#=[prompt(Game)] %N has already achieved the maximum Proficiency Level for the [caplist(%0)] jutsu. };@pemit %#=[prompt(Game)] %N does not have enough XP. };@pemit %#=[prompt(Game)] %N does not have enough KP.}; @pemit %#=[prompt(Game)] %N does not have the [caplist(%0)] Jutsu.
&CMD`MASTERYAPP #1215=$+buy/mastery *=*:@break hasattr(%#/Dat`JutsuAttributes`[edit(%0,%b,-)])={@break match(get(#244/Dat`JutsuAttributes),%1,|)={@break lt([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),[match(get(#244/Dat`JutsuAttributes),%1,|)],1,|)],10)={@break gt([extract(get(%#/dat`jutsuattributes`[edit(%0,%b,-)]),15,1,|)],0)={@set %#=Dat`JutsuAttributes`[edit(%0,%b,-)]:[replace(get(%#/dat`jutsuattributes`[edit(%0,%b,-)]),15,[sub([extract(get(%#/Dat`jutsuattributes`[edit(%0,%b,-)]),15,1,|)],1)],|)]; @set %#=Dat`JutsuAttributes`[edit(%0,%b,-)]:[replace(get(%#/dat`jutsuattributes`[edit(%0,%b,-)]),[match(get(#244/Dat`JutsuAttributes),%1,|)],[add([extract(get(%#/Dat`jutsuattributes`[edit(%0,%b,-)]),[match(get(#244/Dat`JutsuAttributes),%1,|)],1,|)],1)],|)]; @pemit %#=[prompt(Game)] %N has increased the [caplist(%1)] Mastery Level of [caplist(%0)] to [extract(get(%#/Dat`jutsuattributes`[edit(%0,%b,-)]),[match(get(#244/Dat`JutsuAttributes),%1,|)],1,|)]!};@pemit %#=[prompt(Game)] The [caplist(%0)] jutsu has no Mastery Points to spend. Increase Proficiency with the Jutsu or attain Expertise in it's Specialization to gain more points.};@pemit %#=[prompt(Game)] %N has already mastered [caplist(%1)] for the [caplist(%0)] Jutsu.%r}; @pemit %#=[prompt(Game)] [caplist(%1)] is not a Jutsu Attribute.%r}; @pemit %#=[prompt(Game)] %N does not have the [caplist(%0)] Jutsu.%r
&CMD`JUTSUAPP #1215=$+app/jutsu *=*:@break [match([v(list`JutsuApps)], %#)]={@pemit %#=[prompt(game)] You already have a Jutsu Application in the queue. Please wait up to 48 hours after submission before contacting staff.}; @assert [match([v(list`Jutsu-AppFields)], %0, |)]={@pemit %#=[prompt(app)] [ansi(hy, %0)] is not a valid Jutsu App Field.}; @assert [t(%1)]={@pemit %#={[prompt(app)] The [grab([v(list`jutsu-appfields)], %0, |)] field has been reset.}; @set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuapp)], [elements([v(list`jutsu-appnums)], [match([v(list`jutsu-appfields)], %0, |)])],,|)]}; @include #1215/fn`[elements([v(list`jutsu-appFuncs)], [match([v(list`jutsu-appfields)], %0, |)], |)]=[trim([securex(%1, a %%%,;)])]
&CMD`TFCREATESHOW #1215=$+app/TF:@pemit %#=%r%t%t%t%t Transformation Creator %r%r1. Name: [extract(get(%#/Dat`TFCreate),15,1,|)] %r2. Clan: [extract(get(%#/Dat`TFCreate),14,1,|)] %r3. Description: [extract(get(%#/Dat`TFCreate),16,1,|)] %r4. Precision: [extract(get(%#/Dat`TFCreate),1,1,|)] %r5. Potency: [extract(get(%#/Dat`TFCreate),2,1,|)] %r6. Form: [extract(get(%#/Dat`TFCreate),3,1,|)] %r7. Efficiency: [extract(get(%#/Dat`TFCreate),4,1,|)] %r8. Effectiveness: [extract(get(%#/Dat`TFCreate),5,1,|)] %r9. Adaptability: [extract(get(%#/Dat`TFCreate),6,1,|)] %r10. Mitigation: [extract(get(%#/Dat`TFCreate),7,1,|)] %r11. Penetration: [extract(get(%#/Dat`TFCreate),8,1,|)] %r12. Critical: [extract(get(%#/Dat`TFCreate),9,1,|)] %r13. Damage Reduction: [extract(get(%#/Dat`TFCreate),10,1,|)] %r14. Mental Bonus: [extract(get(%#/Dat`TFCreate),11,1,|)] %r15. Perception Bonus: [extract(get(%#/Dat`TFCreate),12,1,|)] %r%r Remaining Slots: [extract(get(%#/Dat`TFCreate),17,1,|)]
&CMD`TFCREATE #1215=$+app/TF *=*:@assert or(if(lte([extract(get(%#/Dat`TFCreate),17,1,|)],0),[if(match(No,%1),1,0)],1),match(Desc*,%0),match(Name,%0),match(Clan,%0))={@pemit %#=[prompt(System)] You do not have any more TF Creation Slots.};@assert [switch([extract(get(%#/Dat`TFCreate),[match(Precision|Potency|Form|Efficiency|Effectiveness|Adaptability|Mitigation|Penetration|Critical|Damage Reduction|Mental Bonus|Perception Bonus,%0*,|)],1,|)],No,[if([match(No,%1,|)],0,1)],Yes,[if([match(Yes,%1,|)],0,1)])]={@pemit %#=[prompt(System)] That parameter is already set to [grab(Yes|No,%1*,|)].};@assert t(grab(Precision|Potency|Form|Efficiency|Effectiveness|Adaptability|Mitigation|Penetration|Critical|Damage Reduction|Mental Bonus|Perception Bonus|Clan|Name|Description,%0*,|))={@pemit %#=[prompt(System)] %0 is not a proper category for the Transformation Creator. Please use +App/TF to see the categories.};@assert [if(match(Precision|Potency|Form|Efficiency|Effectiveness|Adaptability|Mitigation|Penetration|Critical|Damage Reduction|Mental Bonus|Perception Bonus,%0*,|),match(Yes|No,%1,|),1)]={@pemit %#=[prompt(System)] You must enter Yes or No for the selected TF Creation Catagory.};@assert if(match(Name,%0,|),and(gte(strlen(%1),3),lte(strlen(%1),25)),1)={@pemit %#=[prompt(System)] You need to adjust the length of the Name of this TF.};@assert if(match(Description,grab(Description,%0*,|),|),and(gte(strlen(%1),200),lte(strlen(%1),1000)),1)={@pemit %#=[prompt(System)] You need to adjust the length of the Description of this TF.};@assert if(match(Clan,%0,|),match(get(%#/Dat`Clan)|None,%1,|),1)={@pemit %#=[prompt(System)] You cannot create a TF for a Clan you are not a part of. If you are not in a Clan, use 'None'.}; @eval [if(!hasattr(%#/Dat`TFCreate),[set(%#,Dat`TFCreate:No|No|No|No|No|No|No|No|No|No|No|No|No|None|||5)])][if(and(match(Precision|Potency|Form|Efficiency|Effectiveness|Adaptability|Mitigation|Penetration|Critical|Damage Reduction|Mental Bonus|Perception Bonus,%0*,|),match(Yes|No,%1,|)),[set(%#,Dat`TFCreate:[replace(get(%#/Dat`TFCreate),[match(Precision|Potency|Form|Efficiency|Effectiveness|Adaptability|Mitigation|Penetration|Critical|Damage Reduction|Mental Bonus|Perception Bonus,%0*,|)],[Grab(Yes|No,%1*,|)],|)])][If([match(Yes,%1,|)],[set(%#,Dat`TFCreate:[replace(get(%#/Dat`TFCreate),17,[sub(extract(get(%#/Dat`TFCreate),17,1,|),1)],|)])][pemit(%#,[prompt(System)] You have selected [capstr(%1)] for the [Grab(Precision|Potency|Form|Efficiency|Effectiveness|Adaptability|Mitigation|Penetration|Critical|Damage Reduction|Mental Bonus|Perception Bonus,%0*,|)] Category. You have [extract(get(%#/Dat`TFCreate),17,1,|)] TF Slots remaning.%r)],[set(%#,Dat`TFCreate:[if([match(No,%1,|)],[replace(get(%#/Dat`TFCreate),17,[min(add([extract(get(%#/Dat`TFCreate),17,1,|)],1),5)],|)])])][pemit(%#,[prompt(System)] You have selected [capstr(%1)] for the [grab(Precision|Potency|Form|Efficiency|Effectiveness|Adaptability|Mitigation|Penetration|Critical|Damage Reduction|Mental Bonus|Perception Bonus,%0*,|)] Category. You have [extract(get(%#/Dat`TFCreate),17,1,|)] TF Slots remaning.%r)])])] [if(and(match(Name,%0,|),gte(strlen(%1),3),lte(strlen(%1),25)),[set(%#,Dat`TFCreate:[replace(get(%#/Dat`TFCreate),15,%1,|)])][pemit(%#,[prompt(System)] You have set the Name of the TF being created to '%1'.%r)])][if(match(Description,grab(Description,%0*,|),|),[set(%#,Dat`TFCreate:[replace(get(%#/Dat`TFCreate),16,%1,|)])][pemit(%#,[prompt(System)] You have set the Description of the TF being created to:%r%r '%1'%r)])][if(and(match(Clan,%0,|),match(get(%#/Dat`Clan)|None,%1,|)),[set(%#,Dat`TFCreate:[replace(get(%#/Dat`TFCreate),14,%1,|)])][pemit(%#,[prompt(System)] You have set the Clan of the TF being created to '%1'.%r)])]
&CMD`STAFFTFAPPS #1215=$+Staff/TFApps:@break hasslabs(%#,staff-skill)={@pemit %#=[prompt(Staff)] TF Queue [iter(get(#1215/List`TFApps),%r #@. [name(##)],|)]};@pemit %#=[Prompt(System)] You are not permitted to use this command.
&CMD`STAFFTFVERIFY #1215=$+Staff/TF Verify=*:@break hasslabs(%#,staff-skill)={@break match(get(#1215/List`TFApps),[pmatch(%0)],|)={@eval [pemit(%#,[prompt(Staff)]%t[name(num(*%0))]'s TF Application %r%b%b%b%b%b %r%r15. Name: [extract(get([pmatch(%0)]/Dat`TFCreate),15,1,|)] %r14. Clan: [extract(get([pmatch(%0)]/Dat`TFCreate),14,1,|)] %r16. Description: [extract(get([pmatch(%0)]/Dat`TFCreate),16,1,|)] %r1. Precision: [extract(get([pmatch(%0)]/Dat`TFCreate),1,1,|)] %r2. Potency: [extract(get([pmatch(%0)]/Dat`TFCreate),2,1,|)] %r3. Form: [extract(get([pmatch(%0)]/Dat`TFCreate),3,1,|)] %r4. Efficiency: [extract(get([pmatch(%0)]/Dat`TFCreate),4,1,|)] %r5. Effectiveness: [extract(get([pmatch(%0)]/Dat`TFCreate),5,1,|)] %r6. Adaptability: [extract(get([pmatch(%0)]/Dat`TFCreate),6,1,|)] %r8. Mitigation: [extract(get([pmatch(%0)]/Dat`TFCreate),7,1,|)] %r9. Penetration: [extract(get([pmatch(%0)]/Dat`TFCreate),8,1,|)] %r10. Critical: [extract(get([pmatch(%0)]/Dat`TFCreate),9,1,|)] %r11. Damage Reduction: [extract(get([pmatch(%0)]/Dat`TFCreate),10,1,|)] %r12. Mental Bonus: [extract(get([pmatch(%0)]/Dat`TFCreate),11,1,|)] %r13. Perception Bonus: [extract(get([pmatch(%0)]/Dat`TFCreate),12,1,|)] %r%r17. Reamining Slots: [extract(get([pmatch(%0)]/Dat`TFCreate),17,1,|)] )]};@pemit %#=[Prompt(Staff)] There is currently no TF Application for %0.};@pemit %#=[Prompt(System)] You are not permitted to use this command.
&CMD`STAFFTFALTER #1215=$+Staff/TFAlter *=*/*:@break hasslabs(%#,staff-skill)={@break match(get(#1215/List`TFApps),[pmatch(%0)],|)={@break match(1 2 3 4 5 6 8 9 10 11 12 13 14 15 16 17,%1)={@pemit %#=[prompt(Staff)] %0's [switch(%1,15,Name Field:,14,Clan Field:,16,Description Field:,1,Precision Field:,2,Potency Field:,3,Form Field:,4,Efficiency Field:,5,Effectiveness Field:,6,Adaptability Field:,8,Mitigation Field:,9,Penetration Field:,10,Critical Field:,11,DR Field:,12,Mental Field:,13,Perception Field:,17,Slots Field:)]"[ansi(hw,[extract(get([pmatch(%0)]/Dat`TFCreate),%1,1,|)])]" is being altered to "[ansi(hw,%2)]". Make certain that this is correct before completing the application.;@set [pmatch(%0)]=Dat`TFCreate:[replace(get([pmatch(%0)]/Dat`TFCreate),%1,[capstr(%2)],|)] };@pemit %#=[Prompt(Staff)] %1 is not between 1-17 (but not 7). Refer to +staff/tf Verfiy=%0 for list of alterable fields.};@pemit %#=[Prompt(Staff)] There is currently no Transformation Application for %0.};@pemit %#=[Prompt(System)] You are not permitted to use this command.
&CMD`STAFFTFAPPROVE #1215=$+Staff/TF Approve=*:@break hasslabs(%#,staff-skill)={@break match(get(#1215/List`TFApps),[pmatch(*%0)],|)={@break and(gte(get([pmatch(%0)]/Dat`KP),8),gte(get([pmatch(%0)]/Dat`XP),10000))={@assert !match([sqlite_query(Game, Select Name from Transformations)],[extract(get(%#/Dat`TFCreate),15,1,|)],^)={@pemit %#=[prompt(Staff)] The [extract(get(%#/Dat`TFCreate),15,1,|)] Transformation already exists in the Database.};@assert [hasattr([pmatch(%0)]/dat`TFapproval)]={@set [pmatch(%0)]=dat`TFapproval:%#; @cemit monitor-app={[prompt(App)] [ansi(hc, %K)] has approved [ansi(hy,[name(*%0)])]'s Transformation. They need one more staff member to approve them.}};@assert [!strmatch(%0, [get([pmatch(%0)]/dat`TFapproval)])]={@pemit %#=[prompt(App)] You can't approve them again. Ask some other staff member to do this.};@eval sqlite_query(Game, INSERT INTO Transformations VALUES ("[extract(get(pmatch(%0)/Dat`TFCreate),1,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),2,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),3,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),4,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),5,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),6,1,|)]"%,""%,"[extract(get(pmatch(%0)/Dat`TFCreate),8,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),9,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),10,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),11,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),12,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),13,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),14,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),15,1,|)]"%,"[extract(get(pmatch(%0)/Dat`TFCreate),16,1,|)]")) ;@pemit %#=[prompt(App)] The Transformation "[extract(get([pmatch(%0)]/Dat`TFCreate),15,1,|)]" has been approved for [name(pmatch(%0))]. There are [sub(words(get(#1215/List`TFApps),|),1)] remaining in queue.;@cemit Monitor-App=[prompt(App)] The Transformation "[extract(get([pmatch(%0)]/Dat`TFCreate),15,1,|)]" has been approved by %K and [cname([get(%#/dat`TFapproval)])] for [name(pmatch(%0))]. There are [sub(words(get(#1215/List`TFApps),|),1)] remaining in queue.; @set [pmatch(%0)]=Dat`KP:[sub(get([pmatch(%0)]/Dat`KP),8)];@set [pmatch(%0)]=Dat`XP:[sub(get([pmatch(%0)]/Dat`XP),10000)];@pemit [pmatch(%0)]=[prompt(Game)] Your application for the "[extract(get([pmatch(%0)]/Dat`TFCreate),15,1,|)]" Transformation has been approved. 8 KP and 10000 XP has been deducted. ;@set [pmatch(%0)]=Dat`TFList:[insert(get(pmatch(%0)/Dat`TFList),-1,[extract(get([pmatch(%0)]/Dat`TFCreate),15,1,|)],|)] ;@set [pmatch(%0)]=Dat`TFCreate:No|No|No|No|No|No|No|No|No|No|No|No|No|None|||5; @set #1215=List`TFApps:[remove(get(#1215/List`TFApps),[pmatch(%0)],|)] };@pemit %#=[Prompt(App)] The applicant([name(pmatch(%0))]) does not currently have enough KP and/or XP to approve their request.;@pemit [pmatch(%0)]=[Prompt(Game)] Your application could not be completed as you lack the KP and/or XP at this time. };@pemit %#=[Prompt(App)] There is currently no Transformation Application for [pmatch(%0)].};@pemit %#=[Prompt(System)] You are not permitted to use this command.
&CMD`TFAPPSUBMIT #1215=$+App/TF Submit:@assert gte(get(%#/Dat`XP),10000)={@pemit %#=[prompt(Game)] You do not have enough XP(10,000) to create a Transformation.} ;@assert gte(get(%#/Dat`KP),[max(sub(8,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])={@pemit %#=[prompt(Game)] You do not have enough KP%([max(sub(8,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)]%) to create a Transformation.};@assert !match([sqlite_query(Game, Select Name from Transformations)],[extract(get(%#/Dat`TFCreate),15,1,|)],^)={@pemit %#=[prompt(App)] The [extract(get(%#/Dat`TFCreate),15,1,|)] Transformation already exists.};@assert and([if(eq([extract(get(%#/Dat`TFCreate),17,1,|)],0),1,0)],[words([extract(get(%#/Dat`TFCreate),15,1,|)])],[words([extract(get(%#/Dat`TFCreate),16,1,|)])])={@pemit %#=[prompt(Game)] The TF either has remaining slots or you have not filled out the Name, Clan, or Description fields.};@eval sqlite_query(Game, INSERT INTO Transformations VALUES ("[extract(get(%#/Dat`TFCreate),1,1,|)]"%,"[extract(get(%#/Dat`TFCreate),2,1,|)]"%,"[extract(get(%#/Dat`TFCreate),3,1,|)]"%,"[extract(get(%#/Dat`TFCreate),4,1,|)]"%,"[extract(get(%#/Dat`TFCreate),5,1,|)]"%,"[extract(get(%#/Dat`TFCreate),6,1,|)]"%,""%,"[extract(get(%#/Dat`TFCreate),7,1,|)]"%,"[extract(get(%#/Dat`TFCreate),8,1,|)]"%,"[extract(get(%#/Dat`TFCreate),9,1,|)]"%,"[extract(get(%#/Dat`TFCreate),10,1,|)]"%,"[extract(get(%#/Dat`TFCreate),11,1,|)]"%,"[extract(get(%#/Dat`TFCreate),12,1,|)]"%,"[extract(get(%#/Dat`TFCreate),14,1,|)]"%,"[extract(get(%#/Dat`TFCreate),15,1,|)]"%,"[extract(get(%#/Dat`TFCreate),16,1,|)]")) ;@set %#=Dat`KP:[sub(get(%#/Dat`KP),[max(sub(8,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])];@set %#=Dat`XP:[sub(get(%#/Dat`XP),10000)];@pemit %#=[prompt(Game)] Your application for the "[extract(get(%#/Dat`TFCreate),15,1,|)]" Transformation has been approved. [max(sub(8,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)] KP[if([match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],%b%(Elite Tradition%),)] and 10000 XP has been deducted. ;@cemit Monitor-app=[prompt(Staff)] %N has created the "[extract(get(%#/Dat`TFCreate),15,1,|)]" Transformation.; @set %#=Dat`TFList:[insert(get(%#/Dat`TFList),-1,[extract(get(%#/Dat`TFCreate),15,1,|)],|)] ;@set %#=Dat`TFCreate:No|No|No|No|No|No|No|No|No|No|No|No|No|None|||5
&CMD`CLANTF #1215=$+ClanTF:@assert !match(get(%#/Dat`TFlist),[switch(1,match(get(%#/Dat`Clan),Uchiha),Sharingan,match(get(%#/Dat`Clan),Hyuuga),Byakugan,match(get(%#/Dat`Clan),Kaguya),Shikotsumyaku,match(get(%#/Dat`Clan),On'You),Kokuuzou,match(get(%#/Dat`Clan),Akimichi),Super Multi-Size,match(get(%#/Dat`Clan),Inuzuka),Four Legs,match(get(%#/Dat`Clan),Hozuki),Hydrification)],|)={@pemit %#=[prompt(Game)] You have already unlocked your Kekkei Genkai Transformation.};@assert [gte(get(%#/Dat`XP),10000)]={@pemit %#=[prompt(Game)] You do not have enough XP(10\,000) to purchase your clan's Transformation.};@assert [gte(get(%#/Dat`KP),[max(sub(8,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])]={@pemit %#=[prompt(Game)] You do not have enough KP%([max(sub(8,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)]%) to purchase your clan's Transformation.};@eval [if(match(Uchiha|Hyuuga|Kaguya|On'You|Akimichi|Inuzuka|Hozuki|,[get(%#/Dat`Clan)],|),[set(%#,Dat`TFList:[insert(get(%#/Dat`TFList),-1,[switch(1,match(get(%#/Dat`Clan),Uchiha),Sharingan,match(get(%#/Dat`Clan),Hyuuga),Byakugan,match(get(%#/Dat`Clan),Kaguya),Shikotsumyaku,match(get(%#/Dat`Clan),On'You),Kokuuzou,match(get(%#/Dat`Clan),Akimichi),Super Multi-Size,match(get(%#/Dat`Clan),Inuzuka),Four Legs,match(get(%#/Dat`Clan),Hozuki),Hydrification)],|)])][set(%#,Dat`XP:[sub(get(%#/Dat`XP),10000)])][set(%#,Dat`KP:[sub(get(%#/Dat`KP),[max(sub(8,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])])][pemit(%#,[prompt(Game)] You have purchased your clan's Transformation([switch(1,match(get(%#/Dat`Clan),Uchiha),Sharingan,match(get(%#/Dat`Clan),Hyuuga),Byakugan,match(get(%#/Dat`Clan),Kaguya),Shikotsumyaku,match(get(%#/Dat`Clan),On'You),Kokuuzou,match(get(%#/Dat`Clan),Akimichi),Super Multi-Size,match(get(%#/Dat`Clan),Inuzuka),Four Legs,match(get(%#/Dat`Clan),Hozuki),Hydrification)]) for 10000 XP and [max(sub(8,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)] KP[if([match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],%b%(Elite Tradition%),)]. You have [get(%#/Dat`XP)] and [get(%#/Dat`KP)] KP remaining.)][remit(%L,[prompt(Game)] %N awakens the potential of their Clan!)],[pemit(%#,[prompt(Game)] Your clan does not have a Transformation.)])] ; @If match(Uchiha|Hyuuga|Kaguya|On'You|Akimichi|Inuzuka|Hozuki|,[get(%#/Dat`Clan)],|)={@cemit Monitor-App=[prompt(Game)] %N awakens the potential of their Clan ([switch(1,match(get(%#/Dat`Clan),Uchiha),Sharingan,match(get(%#/Dat`Clan),Hyuuga),Byakugan,match(get(%#/Dat`Clan),Kaguya),Shikotsumyaku,match(get(%#/Dat`Clan),On'You),Kokuuzou,match(get(%#/Dat`Clan),Akimichi),Super Multi-Size,match(get(%#/Dat`Clan),Inuzuka),Four Legs,match(get(%#/Dat`Clan),Hozuki),Hydrification)])! }
&CMD`STATBUY #1215=$+buy/stat *:@assert [hasattr(%#/dat`Approval)]={@pemit %#=[prompt(Game)] Please complete CG before buying stats.}; @break [member([get(%l/list`players)],%#)]={@pemit %#=%r%r[prompt(App)] You cannot purchase things while in Order.%r};@assert [setr(0, [match(get(#244/Dat`PrimaryStats),%0,|)])]={@pemit %#=[Prompt(App)] [caplist(%0)] is not a Primary Stat.};@assert [lt([elements([get(%#/dat`PrimaryStats)], %q0, |)], [add(9, -[t([match([get(%#/dat`Flaws)], Inferior %0, |)])], [or([match([get(%#/dat`Merits)], Greater %0, |)], [match([get(%#/dat`Merits)], Genius, |)])])])]={@pemit %#=[Prompt(App)] [capstr([lcstr(%0)])] cannot be raised further.}; @assert [gte([get(%#/dat`KP)], [max(sub(3,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])]={@pemit %#=[prompt(app)] You require at least 3 Knowledge Points to raise a stat.}; @assert gte(get(%#/Dat`XP), [setr(1, [switch(get(%#/Dat`Tier),0,250,1,500,2,750,3,1000,4,1500,5,2000,6,2500,7,3500,8,5000)])])={@pemit %#=[Prompt(App)] You need %q1 XP to raise a stat.}; @set %#=Dat`PrimaryStats:[replace([get(%#/dat`PrimaryStats)], %q0, [inc([elements([get(%#/dat`PrimaryStats)], %q0, |)])], |)]; @set %#=Dat`KP:[sub([get(%#/dat`KP)], [max(sub(3,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])]; @set %#=Dat`XP:[sub([get(%#/dat`XP)], %q1)]; @pemit %#={[prompt(app)] [elements([get(#244/dat`PrimaryStats)], %q0, |)] has been raised to [elements([get(%#/dat`PrimaryStats)], %q0, |)] for %q1 XP and [max(sub(3,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)] KP[if([match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],%b%(Elite Tradition%),)]. You have [get(%#/dat`XP)] XP and [get(%#/dat`KP)] KP remaining.}; @skip/ifelse [match(17 25 33 41 49 57 65 73, [ladd([get(%#/dat`PrimaryStats)], |)])]={@set %#=dat`Tier:[inc([get(%#/dat`Tier)])]; @pemit %#={[prompt(Game)] Your tier has increased to Tier [get(%#/dat`Tier)].}; {@eval [switch(1, [lte(1, [get(%#/dat`Tier)], 2)], [setq(2, 3)][setq(3, 3)], [lte(3, [get(%#/dat`Tier)], 4)], [setq(2, 2)][setq(3, 2)], [lte(5, [get(%#/dat`tier)], 6)], [setq(2, 1)][setq(3, 1)], [gte(7, [get(%#/dat`tier)])], [setq(2, 0)][setq(3, 0)])]}; @wait 0={@set %#=dat`SpecialtySlots:[add([get(%#/dat`SpecialtySlots)], %q2)]; @set %#=Dat`ExpertiseSlots:[add([get(%#/dat`ExpertiseSlots)], %q3)]; @pemit %#=[prompt(Game)] You have gained %q2 Specialty Slots and %q3 Expertise Slots.}}; @eval [u(#245/func`Refresh)]; @cemit Monitor-App= [ansi(hm, %N)] %(%#%) has increased their [capstr([lcstr(%0)])] Stat.
&CANUSE #1215=[gt(secs(),v(secs_%#))][ifelse(wildmatch(lcmds(me,|),%x,|),set(#1215,secs_%#:[secs()]))]
@Ufail #1215=The command is still processing. Please wait a second and try again.
@lock/UseLock #1215=CANUSE/1
&CMD`JUTSUAPPDENIAL #1215=$+staff/jutsu Deny=*:@assert slabs(%#,staff-skill)={@pemit %#=[Prompt(System)] You are not permitted to use this command.};@assert match(get(#1215/List`Jutsuapps),[pmatch(%0)],|)={@pemit %#=[prompt(Staff)] There is not a Jutsu App for [name(*%0)].};@set [pmatch(%0)]=dat`jutsuapproval:;@set #1215=List`JutsuApps:[remove([get(#1215/List`JutsuApps)],[pmatch(%0)],|)];@cemit Monitor-App=[prompt(Staff)] [name(%#)] has just denied [name(*%0)]'s Jutsu App. The player should immediately be given a reason for this and what must be done to resolve the situation via @mails and pages if they are available. This denial makes it so that until the player uses the command: +app/jutsu Resubmit ; @force [pmatch(NML-Bot)]=@mail %0/Jutsu App Denied=[Prompt(Game)] Your current Jutsu Application for [extract(get(#1215/JutsuApps`%#),1,1,|)] has been denied. You should be contact shortly as to why and how to resolve the issue. If you have not been reached within a few hours, please send a +request or contact staff members to ask what is going on so that the issue may be resolved quickly. When it is resolved, please use the command +App/jutsu resubmit in order to apply again.
&CMD`JUTSUAPPRESUB #1215=$+App/jutsu Resubmit:@assert !match(get(#1215/List`Jutsuapps),[pmatch(%0)],|)={@pemit %#=[prompt(Game)] There is already a Jutsu app in queue.}; @set #1215=List`JutsuApps:[insert(get(#1215/List`JutsuApps),-1,%#,|)]; @pemit %#=[prompt(Game)] You have resubmitted your Jutsu Application. Please allow for up to 48 hours for the jutsu to be reviewed. ; @cemit Monitor-App=[prompt(Staff)] %N has resubmitted their jutsu application. Please review and accept, alter, or deny the app as appropriate.
&FUNC`JUTSUARCHCHECK #1215=[match([switch([extract(get(#1215/JutsuApps`%#),4,1,|)],Taijutsu,Targeted|Powerful|Disrupt|Flurry|DoT|Feint|Counter|Clash|Block|Evade|Avoid|Collab,Bukijutsu,Targeted|Powerful|Disrupt|Flurry|DoT|Feint|Counter|Clash|Turtle|Block|Collab,Chakra Flow Taijutsu,Targeted|Powerful|Disrupt|Flurry|Charge|Feint|DoT|Absorb|Drain|Counter|Clash|Turtle|Block|Evade|Avoid|Collab,Chakra Flow Bukijutsu,Targeted|Powerful|Disrupt|Flurry|Charge|Feint|DoT|Drain|Counter|Clash|Turtle|Reflection|Block|Collab,Ninjutsu,Targeted|Powerful|Disrupt|Barrage|Charge|Feint|DoT|Absorb|Drain|Clash|Turtle|Barrier|Reflection|Block|Evade|Avoid|Collab,Nintaijutsu,Targeted|Powerful|Disrupt|Barrage|Charge|Feint|DoT|Absorb|Drain|Counter|Clash|Turtle|Barrier|Reflection|Block|Evade|Avoid|Collab,Seals,Targeted|Powerful|Disrupt|Flurry|Barrage|Charge|DoT|Absorb|Drain|Clash|Turtle|Barrier|Reflection|Block|Evade|Avoid|Collab,Calligraphy,Targeted|Powerful|Disrupt|Flurry|Barrage|Charge|Feint|DoT|Absorb|Drain|Counter|Clash|Turtle|Barrier|Reflection|Block|Evade|Avoid|Collab, Combination,Absorb|Avoid|Barrage|Barrier|Block|Charge|Clash|Collab|Counter|Disrupt|DoT|Drain|Evade|Feint|Flurry|Powerful|Reflection|Targeted|Turtle)],%0,|)]
&CMD`RPSKILL #1215=$+buy/RPskill *:@break [member([get(%l/list`players)],%#)]={@pemit %#=%r%r[prompt(App)] You cannot purchase things while in Order.%r};@assert gt([extract(get(%#/Dat`RPSKills),[match(get(#244/Dat`RPSKILLs),%0,|)],1,|)],0)={@pemit %#=[prompt(App)] You do not possess the [caplist(%0,,,L)] RP Skill.};@assert lt([extract(get(%#/Dat`RPSKills),[match(get(#244/Dat`RPSKILLs),%0,|)],1,|)],10)={@pemit %#=[prompt(App)] Your [caplist(%0,,,L)] RP Skill is already at the maximum level of 10.};@assert match(get(#244/Dat`RPSkills),%0,|)={@pemit %#=[prompt(App)] [caplist(%0,,,L)] is not an RP Skill.};@assert gte(get(%#/Dat`XP),1000)={@pemit %#=[prompt(App)] You do not have enough XP(1000) to upgrade the [caplist(%0,,,L)] RP Skill.};@assert gte(get(%#/Dat`KP),[max(sub(2,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])={@pemit %#=[prompt(App)] You do not have enough KP([max(sub(2,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)]) to upgrade the [caplist(%0,,,L)] RP Skill.};@set %#=Dat`RPSkills:[replace(get(%#/Dat`RPSKills),[match(get(#244/Dat`RPSKILLs),[grab(get(#244/Dat`RPSkills),%0,|)],|)],[add([extract(get(%#/Dat`RPSKills),[match(get(#244/Dat`RPSKILLs),%0,|)],1,|)],1)],|)]; @set %#=Dat`XP:[sub(get(%#/Dat`XP),1000)]; @set %#=Dat`KP:[sub(get(%#/Dat`KP),[max(sub(2,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])]; @pemit %#=[prompt(App)] You have successfully increased your [caplist(%0,,,L)] RP Skill to [extract(get(%#/Dat`RPSKills),[match(get(#244/Dat`RPSKILLs),%0,|)],1,|)]! You have [get(%#/Dat`XP)] XP and [get(%#/Dat`KP)] KP remaining.; @cemit monitor-app=[prompt(App)] %N has increased their [caplist(%0,,,L)] RP Skill to [extract(get(%#/Dat`RPSKills),[match(get(#244/Dat`RPSKILLs),%0,|)],1,|)].
&CMD`JUTSULESSON #1215=$+Lesson/review:@pemit %#=[printf($:[ansi(hb,-=)]:^78s,[ansi(hb,\[)]%b[ansi(hw,+jutsu [extract(get(%#/Dat`JutsuShower),2,1,|)])]%b[ansi(hb,\])])]%r%r[printf($#3#&^78s,[ansi(hg,[extract([get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)])],12,1,|)])] [extract([get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)])],8,1,|)] \([extract([get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)])],11,1,|)]\))] %r[printf($#3#&^78s,[ansi(hc,Rank:)] [sqlite_query(Game, Select Rank From Templates Where ID="[extract([get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)])],7,1,|)]")] %t%t [ansi(hc,XP:)] [floor(mul(add(sqlite_query(Game, Select XP From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),[switch([extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),14,1,|)],1,0,2,1000,3,3000,4,6000,5,10000,6,15000)]),[switch(1,[and([match(get(%#/Dat`AffinityList),sqlite_query(Game, Select Type From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),|)],[match(Ninjutsu|Nintaijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu,sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),|)])],[sub(.75,[if(match([regeditall(get(%#/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)],[if(hasattr([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`Students),[if(match(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`Students),%#),.1,0)],0)])],[and([match(get(%#/Dat`AffinityList),Yang,|)],[match(Taijutsu|Bukijutsu,sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),|)])],[sub(.75,[if(match([regeditall(get(%#/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)],[if(hasattr([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`Students),[if(match(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`Students),%#),.1,0)],0)])],[and([match(get(%#/Dat`AffinityList),Yin,|)],[match(Seals|Calligraphy,sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),|)])],[sub(.75,[if(match([regeditall(get(%#/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)],[if(hasattr([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`Students),[if(match(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`Students),%#),.1,0)],0)])],1)]))])] %r%r [printf($#3#&^78s,[ansi(hc,Stamina:)] [ceil(sub(sqlite_query(Game, Select Stamina From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),mul(sqlite_query(Game, Select Stamina From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),[u(#1215/func`efficiencymod,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)])])))] %t [ansi(hc,Chakra:)] [ceil(sub(sqlite_query(Game, Select Chakra From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),mul(sqlite_query(Game, Select Chakra From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),[u(#1215/func`efficiencymod,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)])])))] %t [ansi(hc,AP:)] [if(match([sqlite_query(Game, Select Method From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")],Defend),0,[max(add(sqlite_query(Game, Select AP From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),add([u(#1215/func`formmod,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)])],[if([extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`Link),2,1,|)],1)])),[switch(1,[if(match([sqlite_query(Game, Select Category From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")],Taijutsu),1)],[switch(sqlite_query(Game, Select Rank From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),E,1,D,1,C,1,B,2,A,2,S,3)],[if(match([sqlite_query(Game, Select Category From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")],Ninjutsu),1)],[switch(sqlite_query(Game, Select Rank From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),E,2,D,2,C,3,B,3,A,4,S,4)])])])])] %r%r[printf($#3#&^78s,[ansi(hy,Proficiency Level:)] [switch([extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),14,1,|)],1,Novice,2,Practitioner,3,Adept,4,Skilled,5,Expert,6,Master)]\([extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),14,1,|)]\) %t [ansi(hy,Mastery Points:)] [extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),15,1,|)])] %r%r[printf($#3#&^78s,[ansi(hc,Precision:)] [extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),1,1,|)] \([u(#1215/Func`PrecisionMinRoll,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)])]-[u(#1215/Func`PrecisionMaxRoll,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)])]\) %t [ansi(hc,Potency:)] [extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),2,1,|)] \([u(#1215/Func`PotencyMinRoll,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)])]-[u(#1215/Func`PotencyMaxRoll,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)])]\) %r[ansi(hc,Form:)] [extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),3,1,|)] \([u(#1215/Func`FormMod,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)])] AP\) %t%t [ansi(hc,Efficiency:)] [extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),4,1,|)] \([ceil(mul(u(#1215/Func`EfficiencyMod,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)]),100))]\%\) %r[ansi(hc,Effectiveness:)] [extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),5,1,|)] \([ceil(mul(u(#1215/Func`EffectivenessMod,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)]),100))]\%\) %t [ansi(hc,Adaptability:)] [extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),6,1,|)] \([mul(u(#1215/Func`AdaptabilityMod,[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)],[extract(get(%#/Dat`JutsuShower),1,1,|)]),100)]\%\))] %r%r[printf($#3#&^78s,[ansi(hr,Mitigation:)] [ceil(mul(add(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`Mit),IF(hasattr([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`TF),IF(Match([sqlite_query(Game, Select Mit From Transformations Where Name="[get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`TF)]")],Yes),[add(.2,mul([u(#1215/Func`EffectivenessMod,[extract(get(%#/Dat`JutsuShower),2,1,|)],[extract(get(%#/Dat`JutsuShower),1,1,|)])],.75))]),[add(0,mul([u(#1215/Func`EffectivenessMod,[extract(get(%#/Dat`JutsuShower),2,1,|)],[extract(get(%#/Dat`JutsuShower),1,1,|)])],.75))])),100))]\% %t [ansi(hr,Penetration:)] [ceil(mul(u(#1215/Func`PenMod),100))]\% %t [ansi(hr,Damage Reduction:)] [if(match([sqlite_query(Game, Select Method From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")],Attack),0,[if(match([sqlite_query(Game, Select Special From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")],Barrier,~),[ceil(mul(match(get(#254/Dat`JutsuRanks),[sqlite_query(Game, Select Rank From Templates where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[extract(get(%#/Dat`JutsuShower),2,1,|)]),7,1,|)]")],|),ceil(mul(750,[u(#1215/Func`DRMod)]))))],0)])])] %r%r[ansi(hc,Special Actions:)] [edit(sqlite_query(Game, Select Special From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),~,%b)]%r%r[ansi(hc,Description:)] [extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),9,1,|)] %r%r[printf($#3#&^78s,[ansi(hc,Method:)] [sqlite_query(Game, Select Method From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")] %t [ansi(hc,Type:)] [sqlite_query(Game, Select Type From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")] %t [ansi(hc,Range:)] [sqlite_query(Game, Select Range From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")] %r[ansi(hc,Access:)] [sqlite_query(Game, Select Author From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")] %t [ansi(hc,Author:)] [extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),13,1,|)])]%r%r[repeat([ansi(hb,-=)],39)]
&CMD`INSTRUCT #1215=$+instruct *=*:@assert nearby(%#,[pmatch(%1)])={@pemit %#=[prompt(Game)] The character you are trying to instruct is not present in the room.};@assert hasattr(%#/Dat`JutsuAttributes`[edit(%0,%b,-)])={@pemit %#=[prompt(Game)] You do not possess the [caplist(%0,,,L)] jutsu.};@assert !hasattr([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)])={@pemit %#=[prompt(Game)] [name([pmatch(%1)])] already possess the [caplist(%0,,,L)] jutsu.};@assert gte(get([pmatch(%1)]/Dat`KP),[switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,2,D,3,C,4,B,6,A,7,S,8)])={@pemit %#=[prompt(Game)] [name([pmatch(%1)])] does not have enough KP to learn the [caplist(%0,,,L)] jutsu from you at this time.};@assert gte(get([pmatch(%1)]/Dat`XP),[floor(mul(add(sqlite_query(Game, Select XP From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"),[switch([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),14,1,|)],1,0,2,1000,3,3000,4,6000,5,10000,6,15000)]),[switch(1,[and([match(get([pmatch(%1)]/Dat`AffinityList),sqlite_query(Game, Select Type From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"),|)],[match(Ninjutsu|Nintaijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu,sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"),|)])],[sub(.75,[if(match([regeditall(get([pmatch(%1)]/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)],[if(hasattr(%#/Dat`Students),[if(match(get(%#/Dat`Students),[pmatch(%1)]),.1,0)],0)])],[and([match(get([pmatch(%1)]/Dat`AffinityList),Yang,|)],[match(Taijutsu|Bukijutsu,sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"),|)])],[sub(.75,[if(match([regeditall(get([pmatch(%1)]/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)],[if(hasattr(%#/Dat`Students),[if(match(get(%#/Dat`Students),[pmatch(%1)]),.1,0)],0)])],[and([match(get([pmatch(%1)]/Dat`AffinityList),Yin,|)],[match(Seals|Calligraphy,sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"),|)])],[sub(.75,[if(match([regeditall(get([pmatch(%1)]/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)],[if(hasattr(%#/Dat`Students),[if(match(get(%#/Dat`Students),[pmatch(%1)]),.1,0)],0)])],1)]))])={@pemit %#=[prompt(Game)] [name([pmatch(%1)])] does not have enough XP to learn the [caplist(%0,,,L)] jutsu from you at this time.};@assert [u(#1215/Func`ExpertSpecCon,%0,%1)]={@pemit %#=[prompt(Game)] [name([pmatch(%1)])] is does not have the Specialties training necessary to be taught the [caplist(%0,,,L)] jutsu at this time.};@assert if(match(sqlite_query(Game, select Author from Templates where ID="[elements(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,|)]"),General),1,match(sqlite_query(Game, select Author from Templates where ID="[elements(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,|)]"),get([pmatch(%1)]/Dat`Clan),|))={@pemit %#=[prompt(Game)] [name([pmatch(%1)])] is not part of a clan capable of learning this jutsu. };@eval [t([setq(0,[pmatch(%1)])])];@pemit %#=[prompt(game)] You have offered to instruct [ansi(y, [name(%q0)])] in the usage of the [caplist(%0,,,L)] jutsu.;@pemit %q0=[prompt(game)] [ansi(c, %N)] wants to instruct you in thier [ansi(hy,caplist(%0,,,L))] Jutsu. %r%rType [ansi(hg, +lesson/review)] to look at the jutsu being offered and it's costs. Type [ansi(hg, +lesson/accept)] or [ansi(hg, +lesson/decline)] to accept or decline the jutsu instruction.;&dat`Jutsushower %q0=%#|%0
&FUNC`EXPERTSPECCON #1215=[and(eq([words([setinter([elements(Targeted Powerful Disrupt Flurry|Barrage Charge Feint DoT Absorb Drain Counter|Clash Collab Block|Turtle Barrier Reflection Evade|Avoid, [iter([regeditall(get([pmatch(%1)]/dat`ExpertiseList), %\^%[012%],)], [match(Targeted|Powerful|Disruption|Onslaught|Chakra Flow|Ambidexterity|Attrition|Chakra Absorption|Chakra Drain|Counter Offensive|Synchronized Effort|Fortification|Barrier|Reflection|Evasive Maneuvers, ##, |)], |)],%b,|)], [edit(sqlite_query(Game, select Special from Templates where ID="[elements(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,|)]"),~,|)], |)],|)], [words([trim([sqlite_query(Game, select Special from Templates where ID="[elements(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,|)]")], r, ~)], ~)]),[if(match([sqlite_query(Game, select Type from Templates where ID="[elements(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,|)]")],Physical),1,[words(setinter([elements(Fire Water Wind Earth Lightning Yin Yang Combination, [iter([regeditall(get([pmatch(%1)]/dat`ExpertiseList), %\^%[012%],)], [match(Nature Transformation: Fire|Nature Transformation: Water|Nature Transformation: Wind|Nature Transformation: Earth|Nature Transformation: Lightning|Nature Transformation: Yin|Nature Transformation: Yang|Combination Element: *, ##, |)], |)],%b,|)], [sqlite_query(Game, select Type from Templates where ID="[elements(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,|)]")], |),|)])])]
&CMD`INSTRUCT-RESPONSE #1215=$^\+lesson/(accept|decline)$:@break [hasattr(%#, dat`jutsushower)]={@break [strmatch(%1, accept)]={@pemit [extract(get(%#/Dat`JutsuShower),1,1,|)]=[prompt(game)] [ansi(y, [cname(%#)])] has accepted the instruction in your [extract(get(%#/Dat`JutsuShower),2,1,|)] jutsu.;@pemit %#=[prompt(Game)] You have accepted instruction in [ansi(c,name(extract(get(%#/Dat`JutsuShower),1,1,|)))]'s [extract(get(%#/Dat`JutsuShower),2,1,|)] jutsu for [u(#1215/Func`InstructXpCost,[extract(get(%#/Dat`JutsuShower),1,1,|)],[extract(get(%#/Dat`JutsuShower),2,1,|)])] XP and [switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")],E,2,D,3,C,4,B,6,A,7,S,8)] KP.;@set %#=dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]:[get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)])];@set %#=Dat`XP:[sub(get(%#/Dat`XP),[u(#1215/Func`InstructXpCost,[extract(get(%#/Dat`JutsuShower),1,1,|)],[extract(get(%#/Dat`JutsuShower),2,1,|)])])];@set %#=Dat`KP:[sub(get(%#/Dat`KP),[switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]")],E,2,D,3,C,4,B,6,A,7,S,8)])];&dat`jutsushower %#=};@pemit %#=[prompt(game)] You have [ansi(r, declined)] to learn [ansi(c, [name([extract(get(%#/Dat`JutsuShower),1,1,|)])])]'s [extract(get(%#/Dat`JutsuShower),2,1,|)] jutsu.;@pemit [extract(get(%#/Dat`JutsuShower),1,1,|)]=[prompt(game)] [ansi(y, %N)] has [ansi(r, declined)] to learn your [extract(get(%#/Dat`JutsuShower),2,1,|)] jutsu.;&dat`jutsushower %#=};@pemit %#=[prompt(game)] No one is attempting to instruct you in a jutsu.
@set #1215/CMD`INSTRUCT-RESPONSE = regexp
&FUNC`PRECISIONMINROLL #1215=Ceil(MUL([u(#1215/Func`PrecisionMaxRoll,%0,%1)],ADD(0.45,fDIV(add([extract(u(%#/Dat`TranscendAttribs),[switch(sqlite_query(Game, Select Category From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),Taijutsu,1,Ninjutsu,2,Genjutsu,3)],1,|)],[extract(u(%#/Dat`PrimaryStats),[switch(sqlite_query(Game, Select Category From Templates Where ID="[extract(get([extract(get(%#/Dat`JutsuShower),1,1,|)]/Dat`JutsuAttributes`[edit([extract(get(%#/Dat`JutsuShower),2,1,|)],%b,-)]),7,1,|)]"),Taijutsu,1,Ninjutsu,2,Genjutsu,3)],1,|)]),100),fDIV(MUL([extract(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),1,1,|)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.8)),1.25,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.5)),1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.3)),0.85,[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.3)),1.3)])])])]),100))))
&FUNC`PRECISIONMAXROLL #1215=Ceil(MUL(mul([u(#1215/Func`PrecisionMod,%0,%1)],.75),MUL(Add(1,mul([extract(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),1,1,|)],.1)),[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.8)),1.25,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.5)),1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.3)),0.85,[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.3)),1.3)])])])])))
&FUNC`POTENCYMINROLL #1215=Ceil(MUL([u(#1215/Func`PotencyMaxRoll,%0,%1)],ADD(0.45,fDIV(add([extract(u(%#/Dat`PrimaryStats),4,1,|)],[extract(u(%#/Dat`TranscendAttribs),4,1,|)]),100),fDIV(MUL([extract(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.8)),1.15,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.5)),1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.3)),0.85,[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.3)),1.25)])])])]),100))))
&FUNC`POTENCYMAXROLL #1215=Ceil(MUL(mul([u(#1215/Func`PotencyMod,%0,%1)],[switch([sqlite_query(Game, Select Rank From Templates where ID=[extract(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],E,3,D,4,C,5,B,6,A,7,S,8)]),Mul(ADD(1,MUL([extract(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)),[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.8)),1.15,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.5)),1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.3)),0.85,[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.5)),MUL([get(%#/Dat`PhysicalEnergy`Max)],0.3)),1.25)])])])])))
&FUNC`EFFICIENCYMOD #1215=ADD(MUL(MUL(MUL([extract(get([pmatch(%1)]/Dat`JutsuAttributes`%0),4,1,|)],IF(GTE(get(%#/Dat`PhysicalEnergy`Current),MUL(get(%#/Dat`PhysicalEnergy`Total),0.75)),1.25,IF(GTE(get(%#/Dat`PhysicalEnergy`Current),MULTIPLY(get(%#/Dat`PhysicalEnergy`Total),0.5)),1,0.75))),IF(hasattr(%#/Dat`TF),IF(match([sqlite_query(Game, Select Efficiency From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),.75,.25),1)),0.043),fdiv(add([extract(u(%#/Dat`PrimaryStats),6,1,|)],[extract(u(%#/Dat`TranscendAttribs),6,1,|)]),75))
&FUNC`FORMMOD #1215=CEIL(fDiv(ADD(MUL(add([extract(u(%#/Dat`TranscendAttribs),5,1,|)],[extract(u(%#/Dat`PrimaryStats),5,1,|)]),0.2),MUL(MUL(MUL([extract(get([pmatch(%1)]/Dat`JutsuAttributes`%0),3,1,|)],IF(GTE([get(%#/Dat`PhysicalEnergy`Current)],MUL([get(%#/Dat`PhysicalEnergy`Total)],0.75)),1.25,IF(GTE([get(%#/Dat`PhysicalEnergy`Current)],MUL([get(%#/Dat`PhysicalEnergy`Total)],0.5)),1,0.75))),IF(hasattr(%#/Dat`TF),IF(Match([sqlite_query(Game, Select Form From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.25,.75),1)),0.4)),-1))
&FUNC`EFFECTIVENESSMOD #1215=round(MUL(MUL(ADD([extract(u(%#/Dat`PrimaryStats),7,1,|)],[extract(u(%#/Dat`TranscendAttribs),7,1,|)]),0.01),MUL(MUL([extract(get([pmatch(%1)]/Dat`JutsuAttributes`%0),5,1,|)],IF(GTE(get(%#/Dat`SpiritualEnergy`Current),MUL(get(%#/Dat`SpiritualEnergy`Total),0.75)),1.25,IF(GTE(get(%#/Dat`SpiritualEnergy`Current),MUL(get(%#/Dat`SpiritualEnergy`Total),0.5)),1,0.75))),IF(match(extract(get(%#/Dat`TransformAttribs),5,1,|),Yes),1.5,1))),2)
&FUNC`ADAPTABILITYMOD #1215=round(ADD(MUL(.075,MUL(MUL(MUL([extract(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),6,1,|)],IF(GTE(get(%#/Dat`SpiritualEnergy`Current),MUL(get(%#/Dat`SpiritualEnergy`Total),0.75)),1.25,IF(GTE(get(%#/Dat`SpiritualEnergy`Current),MUL(get(%#/Dat`SpiritualEnergy`Total),0.5)),1,0.75))),IF(hasattr(%#/Dat`TF),IF(match([sqlite_query(Game, Select Adaptability From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.5,.75),1)),0.5)),MUL(ADD([extract(u(%#/Dat`PrimaryStats),8,1,|)],[extract(u(%#/Dat`TranscendAttribs),8,1,|)]),0.01)),2)
&FUNC`PENMOD #1215=IF(hasattr(%#/Dat`TF),IF(Match([sqlite_query(Game, Select Pen From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),[fdiv(75,100)],),0)
&FUNC`DRMOD #1215=IF(hasattr(%#/Dat`TF),IF(match([sqlite_query(Game, Select DR From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.5,),1)
&FUNC`PRECISIONMOD #1215=CEIL(Mul(MUL([extract(get(#254/Dat`JutsuRanks`Base),[switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,2,C,3,B,4,A,5,S,6)],1,|)],ADD(MUL(0.05,add([extract(get(%#/Dat`PrimaryStats),[switch([sqlite_query(Game, Select Category From Templates Where ID="[extract(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,2,Genjutsu,3)],1,|)],[extract(get(%#/Dat`TranscendAttribs),[switch([sqlite_query(Game, Select Category From Templates Where ID="[extract(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,2,Genjutsu,3)],1,|)])),1)),[if(match([sqlite_query(Game, Select Precision From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.2,1)]))
&FUNC`POTENCYMOD #1215=CEIL(MUL(MUL([extract(get(#254/Dat`JutsuRanks`Base),[switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,2,C,3,B,4,A,5,S,6)],1,|)],ADD(MUL(0.05,add([extract(u(%#/Dat`PrimaryStats),4,1,|)],[extract(u(%#/Dat`TranscendAttribs),4,1,|)])),1)),[if(match([sqlite_query(Game, Select Potency From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.2,1)]))
&FUNC`INSTRUCTXPCOST #1215=[floor(mul(add(sqlite_query(Game, Select XP From Templates Where ID="[extract(get(%0/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)]"),[switch([extract(get(%0/Dat`JutsuAttributes`[edit(%1,%b,-)]),14,1,|)],1,0,2,1000,3,3000,4,6000,5,10000,6,15000)]),[switch(1,[t(and([match(get(%#/Dat`AffinityList),sqlite_query(Game, Select Type From Templates Where ID="[extract(get(%0/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)]"),|)],[match(Ninjutsu|Nintaijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu,sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%0/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)]"),|)]))],[sub(.75,[if(match([regeditall(get(%#/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)],[if(hasattr(%0/Dat`Students),[if(match(get(%0/Dat`Students),%#),.1,0)],0)])],[t(and([match(get(%#/Dat`AffinityList),Yang,|)],[match(Taijutsu|Bukijutsu,sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%0/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)]"),|)]))],[sub(.75,[if(match([regeditall(get(%#/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)],[if(hasattr(%0/Dat`Students),[if(match(get(%0/Dat`Students),%#),.1,0)],0)])],[t(and([match(get(%#/Dat`AffinityList),Yin,|)],[match(Seals|Calligraphy,sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%0/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)]"),|)]))],[sub(.75,[if(match([regeditall(get(%#/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)],[if(hasattr(%0/Dat`Students),[if(match(get(%0/Dat`Students),%#),.1,0)],0)])],[t(match(get(%0/Dat`Students),%#))],.9,1)]))]
&FUNC`EXPERTSPECCOPY #1215=[and(eq([words([setinter([elements(Targeted Powerful Disrupt Flurry|Barrage Charge Feint DoT Absorb Drain Counter|Clash Barrier Reflection Block|Turtle Evade|Avoid, [iter([regeditall(get(%#/dat`ExpertiseList), %\^%[012%],)], [match(Targeted|Powerful|Disruption|Onslaught|Chakra Flow|Ambidexterity|Attrition|Chakra Absorption|Chakra Drain|Counter Offensive|Barrier|Reflection|Fortification|Evasive Maneuvers, ##, |)], |)],%b,|)], [edit(sqlite_query(Game, select Special from Templates where ID="[elements(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,|)]"),~,|)], |)],|)], [words([trim([sqlite_query(Game, select Special from Templates where ID="[elements(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,|)]")], r, ~)], ~)]),[if(match([sqlite_query(Game, select Type from Templates where ID="[elements(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,|)]")],Physical),1,[words(setinter([elements(Fire Water Wind Earth Lightning Yin Yang Combination, [iter([regeditall(get(%#/dat`ExpertiseList), %\^%[012%],)], [match(Nature Transformation: Fire|Nature Transformation: Water|Nature Transformation: Wind|Nature Transformation: Earth|Nature Transformation: Lightning|Nature Transformation: Yin|Nature Transformation: Yang|Combination Element: *, ##, |)], |)],%b,|)], [sqlite_query(Game, select Type from Templates where ID="[elements(get([pmatch(%1)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,|)]")], |),|)])])]
&CMD`RETRAINJUTSU #1215=$+Jutsu/retrain *:@break [member([get(%l/list`players)],%#)]={@pemit %#=%r%r[prompt(Game)] You cannot purchase things while in Order.%r};@assert gte(get(%#/Dat`KP),1)={};@assert hasattr(%#/Dat`JutsuAttributes`[edit(%0,%b,-)])={@pemit %#=[prompt(Game)] You do not possess the [caplist(%0,,,L)] jutsu.};@break match(get(%#/Dat`CopyList),extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),8,1,|),|)={[prompt(Game)] You cannot retrain a jutsu that is merely a copy.};@eval [iter(1|2|3|4|5|6,[set(%#,Dat`JutsuAttributes`[edit(%0,%b,-)]:[replace(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),##,1,|)])],|)];@set %#=Dat`JutsuAttributes`[edit(%0,%b,-)]:[replace(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),15,[switch([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),14,1,|)],1,0,2,4,3,8,4,13,5,18,6,24)],|)];@set %#=Dat`KP:[sub(get(%#/Dat`KP),1)] ;@pemit %#=[prompt(Game)] You have retrained the [caplist(%0,,,L)] jutsu, returning the appropriate amount of Mastery Points([switch([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),14,1,|)],1,0,2,4,3,8,4,13,5,18,6,24)]) for your Proficiency level. You have [get(%#/Dat`KP)] KP remaining
&CMD`FORGETJUTSU #1215=$+Jutsu/forget *:@assert hasattr(%#/Dat`JutsuAttributes`[edit(%0,%b,-)])={@pemit %#=[prompt(Game)] You do not possess the [caplist(%0,,,L)] jutsu.};@break match(get(%#/Dat`CopyList),extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),8,1,|),|)={[prompt(Game)] You cannot forget a jutsu that is merely a copy.};@set %#=Dat`XP:[add(get(%#/Dat`XP),[switch(extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),14,1,|),1,0,2,1000,3,3000,4,6000,5,10000,6,15000)],[floor(mul([sqlite_query(Game, Select XP From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],[sub(switch(1,and([match(get(%#/Dat`AffinityList),[sqlite_query(Game, Select Type From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],|)],[match(Ninjutsu|Nintaijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu,[sqlite_query(Game, Select Archetype From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],|)]),.75,and([match(get(%#/Dat`AffinityList),Yang,|)],[match(Taijutsu|Bukijutsu,[sqlite_query(Game, Select Archetype From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],|)]),.75,and([match(get(%#/Dat`AffinityList),Yin,|)],[match(Seals|Calligraphy,[sqlite_query(Game, Select Archetype From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],|)]),.75,1),[if(match([regeditall(get(%#/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)])]))])]; @pemit %#=[prompt(Game)] You have forgotten the [caplist(%0,,,L)] jutsu, recovering [add([switch(extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),14,1,|),1,0,2,1000,3,3000,4,6000,5,10000,6,15000)],[floor(mul([sqlite_query(Game, Select XP From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],[switch(1,and([match(get(%#/Dat`AffinityList),[sqlite_query(Game, Select Type From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],|)],[match(Ninjutsu|Nintaijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu,[sqlite_query(Game, Select Archetype From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],|)]),.75,and([match(get(%#/Dat`AffinityList),Yang,|)],[match(Taijutsu|Bukijutsu,[sqlite_query(Game, Select Archetype From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],|)]),.75,and([match(get(%#/Dat`AffinityList),Yin,|)],[match(Seals|Calligraphy,[sqlite_query(Game, Select Archetype From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],|)]),.75,1)]))])] XP and removing the jutsu from your character. ; @set %#=Dat`JutsuAttributes`[edit(%0,%b,-)]:
&CMD`FORGETTF #1215=$+TF/forget *:@assert match(get(%#/Dat`TFList),%0,|)={@pemit %#=[prompt(Game)] You do not possess the [caplist(%0,,,L)] Transformation.};@set %#=Dat`XP:[add(get(%#/Dat`XP),10000)]; @pemit %#=[prompt(Game)] You have forgotten the [caplist(%0,,,L)] Transformation, recovering 10000 XP and removing the Transformation from your character. ; @set %#=Dat`TFList:[remove(get(%#/Dat`TFlist),[grab(get(%#/Dat`TFList),%0,|)],|)]
&CMD`RETAIN #1215=$+Retain *:@assert match(get(%#/Dat`TFList),Sharingan)={[prompt(Game)] You are not capable of retaining copied jutsu.};@assert hasattr(%#/Dat`CopiedJutsu`[edit(%0,%b,-)])={[prompt(Game)] You do not have the [caplist(%0,,,L)] jutsu copied.};@assert gte(get(%#/Dat`XP),[add(sqlite_query(Game, Select XP From Templates Where ID="[extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),7,1,|)]"),[switch([extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),14,1,|)],1,0,2,1000,3,3000,4,6000,5,10000,6,15000)])])={[prompt(Game)] You do not have enough XP([add(sqlite_query(Game, Select XP From Templates Where ID="[extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),7,1,|)]"),[switch([extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),14,1,|)],1,0,2,1000,3,3000,4,6000,5,10000,6,15000)])]) to retain the [caplist(%0,,,L)] jutsu.};@assert gte(get(%#/Dat`KP),[max(sub(switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),7,1,|)]")],E,2,D,3,C,4,B,6,A,7,S,8),[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])={[prompt(Game)] You do not have enough KP%([max(sub(switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),7,1,|)]")],E,2,D,3,C,4,B,6,A,7,S,8),[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)]%) to retain the [caplist(%0,,,L)] jutsu.};@set %#=Dat`XP:[sub(get(%#/Dat`XP),[add(sqlite_query(Game, Select XP From Templates Where ID="[extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),7,1,|)]"),[switch([extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),14,1,|)],1,0,2,1000,3,3000,4,6000,5,10000,6,15000)])])]; @set %#=Dat`KP:[sub(get(%#/Dat`KP),[max(sub(switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),7,1,|)]")],E,2,D,3,C,4,B,6,A,7,S,8),[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])] ;@pemit %#=[prompt(Game)] You have chosen to retain the [caplist(%0,,,L)] jutsu for [add(sqlite_query(Game, Select XP From Templates Where ID="[extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),7,1,|)]"),[switch([extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),14,1,|)],1,0,2,1000,3,3000,4,6000,5,10000,6,15000)])] XP and [max(sub(switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),7,1,|)]")],E,2,D,3,C,4,B,6,A,7,S,8),[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)] KP[if([match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],%b%(Elite Tradition%),)]. You have [get(%#/Dat`XP)] XP and [get(%#/Dat`KP)] KP remaining. ; @cemit monitor-app=[prompt(Game)] %N has chosen to retain the [caplist(%0,,,L)] jutsu for [add(sqlite_query(Game, Select XP From Templates Where ID="[extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),7,1,|)]"),[switch([extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),14,1,|)],1,0,2,1000,3,3000,4,6000,5,10000,6,15000)])] XP and [max(sub(switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)]),7,1,|)]")],E,2,D,3,C,4,B,6,A,7,S,8),[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)] KP[if([match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],%b%(Elite Tradition%),)]. ; @set %#=Dat`JutsuAttributes`[edit(%0,%b,-)]:[get(%#/Dat`CopiedJutsu`[edit(%0,%b,-)])]; @set %#=Dat`CopiedJutsu`[edit(%0,%b,-)]:
&CMD`TFAPPCREATE #1215=$+app/tf Create:@set %#=Dat`TFCreate:No|No|No|No|No|No|No|No|No|No|No|No||None|||5 ; @pemit %#=[prompt(Game)] You have initialized the creation of a Transformation.
&CMD`TFAPPDENIAL #1215=$+staff/TF Deny=*:@assert slabs(%#,staff-skill)={@pemit %#=[Prompt(System)] You are not permitted to use this command.};@assert match(get(#1215/List`TFapps),[pmatch(%0)],|)={@pemit %#=[prompt(Staff)] There is not a TF App for [name(*%0)].};@set [pmatch(%0)]=dat`TFApproval:;@set #1215=List`TFApps:[remove([get(#1215/List`TFApps)],[pmatch(%0)],|)];@cemit Monitor-App=[prompt(Staff)] [name(%#)] has just denied [name(*%0)]'s TF App. The player should immediately be given a reason for this and what must be done to resolve the situation via @mails and pages if they are available.; @sudo [pmatch(NML-Bot)]=@mail %0/TF App Denied=[Prompt(Game)] Your current Transformation Application for [extract(get([pmatch(%0)]/Dat`TFCreate),1,1,|)] has been denied. You should be contact shortly as to why and how to resolve the issue. If you have not been reached within a few hours, please send a +request or contact staff members to ask what is going on so that the issue may be resolved quickly. When it is resolved, please feel free to submit a new Transformation.
&CMD`SPECSLOTEXPANSION #1215=$+buy/slot specialty:@break [match([get(%l/list`players)], %#)]={@pemit %#=[prompt(game)] You cannot purchase things while in Order.}; @assert [gt(8, [elements([get(%#/dat`SlotExpansion)], 1, |)])]={@pemit %#=[prompt(Game)] You have already purchased the maximum number of specialty slots.}; @assert [gte([get(%#/dat`KP)], 10)]={@pemit %#=[prompt(Game)] You do not have enough KP to purchase an extra Specialty slot.}; @assert [gte([get(%#/dat`XP)], 6500)]={@pemit %#=[prompt(game)] You do not have enough XP to purchase an extra Specialty Slot.}; @set %#=dat`kp:[sub([get(%#/dat`Kp)], 10)]; @set %#=dat`XP:[sub([get(%#/dat`XP)], 6500)]; @set %#=dat`SpecialtySlots:[inc([get(%#/dat`SpecialtySlots)])]; @set %#=dat`slotexpansion:[replace([get(%#/dat`slotexpansion)], 1, [inc([elements([get(%#/dat`slotexpansion)], 1, |)])], |)]; @pemit %#=[prompt(Game)] You have purchased a Specialty Slot Expansion upgrade for your character! You have received an extra Specialty Slot for 6500 XP and 10KP. You have [sub(8, [elements([get(%#/dat`SlotExpansion)], 1, |)])] slots remaining to purchase.; @cemit Monitor-App=[ansi(hm, %N)] has purchased an extra Specialty Slot for [ansi(hy, 6500)] XP and [ansi(hy, 10)] KP. %S has [sub(8, [elements([get(%#/dat`SlotExpansion)], 1, |)])] Slots remaining.
&CMD`EXPERTSLOTEXPANSION #1215=$+buy/slot expertise:@break [match([get(%l/list`players)], %#)]={@pemit %#=[prompt(game)] You cannot purchase things while in Order.}; @assert [gt(4, [elements([get(%#/dat`SlotExpansion)], 2, |)])]={@pemit %#=[prompt(Game)] You have already purchased the maximum number of expertise slots.}; @assert [gte([get(%#/dat`KP)], 10)]={@pemit %#=[prompt(Game)] You do not have enough KP to purchase an extra Expertise slot.}; @assert [gte([get(%#/dat`XP)], 6500)]={@pemit %#=[prompt(game)] You do not have enough XP to purchase an extra Expertise Slot.}; @set %#=dat`kp:[sub([get(%#/dat`Kp)], 10)]; @set %#=dat`XP:[sub([get(%#/dat`XP)], 6500)]; @set %#=dat`ExpertiseSlots:[inc([get(%#/dat`ExpertiseSlots)])]; @set %#=dat`slotexpansion:[replace([get(%#/dat`slotexpansion)], 2, [inc([elements([get(%#/dat`slotexpansion)], 2, |)])], |)]; @pemit %#=[prompt(Game)] You have purchased a Expertise Slot Expansion upgrade for your character! You have received an extra Expertise Slot for 6500 XP and 10KP. You have [sub(4, [elements([get(%#/dat`SlotExpansion)], 2, |)])] slots remaining to purchase.; @cemit Monitor-App=[ansi(hm, %N)] has purchased an extra Expertise Slot for [ansi(hy, 6500)] XP and [ansi(hy, 10)] KP. %S has [sub(4, [elements([get(%#/dat`SlotExpansion)], 2, |)])] Slots remaining.
&CMD`TFRANK #1215=$+TFRank *:@assert match(get(%#/Dat`TFList),%0,|)={@pemit %#=[prompt(Game)] You do not possess the [caplist(%0,,,l)] Transformation.};@assert lt(get(%#/Dat`TFRank`[edit(%0,%b,-)]),3)={@pemit %#=[prompt(Game)] Your [caplist(%0,,,L)] Transformation is already at the maximum rank([get(%#/Dat`TFRank`[edit(%0,%b,-)])]).};@assert and([gte(get(%#/Dat`XP),2500)],[gte(get(%#/Dat`KP),[max(sub(10,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])],[gte([sqlite_query(Game, select LP from Accounts where Email='[get(%#/dat`account)]')],5)])={@pemit %#=[prompt(Game)] You do not have enough XP, KP, or LP to purchase a TF Rank increase.};@eval [set(%#,Dat`XP:[sub(get(%#/Dat`XP),2500)])][set(%#,Dat`KP:[sub(get(%#/Dat`KP),[max(sub(10,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)])])][sqlite_query(Game, update Accounts set LP=[sub([sqlite_query(Game, select LP from Accounts where Email='[get(%#/dat`account)]')],5)] where Email='[get(%#/dat`account)]')][if(gte(get(%#/Dat`TFRank`[edit(%0,%b,-)]),1),[set(%#,Dat`TFRank`[edit(%0,%b,-)]:[replace(get(%#/Dat`TFRANK`[edit(%0,%b,-)]),1,[add(get(%#/Dat`TFRank`[edit(%0,%b,-)]),1)])])],[set(%#,Dat`TFRank`[edit(%0,%b,-)]:1)])];@pemit %#=[prompt(Game)] You have increased your [caplist(%0,,,L)] Transformation to Rank [get(%#/Dat`TFRank`[edit(%0,%b,-)])] for 2500 XP, [max(sub(10,[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Elite Tradition*,|)],1,|),^,1)]),1)] KP, and 5 LP!
&SECS_#2261 #1215=1525056881
&SECS_#662 #1215=1524423306
&FN`JUTSUXPCOST #1215=[floor(mul(round(mul([extract(get(#254/dat`JutsuRanks`costs),[match(get(#254/Dat`JutsuRanks),elementsmux([get(%0/dat`jutsuapp)], 9, |),|)],1,|)],add(1,mul([words([extract(get(%0/dat`jutsuapp),7,1,|)],~)],.2),[if(match([elementsmux([get(%0/dat`jutsuapp)], 9, |)],All,|),.34,[if(gte(words([elementsmux([get(%0/dat`jutsuapp)], 9, |)],|),1),[round(mul(words([elementsmux([get(%0/dat`jutsuapp)], 9, |)]),.08),2)],0)])])),-1),[sub(switch(1,[and([match(get(%0/Dat`AffinityList),[extract(get(%0/dat`jutsuapp),5,1,|)],|)],[match(Ninjutsu|Nintaijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu,[extract(get(%0/dat`jutsuapp),4,1,|)],|)])],.75,[and([match(get(%0/Dat`AffinityList),Yang,|)],[match(Taijutsu|Bukijutsu,[extract(get(%0/dat`jutsuapp),4,1,|)],|)])],.75,[and([match(get(%0/Dat`AffinityList),Yin,|)],[match(Seals|Calligraphy,[extract(get(%0/dat`jutsuapp),4,1,|)],|)])],.75,1),[if(match([regeditall(get(%0/dat`ExpertiseList), %\^%[012%],)],Elite Tradition,|),.05,0)])]))]
&FN`JUTSUAPCOST #1215=[if(match(Attack|Heal,[extract(get(%0/dat`jutsuapp),6,1,|)],|),extract(get(#254/Dat`[extract(get(%0/dat`jutsuapp),3,1,|)]`AP),[match(get(#254/dat`JutsuRanks),[elementsmux([get(%0/dat`jutsuapp)], 9, |)],|)],1,|),0)]
&FN`JUTSUSTAMINACOST #1215=[ceil(mul(extract(get(#254/Dat`[edit(extract(get(%0/dat`jutsuapp),4,1,|),%b,-)]`Stamina),[match(get(#254/dat`JutsuRanks),[elementsmux([get(%0/dat`jutsuapp)], 9, |)],|)],1,|),add(1,mul([words([extract(get(%0/dat`jutsuapp),7,1,|)],~)],.1),[if(match([elementsmux([get(%0/dat`jutsuapp)], 9, |)],All,|),.34,[if(gte(words([elementsmux([get(%0/dat`jutsuapp)], 9, |)],|),1),[round(mul(words([elementsmux([get(%0/dat`jutsuapp)], 9, |)]),.08),2)],0)])])))]
&FN`JUTSUCHAKRACOST #1215=[ceil(mul(extract(get(#254/Dat`[edit(extract(get(%0/dat`jutsuapp),4,1,|),%b,-)]`Chakra),[match(get(#254/dat`JutsuRanks),[elementsmux([get(%0/dat`jutsuapp)], 9, |)],|)],1,|),add(1,mul([words([extract(get(%0/dat`jutsuapp),7,1,|)],~)],.1),[if(match([elementsmux([get(%0/dat`jutsuapp)], 9, |)],All,^),.34,[if(gte(words([elementsmux([get(%0/dat`jutsuapp)], 9, |)],|),1),[round(mul(words([elementsmux([get(%0/dat`jutsuapp)], 9, |)]),.08),2)],0)])])))]

&FUNC`CATEXPERT #1215=[ladd([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),1,6,|)]|[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),15,1,|)]|[u(#1215/Func`CatExpertSort,%0)],|)]
&FUNC`CATEXPERTSORT #1215=[if(match([sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu),[if(match(get(%#/Dat`ExpertiseList),Martial Arts*,|),[switch([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Martial Arts*,|)],1,|),^)],0,0,1,6,2,12)])])][if(match([sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Chakra Flow Taijutsu),[if(match(get(%#/Dat`ExpertiseList),Martial Arts*,|),[switch([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Martial Arts*,|)],1,|),^)],0,0,1,6,2,12)])])][if(match([sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Bukijutsu),[if(match(get(%#/Dat`ExpertiseList),Armament*,|),[switch([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Armament*,|)],1,|),^)],0,0,1,6,2,12)])])][if(match([sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Chakra Flow Bukijutsu),[if(match(get(%#/Dat`ExpertiseList),Armament*,|),[switch([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Armament*,|)],1,|),^)],0,0,1,6,2,12)])])][if(match([sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Seal),[if(match(get(%#/Dat`ExpertiseList),Seal Manifestation*,|),[switch([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Seal Manifestation*,|)],1,|),^)],0,0,1,6,2,12)])])][if(match([sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Calligraphy),[if(match(get(%#/Dat`ExpertiseList),Calligraphy Conjuration*,|),[switch([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Calligraphy Conjuration*,|)],1,|),^)],0,0,1,6,2,12)])])][if(match([sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Combination),[if(match(get(%#/Dat`ExpertiseList),Combination Element:*,|),[switch([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Combination Element:*,|)],1,|),^)],0,0,1,6,2,12)])])][if(match([sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Ninjutsu),[if(match(get(%#/Dat`ExpertiseList),Nature Transformation: [extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),10,1,|)]*,|),[switch([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Nature Transformation: [extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),10,1,|)]*,|)],1,|),^)],0,0,1,6,2,12)])])][if(match([sqlite_query(Game, Select Archetype From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Nintaijutsu),[if(or(match(get(%#/Dat`ExpertiseList),Martial Arts*,|),match(get(%#/Dat`ExpertiseList),Nature Transformation: [extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),10,1,|)]*,|)),[switch(if(gte([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Martial Arts*,|)],1,|),^)],[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Nature Transformation: [extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),10,1,|)]*,|)],1,|),^)]),[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Martial Arts*,|)],1,|),^)],[after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Nature Transformation: [extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),10,1,|)]*,|)],1,|),^)]),0,0,1,6,2,12)])])]
&FUNC`JUTSUAPPFIELDS #1215=[printf($^78:[ansi(hb, -=)]:s, %[ [ansi(hw, %N's Jutsu App)] %])]%r[printf($18-&s $18&s $1&s $18-&s $18&s,[ansi(hc, Prefix, n, :, hc, %rAccess, n, :, hc, %rCategory, n, :, hc, %rMethod, n, :, hc, %rRank, n, :, hc, )], [edit([elementsmux([get(#1215/jutsuapps`%#)], 12 2 3 6 9, |)], |, %r)], |%r|%r|%r|%r|, [ansi(hc, Name, n, :, hc, %rAlt Name %(Jap%), n, :, hc, %rArchetype, n, :, hc, %rType, n, :, hc, %rRange, n, :, hc, )], [edit([elementsmux([get(#1215/jutsuapps`%#)], 1 11 4 5 8, |)], |, %r)])]%r%r[printf($-78|"s, [ansi(hc, Special Actions)]: [elist([trim([elementsmux([get(#1215/jutsuapps`%#)], 7, |)], r, ~)],,~,,,[ansi(y, %0)])])]%r%r[ansi(hc, Description)]: [elementsmux([get(#1215/jutsuapps`%#)], 10, |)]%r%r[ansi(hc, Notes)]: [elementsmux([get(#1215/jutsuapps`%#)], 13, |)]%r[printf($^78:-:s, %[ Resource Data %])]%r[printf($18-&s $18&s $1&s $18-&s $18&s, [ansi(hc, Creator, n, :, hc, %rXP, n, :, hc, %rKP, n, :)],%N%r[u(#1215/fn`jutsuXPCost, %#)]%r[switch([elementsmux([get(#1215/JutsuApps`%#)], 9, |)], E, 2, D, 3, C, 4, B, 6, A, 7, S, 8)],|%r|%r|, [ansi(hc, Stamina, n, :, hc, %rChakra, n, :, hc, %rAP, n, :)], [u(#1215/fn`jutsuStaminaCost, %#)]%r[u(#1215/fn`jutsuChakraCost, %#)]%r[u(#1215/fn`jutsuAPCost, %#)])]%r[printf($^78:[ansi(hb, -=)]:s, %[ [ansi(hw, End Jutsu App)] %])]

&CMD`JUTSUAPP-VIEW #1215=$+app/jutsu:@pemit %#=[u(#1215/func`Jutsu-View)]
&FUNC`JUTSU-VIEW #1215=[printf($^78:[ansi(hb, -=)]:s, %[ [ansi(hw, %N's Jutsu App)] %])]%r[printf($18-&s $18&s $1&s $18-&s $18&s,[ansi(hc, Prefix, n, :, hc, %rAccess, n, :, hc, %rCategory, n, :, hc, %rMethod, n, :, hc, %rRank, n, :, hc, )], [edit([elementsmux([get(%#/dat`JutsuApp)], 12 2 3 6 9, |)], |, %r)], |%r|%r|%r|%r|, [ansi(hc, Name, n, :, hc, %rAlt Name %(Jap%), n, :, hc, %rArchetype, n, :, hc, %rType, n, :, hc, %rRange, n, :, hc, )], [edit([elementsmux([get(%#/dat`JutsuApp)], 1 11 4 5 8, |)], |, %r)])]%r%r[printf($-78|"s, [ansi(hc, Special Actions)]: [elist([trim([elementsmux([get(%#/dat`JutsuApp)], 7, |)], r, ~)],,~,,,[ansi(y, %0)])])]%r%r[ansi(hc, Description)]: [elementsmux([get(%#/dat`JutsuApp)], 10, |)]%r%r[ansi(hc, Notes)]: [elementsmux([get(%#/dat`JutsuApp)], 13, |)]%r[printf($^78:-:s, %[ Resource Data %])]%r[printf($18-&s $18&s $1&s $18-&s $18&s, [ansi(hc, Creator, n, :, hc, %rXP, n, :, hc, %rKP, n, :)],%N%r[u(fn`jutsuXPCost, %#)]%r[u(fn`jutsuKPCost, %#)],|%r|%r|, [ansi(hc, Stamina, n, :, hc, %rChakra, n, :, hc, %rAP, n, :)], [u(fn`jutsuStaminaCost, %#)]%r[u(fn`jutsuChakraCost, %#)]%r[u(fn`jutsuAPCost, %#)])]%r[printf($^78:[ansi(hb, -=)]:s, %[ [ansi(hw, End Jutsu App)] %])]
&LIST`JUTSU-APPFIELDS #1215=Name|Access|Cat|Category|Archetype|Arche|Type|Method|Range|Rank|Desc|Description|Alt|Alt Name|Prefix|Notes|Spec|Special|Special Action|SpecialAction
&LIST`JUTSU-APPFUNCS #1215=Name|Access|Category|Category|Archetype|Archetype|Type|Method|Range|Rank|Desc|Desc|Alt|Alt|Prefix|Notes|SpecAdd|SpecAdd|SpecAdd|SpecAdd
&LIST`ACCESS #1215=General Clan Hiden
&LIST`CATEGORY #1215=Taijutsu Ninjutsu
&FN`NAME #1215=@assert [lte([strlen([regeditall(%0, %[\!?$\^\*#\@\.\,\/%],)])], 22)]={@pemit %#=[prompt(app)] Your Jutsu's name is too long. It must be less than 22 characters long, and it is currently [ansi(r, [strlen([regeditall(%0, %[\!?$\^\*#\@\.\,\/%],)])])].}; @break [hasattr(%#/dat`JutsuAttributes`[edit(%0, %b, -)])]={@pemit %#=[prompt(app)] You already have a jutsu by that name.}; @set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuapp)], 1, [regeditall(%0, %[\!?$\^\*#\@\.\,\/%],)], |)]; @pemit %#=[prompt(app)] You have set [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] to be your Jutsu's name.
&FN`ACCESS #1215=@assert match([v(list`access)], %0)={@pemit %#=[prompt(App)] [ansi(hy, %0)] is not a proper Access selection try [elist([v(list`access)], or,,,,[ansi(y, %0)])] instead.}; @break [and([strmatch(%0, clan)], [strmatch([get(%#/dat`clan)], None)])]={@pemit %#=[prompt(app)] You do not have a Clan. Please select [elist(General Hiden, or,,,,[ansi(y, %0)])] instead.}; @set %#=dat`jutsuapp:[replace(get(%#/dat`jutsuapp),2,[if([strmatch(%0, clan)], [get(%#/dat`clan)], [grab([v(list`access)], %0)])],|)]; @pemit %#=[prompt(App)] The Access selection of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu is now [ansi(y, [elementsmux([get(%#/dat`jutsuapp)], 2, |)])].
&FN`CATEGORY #1215=@assert [t([setr(0, [grab([v(list`category)], %0)])])]={@pemit %#=[prompt(app)] Please select either [elist([v(list`category)],or,,,,[ansi(y, %0)])].}; @assert [lor([iter([v(list`cat-%q0)], [match([get(%#/dat`expertiseList)], ##*, |)], |)])]={@pemit %#=[prompt(app)] Your current specialties do not allow for you to use jutsu in the [ansi(y, [capstr([lcstr(%0)])])] Category.}; @set %#=dat`jutsuApp:[replace([get(%#/dat`JutsuApp)], 4 5 7,,|)]; @set %#=dat`JutsuApp:[replace([get(%#/dat`JutsuApp)], 3, [capstr([lcstr(%0)])], |)]; @pemit %#=[prompt(App)] The Category of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu is now [ansi(y, [elementsmux([get(%#/dat`jutsuapp)], 3, |)])].
&LIST`CAT-TAIJUTSU #1215=Martial Arts|Armament
&LIST`CAT-NINJUTSU #1215=Nature Transformation:|Combination Element:|Seal Manifestation|Calligraphy Conjuration
&LIST`ARCHETYPES #1215=Taijutsu|Bukijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu|Ninjutsu|Seals|Calligraphy|Nintaijutsu|Combination|Tota
&LIST`ARCHETYPES`TAIJUTSU #1215=Taijutsu|Bukijutsu|Chakra Flow Taijutsu|Chakra Flow Bukijutsu
&LIST`ARCHETYPES`NINJUTSU #1215=Ninjutsu|Combination|Seals|Calligraphy|Nintaijutsu
&LIST`ARCHETYPES`GENJUTSU #1215=Genjutsu|GenTaijutsu|GenBukijutsu
&CHK`ARCHETYPE #1215=[switch(%0,Taijutsu,[match(get(%#/Dat`ExpertiseList),Martial Arts*,|)],Ninjutsu,[match(get(%#/Dat`ExpertiseList),Nature Transformation:*,|)],Combination,[match(get(%#/Dat`ExpertiseList),Combination Element:*,|)],Genjutsu,[match(get(%#/Dat`ExpertiseList),Illusionary Tactics*,|)],Bukijutsu,[match(get(%#/Dat`ExpertiseList),Armament*,|)],Chakra Flow Taijutsu,[and([match(get(%#/Dat`ExpertiseList),Martial Arts*,|)],[match(get(%#/Dat`ExpertiseList),Chakra Flow*,|)])],Chakra Flow Bukijutsu,[and([match(get(%#/Dat`ExpertiseList),Armament*,|)],[match(get(%#/Dat`ExpertiseList),Chakra Flow*,|)])],Seals,[match(get(%#/Dat`ExpertiseList),Seal Manifestation*,|)],Calligraphy,[match(get(%#/Dat`ExpertiseList),Calligraphy Conjuration*,|)],Nintaijutsu,[and(or(match(get(%#/Dat`ExpertiseList),Nature Transformation:*,|),match(get(%#/Dat`ExpertiseList),Combination Element:*,|)),[match(get(%#/Dat`ExpertiseList),Martial Arts*,|)])],Gentaijutsu,[and(match(get(%#/Dat`ExpertiseList),Illusionary Tactics*,|),[match(get(%#/Dat`ExpertiseList),Martial Arts*,|)])],Genbukijutsu,[and(match(get(%#/Dat`ExpertiseList),Illusionary Tactics*,|),[match(get(%#/Dat`ExpertiseList),Armament*,|)])],0)]
&FN`ARCHETYPE #1215=@assert [t([setr(0, [elementsmux([get(%#/dat`jutsuapp)], 3, |)])])]={@pemit %#=[prompt(app)] You must select a category for your jutsu with [ansi(hg, +app/jutsu Category=, hr, <Category>)] first.}; @assert [t([setr(1, [grab([v(list`archetypes)], %0, |)])])]={@pemit %#=[prompt(app)] [ansi(y, %0)] is not a valid Archetype. Try [elist([v(list`archetypes)],or,|,,,[ansi(y, %0)])].}; @assert [match([v(list`archetypes`%q0)], %0, |)]={@pemit %#=[prompt(app)] [ansi(y, %q1)] is not an appropriate Archetype for your current Category. Please choose from [elist([v(list`archetypes`%q0)],or,|,,,[ansi(y, %0)])]}; @assert [u(chk`archetype, %q1)]={@pemit %#=[prompt(app)] Your specialties do not allow for the [ansi(y, %q1)] Archetype to be applied.}; @set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuApp)], 4, %q1, |)]; @set %#=dat`jutsuApp:[replace([get(%#/dat`JutsuApp)], 5 7,,|)]; @pemit %#=[prompt(App)] The Archetype of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu is now [ansi(y, [elementsmux([get(%#/dat`jutsuapp)], 4, |)])].
&FN`TYPE #1215=@assert [t([setr(0, [elementsmux([get(%#/dat`jutsuapp)], 4, |)])])]={@pemit %#=[prompt(app)] You must select an Archetype for your jutsu with [ansi(hg, +app/jutsu Archetype=, hr, <Archetype>)] first.}; @assert [t([setr(0, [grab([v(List`types)], %0)])])]={@pemit %#=[prompt(app)] Please choose a valid type: [elist([v(List`types)], or,,,,[ansi(y, %0)])].};@assert [match([v(list`type`[edit([elementsmux([get(%#/dat`jutsuapp)], 4, |)], %b, -)])], %q0)]={@pemit %#=[prompt(app)] Please choose a valid type for the given category. [elist([v(list`type`[edit([elementsmux([get(%#/dat`jutsuapp)], 4, |)], %b, -)])], or,,,, [ansi(y, %0)])]}; @break [or([and([match([v(list`type-elements)], %q0)], [!match([get(%#/dat`expertiseList)], Nature*%q0*, |)])], [and([match([v(list`type-combo)], %q0)], [!match([get(%#/dat`expertiseList)], %q0 Element:*, |)])])]={@pemit %#=[prompt(app)] You do not have the required specialty to make this jutsu [ansi(y, %q0)] Type.}; @set %#=dat`JutsuApp:[replace(get(%#/dat`jutsuapp),5,%q0,|)]; @pemit %#=[prompt(App)] The Type of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu is now [ansi(y, [elementsmux([get(%#/dat`jutsuapp)], 5, |)])].
&LIST`TYPES #1215=Physical Yin Yang Fire Wind Earth Water Lightning Combination Tota
&LIST`TYPE`TAIJUTSU #1215=Physical
&LIST`TYPE`BUKIJUTSU #1215=Physical
&LIST`TYPE`CHAKRA-FLOW-TAIJUTSU #1215=Physical Yin Yang Fire Earth Water Lightning Wind
&LIST`TYPE`CHAKRA-FLOW-BUKIJUTSU #1215=Physical Yin Yang Fire Earth Water Lightning Wind
&LIST`TYPE`NINJUTSU #1215=Physical Yin Yang Fire Earth Water Lightning Wind
&LIST`TYPE`SEALS #1215=Yin Yang Fire Earth Water Lightning Wind
&LIST`TYPE`CALLIGRAPHY #1215=Physical Yin Yang Fire Earth Water Lightning Wind
&LIST`TYPE`NINTAIJUTSU #1215=Yin Yang Fire Earth Water Lightning Wind Combination Tota
&LIST`TYPE`COMBINATION #1215=Combination
&LIST`TYPE`TOTA #1215=Tota
&LIST`TYPE-ELEMENTS #1215=Fire Water Lightning Yin Yang Earth Wind
&LIST`TYPE-COMBO #1215=Combination Tota
&FN`METHOD #1215=@assert [t([setr(0, [grab(Attack Defend,%0)])])]={@pemit %#=[prompt(app)] Please select either [elist(Attack Defend, or,,,,[ansi(y, %0)])] as a valid Method.}; @set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuapp)], 6, %q0, |)]; @pemit %#=[prompt(App)] The Method of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu is now [ansi(y, [elementsmux([get(%#/dat`jutsuapp)], 6, |)])].
&LIST`RANGES #1215=Melee Short Medium Long
&FN`RANGE #1215=@assert [xor([match(%0, All)], [t([setr(0, [listinter([v(list`ranges)], [caplist(%0,,,l)])])])])]={@pemit %#=[prompt(app)] Please make sure you have valid ranges listed. You can select any combination of: [elist([v(list`ranges)], or,,,,[ansi(y, %0)])]. If you want all ranges, type [ansi(y, All)].}; @set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuapp)], 8, [if([t(%q0)], %q0, All)], |)]; @pemit %#=[prompt(App)] The Range of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu is now [ansi(y, [elementsmux([get(%#/dat`jutsuapp)], 8, |)])].
&FN`RANK #1215=@assert [match([u(#244/dat`ranks)], %0, |)]={@pemit %#=[prompt(app)] That is not a valid rank. Please select [elist([u(#244/dat`ranks)], or, |,,,[ansi(y, %0)])].}; @set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuapp)], 9, [ucstr(%0)], |)]; @pemit %#=[prompt(App)] The Rank of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu is now [ansi(y, [elementsmux([get(%#/dat`jutsuapp)], 9, |)])].
&FN`DESC #1215=@set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuapp)], 10, [securex(%0, %(%);%%%,)], |)]; @pemit %#=[prompt(App)] The Desc of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu is now: [ansi(c, [elementsmux([get(%#/dat`jutsuapp)], 10, |)])]
&FN`ALT #1215=@set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuapp)], 11, [securex(%0, %(%);%%%,)], |)]; @pemit %#=[prompt(App)] The Alternative Japanese Name of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu is now [ansi(y, [elementsmux([get(%#/dat`jutsuapp)], 11, |)])].
&FN`PREFIX #1215=@set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuapp)], 12, [securex([trim(%0,,:)], %(%);%%%,)]:, |)]; @pemit %#=[prompt(App)] The Prefix of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu is now [ansi(y, [elementsmux([get(%#/dat`jutsuapp)], 12, |)])]. Please be sure that the Prefix you have chosen is appropriate for the jutsu and your character's capabilities.
&FN`NOTES #1215=@set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuapp)], 13, [securex(%0, %(%);%%%,)], |)]; @pemit %#=[prompt(App)] The Notes of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu are now [ansi(c, [elementsmux([get(%#/dat`jutsuapp)], 13, |)])]
&LIST`SPECS`ATTACK #1215=Targeted|Powerful|Disrupt|Flurry|Barrage|Charge|Feint|DoT|Absorb|Drain|Counter|Clash|Collab
&LIST`SPECS`DEFEND #1215=Turtle|Barrier|Reflection|Block|Evade|Avoid
&FN`SPECADD #1215=@assert [t([elementsmux([get(%#/dat`jutsuapp)], 6, |)])]={@pemit %#=[prompt(app)] Please select a Method using [formathelp({+app/jutsu Method=<Attack|Defend>})]}; @eval [iter([secure(%0)], [if([strmatch(##, !*)], [setq(2, [r(2)] [grab([v(list`specs`[elementsmux([get(%#/dat`jutsuapp)], 6, |)])], [after(##, !)], |)])], [setq(1, [r(1)] [grab([v(list`specs`[elementsmux([get(%#/dat`jutsuapp)], 6, |)])], ##, |)])])])]; @assert [t(%q1 %q2)]={@pemit %#=[prompt(app)] Please select valid Special Actions. Possible selections (disregarding your specialties): [elist([setdiff([v(list`specs`[edit([elementsmux([get(%#/dat`jutsuapp)], 4, |)], %b, -)])], [v(list`specs`[elementsmux([get(%#/dat`jutsuapp)], 6, |)])])], or,|,,,[ansi(y, %0)])].}; @assert [land([iter(%q1, [if([match([get(%#/dat`expertiseList)], [v(list`specs`##)]*, |)],1, 0[setq(4, %q4 ##)])])])]={@pemit %#=[prompt(app)] You do not have the specialties to apply the following special actions: %q4}; @assert [lor([iter(%q1, [if([match([u(#1215/list`specs`[edit([elementsmux([get(%#/dat`jutsuapp)], 4, |)], %b, -)])], ##, |)],1,0[setq(5, %q5 ##)])])])]={@pemit %#=[prompt(Game)] You do not have the proper Archetype for the %q5 Special Action(s).}; @break [and([strmatch([elementsmux([get(%#/dat`jutsuapp)], 4, |)], Seals)], [gt([words([setr(3, [setunion([setdiff([elementsmux([get(%#/dat`jutsuapp)], 7, |)], [edit([trim(%q2,,%b)], %b, ~)], ~)], [edit([trim(%q1,,%b)], %b, ~)], ~)])], ~)], 1)])]={@pemit %#=[prompt(app)] A jutsu with the Seal Archetype may only have one Special Action.}; @set %#=dat`jutsuapp:[replace([get(%#/dat`jutsuapp)], 7, %q3, |)]; @pemit %#=[prompt(App)] The Special Actions of the [ansi(0xd0, [elementsmux([get(%#/dat`jutsuapp)], 1, |)])] jutsu are now: [elist([elementsmux([get(%#/dat`jutsuapp)], 7, |)], and,~,,,[ansi(y, %0)])].
&LIST`SPECS`CHARGE #1215=Chakra Flow
&LIST`SPECS`DOT #1215=Attrition
&LIST`SPECS`DRAIN #1215=Chakra Drain
&LIST`SPECS`ABSORB #1215=Chakra Absorption
&LIST`SPECS`REFLECTION #1215=Reflection
&LIST`SPECS`FEINT #1215=Ambidexterity
&LIST`SPECS`TARGETED #1215=Targeted
&LIST`SPECS`POWERFUL #1215=Powerful
&LIST`SPECS`DISRUPT #1215=Disruption
&LIST`SPECS`FLURRY #1215=Onslaught
&LIST`SPECS`BARRAGE #1215=Onslaught
&LIST`SPECS`COUNTER #1215=Counter Offensive
&LIST`SPECS`CLASH #1215=Counter Offensive
&LIST`SPECS`COLLAB #1215=Synchronized Effort
&LIST`SPECS`TURTLE #1215=Fortification
&LIST`SPECS`BARRIER #1215=Barrier
&LIST`SPECS`BLOCK #1215=Fortification
&LIST`SPECS`EVADE #1215=Evasive Maneuvers
&LIST`SPECS`AVOID #1215=Evasive Maneuvers
&LIST`SPECS`TAIJUTSU #1215=Targeted|Powerful|Disrupt|Flurry|DoT|Feint|Counter|Clash|Block|Evade|Avoid|Collab
&LIST`SPECS`BUKIJUTSU #1215=Targeted|Powerful|Disrupt|Flurry|DoT|Feint|Counter|Clash|Turtle|Block|Collab
&LIST`SPECS`CHAKRA-FLOW-TAIJUTSU #1215=Targeted|Powerful|Disrupt|Flurry|Charge|Feint|DoT|Absorb|Drain|Counter|Clash|Turtle|Block|Evade|Avoid|Collab
&LIST`SPECS`CHAKRA-FLOW-BUKIJUTSU #1215=Targeted|Powerful|Disrupt|Flurry|Charge|Feint|DoT|Drain|Counter|Clash|Turtle|Reflection|Block|Collab
&LIST`SPECS`NINJUTSU #1215=Targeted|Powerful|Disrupt|Barrage|Charge|Feint|DoT|Absorb|Drain|Clash|Turtle|Barrier|Reflection|Block|Evade|Avoid|Collab
&LIST`SPECS`NINTAIJUTSU #1215=Targeted|Powerful|Disrupt|Barrage|Charge|Feint|DoT|Absorb|Drain|Counter|Clash|Turtle|Barrier|Reflection|Block|Evade|Avoid|Collab
&LIST`SPECS`SEALS #1215=Targeted|Powerful|Disrupt|Flurry|Barrage|Charge|DoT|Absorb|Drain|Clash|Turtle|Barrier|Reflection|Block|Evade|Avoid|Collab
&LIST`SPECS`CALLIGRAPHY #1215=Targeted|Powerful|Disrupt|Flurry|Barrage|Charge|Feint|DoT|Absorb|Drain|Counter|Clash|Turtle|Barrier|Reflection|Block|Evade|Avoid|Collab
&LIST`SPECS`COMBINATION #1215=Absorb|Avoid|Barrage|Barrier|Block|Charge|Clash|Collab|Counter|Disrupt|DoT|Drain|Evade|Feint|Flurry|Powerful|Reflection|Targeted|Turtle
&LIST`SPECS`TOTA #1215=Absorb|Avoid|Barrage|Barrier|Block|Charge|Clash|Collab|Counter|Disrupt|DoT|Drain|Evade|Feint|Flurry|Powerful|Reflection|Targeted|Turtle
&CMD`JUTSUAPPSUBMIT #1215=$+App/Jutsu Submit:@assert [land([iter(1 2 3 4 5 6 8 9 10, [t([elementsmux([get(%#/dat`jutsuapp)], ##, |)])])])]={@pemit %#=[prompt(app)] Please fill in all the necessary Jutsu App Fields.}; @assert [gte([get(%#/dat`KP)], [setr(1, [u(fn`jutsukpcost, %#)])])]={@pemit %#=[prompt(app)] You do not have enough KP to make this jutsu.}; @assert [gte([get(%#/dat`XP)], [setr(2, [u(fn`jutsuxpcost, %#)])])]={@pemit %#=[prompt(app)] You do not have enough XP to make this jutsu.}; @eval [if([setr(0, [sqlite_query(Game, select ID from Templates where [iter([v(list`jutsu-sql)], ##="[elementsmux([get(%#/dat`jutsuapp)], [inc(#@)], |)]",, %band%b)])])],, sqlite_query(Game, insert into Templates values([u(#1215/dat`next_id)], [iter([u(#1215/list`jutsu-sqlcols)], "[elementsmux([get(%#/dat`jutsuapp)], ##, |)]",,%,)], %q1, %q2, [u(fn`jutsustaminacost, %#)], [u(fn`jutsuchakracost, %#)], [u(fn`jutsuapcost, %#)])))]; @set %#=dat`JutsuAttributes`[edit([elementsmux([get(%#/dat`jutsuapp)], 1, |)], %b, -)]:1|1|1|1|1|1|[if(%q0, %q0, [v(dat`next_id)])]|[iter(1 10 5 11 12, [elementsmux([get(%#/dat`jutsuapp)], ##, |)],,|)]|%N|1|0; @cemit monitor-app={The jutsu "[elements([get(%#/dat`jutsuapp)], 1, |)]" has been created by [ansi(y, %K)].}; @set %#=dat`KP:[sub([get(%#/dat`KP)], %q1)]; @set %#=dat`XP:[sub([get(%#/dat`XP)], %q2)]; @pemit %#={[prompt(App)] The "[elements([get(%#/dat`jutsuapp)], 1, |)]" jutsu has been created for %q2 XP and %q1 KP.}; @wipe %#/dat`jutsuapp; @assert [t(%q0)]={@set #1215=dat`next_ID:[inc([get(#1215/dat`next_ID)])]}
&LIST`KP-JUTSU #1215=2|3|4|6|7|8
&DAT`NEXT_ID #1215=366
&LIST`JUTSU-SQL #1215=Author Category Archetype Type Method Special Range Rank
&LIST`JUTSU-SQLCOLS #1215=2 3 5 4 6 7 20 8 9
&LIST`JUTSU-APPNUMS #1215=1 2 3 3 4 4 5 6 8 9 10 10 11 11 12 13 7 7 7 7
&FN`JUTSUKPCOST #1215=[max(1, [sub([elements([v(list`KP-jutsu)], [match([u(#244/dat`ranks)], [elementsmux([get(%0/dat`jutsuapp)], 9, |)], |)], |)], [after(elements(get(%0/Dat`ExpertiseList),[match(get(%0/Dat`ExpertiseList),Elite Tradition*,|)],|),^)])])]