&FUNC`PRECISIONMOD #253=CEIL(mul(Mul(MUL([extract(get(#254/Dat`JutsuRanks`Base),[switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,2,C,3,B,4,A,5,S,6)],1,|)],ADD(MUL(0.05,add([extract(get(%#/Dat`PrimaryStats),[switch([sqlite_query(Game, Select Category From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,2,Genjutsu,3)],1,|)],[extract(get(%#/Dat`TranscendAttribs),[switch([sqlite_query(Game, Select Category From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,2,Genjutsu,3)],1,|)])),1)),[if(match([sqlite_query(Game, Select Precision From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.25,1)]),[switch(get(%#/Dat`Stance),Combat,1,Spar,.8,Master,.5,1)]))
&FUNC`POTENCYMOD #253=CEIL(mul(MUL(MUL([extract(get(#254/Dat`JutsuRanks`Base),[switch([sqlite_query(Game, Select Rank From Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,2,C,3,B,4,A,5,S,6)],1,|)],ADD(MUL(0.05,add([extract(u(%#/Dat`PrimaryStats),4,1,|)],[extract(u(%#/Dat`TranscendAttribs),4,1,|)])),1)),[if(match([sqlite_query(Game, Select Potency From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.25,1)]),[switch(get(%#/Dat`Stance),Combat,1,Spar,.5,Master,.8,1)]))
&FUNC`PRECISIONMAXROLL #253=Ceil(MUL(mul([u(#253/Func`PrecisionMod,%0)],[switch([sqlite_query(Game, Select Rank from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,.75,D,.8,C,.85,B,.9,A,.95,S,1)]),MUL(MUL(Add(1,mul(mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),1,1,|)],.1),[switch([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),1,1,|)],1,1,2,.99,3,.98,4,.97,5,.95,6,.9,7,.85,8,.8,9,.75,10,.7)])),[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],1)),1.1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.75)),1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.5)),.85,[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.5)),1.5)])])])]),[if(match([sqlite_query(Game, Select Precision From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1,1)])))
&FUNC`PRECISIONMINROLL #253=Ceil(MUL([u(#253/Func`PrecisionMaxRoll,%0)],ADD(0.45,fDIV(add([extract(u(%#/Dat`TranscendAttribs),[switch([sqlite_query(Game, Select Category from Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,2,Genjutsu,3)],1,|)],[extract(u(%#/Dat`PrimaryStats),[switch([sqlite_query(Game, Select Category from Templates Where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,2,Genjutsu,3)],1,|)]),100),fDIV(MUL([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),1,1,|)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],1)),1.1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.75)),1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.5)),.85,[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.5)),1.5)])])])]),100))))
&FUNC`POTENCYMAXROLL #253=Ceil(MUL(mul([u(#253/Func`PotencyMod,%0)],[switch([sqlite_query(Game, Select Rank From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],E,3,D,4,C,5,B,6,A,7,S,8)]),MUL(Mul(ADD(1,MUL([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)),[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],1)),1.1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.75)),1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.5)),.85,[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.5)),1.5)])])])]),IF(hasattr(%#/Dat`TF),[if(match([sqlite_query(Game, Select Potency From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1,1)],1))))
&FUNC`POTENCYMINROLL #253=Ceil(MUL([u(#253/Func`PotencyMaxRoll,%0)],ADD(0.45,fDIV(add([extract(u(%#/Dat`PrimaryStats),4,1,|)],[extract(u(%#/Dat`TranscendAttribs),4,1,|)]),100),fDIV(mul(MUL([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],1)),1.1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.75)),1,[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.5)),.85,[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.9)),MUL([get(%#/Dat`Stamina`Total)],.5)),1.5)])])])]),IF(hasattr(%#/Dat`TF),[if(match([sqlite_query(Game, Select Potency From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1,1)],1)),100))))
&FUNC`FORMMOD #253=CEIL(fDiv(ADD(MUL(add([extract(get(%#/Dat`TranscendAttribs),5,1,|)],[extract(get(%#/Dat`PrimaryStats),5,1,|)]),[if([match(get(%#/Dat`ExpertiseList),Alacrity*,|)],[min(add(add(fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Alacrity*,|)],1,|),^,1)],20),.05),.35),.5)],.35)]),MUL(MUL([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),3,1,|)],IF(hasattr(%#/Dat`TF),IF(Match([sqlite_query(Game, Select Form From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.5,1.25),1.25)),0.4)),-1))
&FUNC`FORMDefMOD #253=CEIL(fDiv(ADD(MUL(add([extract(get([locate(%#, %1, nP)]/Dat`TranscendAttribs),5,1,|)],[extract(get([locate(%#, %1, nP)]/Dat`PrimaryStats),5,1,|)]),[if([match(get([locate(%#, %1, nP)]/Dat`ExpertiseList),Alacrity*,|)],[min(add(add(fdiv([after(extract(get([locate(%#, %1, nP)]/Dat`ExpertiseList),[match(get([locate(%#, %1, nP)]/Dat`ExpertiseList),Alacrity*,|)],1,|),^,1)],20),.05),.35),.5)],.35)]),MUL(MUL([extract(get([locate(%#, %1, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),3,1,|)],IF(hasattr([locate(%#, %1, nP)]/Dat`TF),IF(Match([sqlite_query(Game, Select Form From Transformations Where Name="[get([locate(%#, %1, nP)]/Dat`TF)]")],Yes),1.5,1.25),1.25)),0.4)),-1))

&FUNC`EFFICIENCYMOD #253=round(ADD(MUL(MUL([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),4,1,|)],IF(hasattr(%#/Dat`TF),IF(match([sqlite_query(Game, Select Efficiency From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),.75,.25),1.25)),0.043),fdiv(add([extract(u(%#/Dat`PrimaryStats),6,1,|)],[extract(u(%#/Dat`TranscendAttribs),6,1,|)]),75)),3)
&FUNC`EFFECTIVENESSMOD #253=round(MUL(MUL(ADD([extract(u(%#/Dat`PrimaryStats),7,1,|)],[extract(u(%#/Dat`TranscendAttribs),7,1,|)],[if(and(hasattr(%#/Dat`BodyMod),match(Hozuki,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],2),1),0)]),0.01),MUL([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),5,1,|)],IF(hasattr(%#/Dat`TF),IF(match([sqlite_query(Game, Select Effectiveness From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.5,1),1))),2)
&FUNC`ADAPTABILITYMOD #253=round(ADD(MUL(.075,MUL(MUL(MUL([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),6,1,|)],1.25),IF(hasattr(%#/Dat`TF),IF(match([sqlite_query(Game, Select Adaptability From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.5,1),1)),0.5)),MUL(ADD([extract(get(%#/Dat`PrimaryStats),8,1,|)],[extract(get(%#/Dat`TranscendAttribs),8,1,|)]),0.01)),2)
&FUNC`INITIATECHECK #253=[if([member([u(%L/list`players)], [locate(%#, %0, nP)])],,[set(%L, list`players:[insert([u(%L/list`players)],-1, [locate(%#, %0, nP)])])][pemit([locate(%#, %0, nP)], %r[prompt(combat)] You have been attacked!%r)][remit(%L, %r[prompt(combat)] [ansi(hm,[name(locate(%#, %0, nP))])] has been attacked by %N!%r)])]
&FUNC`ATTACKROLL #253=[rand(u(#253/func`precisionminroll,[edit(%0,%b,-)]),u(#253/func`precisionmaxroll,[edit(%0,%b,-)]))]
&FUNC`DAMAGEROLL #253=[ceil(mul(rand(u(#253/func`potencyminroll,[edit(%0,%b,-)]),u(#253/func`potencymaxroll,[edit(%0,%b,-)])),[switch([sqlite_query(Game, Select Archetype From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],Taijutsu,[if(and(hasattr(%#/Dat`BodyMod),!match(Hozuki,get(%#/Dat`Clan),|)),[add(1,[add(.1,fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))])],1)],Bukijutsu,[if(and(hasattr(%#/Dat`BodyMod),!match(Hozuki|Oomori,get(%#/Dat`Clan),|)),[add(1.5,[add(.1,fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))])],1.5)],Chakra Flow Taijutsu,[if(hasattr(%#/Dat`BodyMod),if(or(and(match(get(%#/Dat`Clan),Hozuki),match([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),10,1,|)],Water)),!match(get(%#/Dat`Clan),Hozuki)),[add(1.75,[add(.1,fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))])]),1.75)],Chakra Flow Bukijutsu,[if(hasattr(%#/Dat`BodyMod),if(or(and(match(Hozuki,[get(%#/Dat`Clan)],|),match([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),10,1,|)],Water)),!match(Hozuki|Oomori,[get(%#/Dat`Clan)],|)),[add(2,[add(.1,fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))])]),2)],Ninjutsu,[if(and(hasattr(%#/Dat`BodyMod),!match(Akimichi|Kaguya|Oomori|Hozuki,get(%#/Dat`Clan),|)),[add(3,[add(.1,fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))])],3)],Seals,[if(and(hasattr(%#/Dat`BodyMod),!match(Akimichi|Kaguya|Oomori|Hozuki,get(%#/Dat`Clan),|)),[add(3,[add(.1,fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))])],3)],Calligraphy,[if(and(hasattr(%#/Dat`BodyMod),!match(Akimichi|Kaguya|Oomori|Hozuki,get(%#/Dat`Clan),|)),[add(2,[add(.1,fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))])],2)],Nintaijutsu,[if(hasattr(%#/Dat`BodyMod),if(or(and(match(Hozuki,[get(%#/Dat`Clan)],|),match([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),10,1,|)],Water)),!match(Hozuki|Oomori|Kaguya|Akimichi,[get(%#/Dat`Clan)],|)),[add(2.5,[add(.1,fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))])]),2.5)],Combination,[switch(after(grab(get(%#/dat`expertiseList), Combination Element:*, |), ^),0,3.5,1,3.75,2,4,3.5)],Tota,4)]))]
&FUNC`COMBATAP #253=[max([switch([sqlite_query(Game, Select Method From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],Attack,[switch([sqlite_query(Game, Select Category From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],Taijutsu,[switch([sqlite_query(Game, Select Rank From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],E,1,D,1,C,1,B,2,A,2,S,3)],Ninjutsu,[switch([sqlite_query(Game, Select Rank From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],E,2,D,2,C,3,B,3,A,3,S,4)])],Defend,0)],round(add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if(hasattr([extract(get(%#/Dat`Link),2,1,|)]),1)][if(gt(words(%1),1),mul(words(%1),.8))],[max(0,mul(%2,sub(1,[u(#253/func`adaptabilitymod,[edit(%0,%b,-)])])))])),0))]
&FUNC`COMBATSTAMINA #253=[ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],[u(#253/func`efficiencymod,[edit(%0,%b,-)])])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),[max(mul(mul(add(words(%1),%2),.8),sub(1,%3)),1)],[max(mul(%2,sub(1,%3)),1)])]))]
&FUNC`COMBATCHAKRA #253=[ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],[u(#253/func`efficiencymod,[edit(%0,%b,-)])])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),[max(mul(mul(add(words(%1),%2),.8),sub(1,%3)),1)],[max(mul(%2,sub(1,%3)),1)])]))]
&FUNC`COMBATRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),%2)])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),%0)])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),%1)])]
&FUNC`STATUS #253=[set(%#,Dat`Stamina`Max:[u(#245/func`staminacalc)])][set(%#,Dat`Chakra`Max:[u(#245/func`Chakracalc)])][if(gt([get(%#/dat`Vitality`Current)],[get(%#/dat`Vitality`Max)]),[set(%#,Dat`Vitality`Current:[get(%#/dat`Vitality`Max)])])][if(gt([get(%#/dat`Stamina`Current)],[get(%#/dat`Stamina`Max)]),[set(%#,Dat`Stamina`Current:[get(%#/dat`Stamina`Max)])])][if(gt([get(%#/dat`Chakra`Current)],[get(%#/dat`Chakra`Max)]),[set(%#,Dat`Chakra`Current:[get(%#/dat`Chakra`Max)])])][pemit(%#,[prompt(Combat)] [ansi(hr,Vit)]:[ansi(hw,[get(%#/dat`Vitality`Current)])]|[ansi(hr,[get(%#/dat`Vitality`Max)])] [ansi(hg,Stam)]:[ansi(hw,[get(%#/dat`stamina`Current)])]|[ansi(hg,[get(%#/dat`Stamina`Max)])] [ansi(hc,Chakra)]:[ansi(hw,[get(%#/dat`chakra`Current)])]|[ansi(hc,[get(%#/dat`Chakra`Max)])] [ansi(hy,AP)]:[ansi(hw,[get(%#/dat`AP`Current)])]|[ansi(hy,[get(%#/dat`AP`Max)])]%r%t[ansi(y,Stance)]: [ansi(hy,[get(%#/Dat`Stance)])] %t[if(hasattr(%#/Dat`TF),[ansi(c,TF)]:%b[ansi(hc,[get(%#/Dat`TF)])])] %t[if(hasattr(%#/Dat`BodyMod),[ansi(c,Body Mod)]:%b[ansi(hc,[get(%#/Dat`BodyMod)])])] %r)]
&FUNC`ATTACKEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] attacks with [art([u(#253/func`rating)])], [if(gt(words(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")),1),multi,[lcstr(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"))])]-ranged %r%t[ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`ar)]) against [ansi(hr,[name(locate(%#, %1, nP))])].}, blah)]%r)]
&FUNC`PERFORM #253=switch(1,lte(get(%#/Dat`ar),round(mul([u(#253/func`precisionmaxroll,%0)],.25),0)),barely,lte(get(%#/Dat`ar),round(mul([u(#253/func`precisionmaxroll,%0)],.4),0)),sloppily,lte(get(%#/Dat`ar),round(mul([u(#253/func`precisionmaxroll,%0)],.5),0)),adequately,lte(get(%#/Dat`ar),round(mul([u(#253/func`precisionmaxroll,%0)],.75),0)),adeptly,lte(get(%#/Dat`ar),round(mul([u(#253/func`precisionmaxroll,%0)],.9),0)),skillfully,lt(get(%#/Dat`ar),round(mul([u(#253/func`precisionmaxroll,%0)],.95),0)),proficienctly,gte(get(%#/Dat`ar),round(mul([u(#253/func`precisionmaxroll,%0)],.95),0)),perfectly,error)
&FUNC`RATING #253=switch(1,lte(get(%#/Dat`ar),50),basic,lte(get(%#/Dat`ar),100),practiced,lte(get(%#/Dat`ar),150),honed,lte(get(%#/Dat`ar),200),experienced,lte(get(%#/Dat`ar),250),exceptional,lte(get(%#/Dat`ar),300),masterful,gte(get(%#/Dat`ar),301),flawless)
&FUNC`RESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],[u(#253/func`efficiencymod,[edit(%0,%b,-)])])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),[sub(mul(add(words(%1),%2),.5),%3)],[sub(mul(1,%2),%3)])]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],[u(#253/func`efficiencymod,[edit(%0,%b,-)])])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),[sub(mul(add(words(%1),%2),.5),%3)],[mul(%2,sub(1,%3))])]))))

&FUNC`WHEEL #253=[elements(get(#254/Dat`Wheel),add(match(get(#254/Dat`Wheel),[sqlite_query(Game, Select Type From Templates where ID="[extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)]")]:[sqlite_query(Game, Select Type From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],|),1),|)]
&FUNC`DEFENSEROLL #253=[set(%#,Dat`DR:[ceil(mul(mul([rand(u(#253/func`precisionminroll,[edit(%0,%b,-)]),u(#253/func`precisionmaxroll,[edit(%0,%b,-)]))],[if(match(Targeted|Powerful,%2,|),.8,1)]),[if(hasattr(%#/Dat`BodyMod),if(and(match(Hozuki,[get(%#/Dat`Clan)],|),match([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),10,1,|)],Water)),[add([u(#253/func`wheel,[edit(%0,%b,-)],[edit(%1,%b,-)])],fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))],if(and(match(Akimichi|Kaguya|Oomori,[get(%#/Dat`Clan)],|),match([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),10,1,|)],Physical)),[add([u(#253/func`wheel,[edit(%0,%b,-)],[edit(%1,%b,-)])],fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))],[add([u(#253/func`wheel,[edit(%0,%b,-)],[edit(%1,%b,-)])],fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10))])),[u(#253/func`wheel,[edit(%0,%b,-)],[edit(%1,%b,-)])])]))])]
[setq(C,[ceil(mul(add([u(#253/Func`CritMod,%0)],add(max(0,mul(mul([u(#253/Func`FormMod,%0)],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit([extract(get(%L/Attacks`%#),2,1,:)],%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,.5)]),-3)),mul(mul([u(#253/Func`FormDefMod,%1,[extract(get(%L/Attacks`%#),1,1,:)])],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,1)]),5))),[switch(after(grab(get(%#/dat`expertiseList), Targeted*, |), ^),0,1.5,1,2,2,3,1.5)]))])]
&FUNC`DEFENSEEMIT #253=[remit(%L,%r%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] defends with [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),8,1,|)])]([get(%#/dat`dr)]) against [ansi(hr,[name([extract(get(%L/Attacks`%#),1,1,:)])]'s [caplist(extract(get(%L/Attacks`%#),2,1,:))])]([extract(get(%L/Attacks`%#),4,1,:)]) receiving[if(gt([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),[setq(C,[ceil(mul(add([u(#253/Func`CritMod,%0)],add(max(0,mul(mul([u(#253/Func`FormMod,%0)],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit([extract(get(%L/Attacks`%#),2,1,:)],%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,.5)]),-3)),mul(mul([u(#253/Func`FormDefMod,%1,[extract(get(%L/Attacks`%#),1,1,:)])],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,1)]),5))),[switch(after(grab(get(%#/dat`expertiseList), Targeted*, |), ^),0,1.5,1,2,2,3,1.5)]))])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,if(gte(%qC,100),[ceil(mul(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])])]))),2),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),.9,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.75,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.5)]))],[ceil(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*,|),^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])])]))),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),.9,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.75,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.5)]))]),:)])] [set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,[max(0,sub([extract(get(%L/Attacks`%#),5,1,:)],[ceil(mul(mul(add(ceil(mul([u(#253/Func`PotencyMod,%0)],add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],25),25),0)]),[u(#253/Func`DRMod,%0)]),[switch([sqlite_query(Game, Select Rank From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,1.25,C,1.5,B,1.75,A,2.25,S,3)]))]))],:)])][extract(get(%L/Attacks`%#),5,1,:)][if(gte(%qC,100),%b[ansi(hr,CRITICAL damage)] from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)]!,%bdamage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)].)] [u(#253/func`Vitalitywound,[extract(get(%L/Attacks`%#),5,1,:)])] [set(%#,Dat`Vitality`Current:[max(0,sub(get(%#/Dat`Vitality`Current),[extract(get(%L/Attacks`%#),5,1,:)]))])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[edit(%1,%b,-)])],[extract(get(%L/Attacks`%#),1,1,:)])][if(match([extract(get(%L/Attacks`%#),7,1,:)],DoT,^),[u(#253/Func`DoT,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[edit(%1,%b,-)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Absorb,^),[u(#253/func`Absorb,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)],%bno damage.)][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
set

&FUNC`VITALITYWOUND #253=[switch(1,gt([extract(get(%L/Attacks`%#),5,1,:)],ceil(mul(max(get(%#/Dat`Vitality`Max),get(%#/Dat`Vitality`Total)),.1))),[set(%#,Dat`Vitality`Max:[ceil(add(get(%#/Dat`Vitality`Max),sub(mul(max(get(%#/Dat`Vitality`Max),get(%#/Dat`Vitality`Total)),.1),[extract(get(%L/Attacks`%#),5,1,:)])))])][ansi(Hr,A wound was suffered!)],0,)]
&FUNC`DEFENDPROMPT #253=[if([t(%0)], [pemit(%0,[if([hasattr(%l, Attacks`%0)], %r[setq(!, [extract([get(%l/Attacks`%0)], 1, 1,^)], atk)][prompt(combat)] [ansi(hm, [name([elements(%q<atk>, 1,:)])])] attacks you with [art(ansi(hg,[capstr([elements(%q<atk>, 2,:)])]))] for [elements(%q<atk>, 4,:)] accuracy and [elements(%q<atk>, 5,:)] damage[if(or([match(get([locate(%#,[elements(%q<atk>, 3,:)],nP)]/Dat`Merits),Sensitive*,|)],[match(get([locate(%#,[elements(%q<atk>, 3,:)],nP)]/Dat`TF),Sharingan)],[match(get([locate(%#,[elements(%q<atk>, 3,:)],nP)]/Dat`TF),Byakugan)]),%b spending [elements(%q<atk>, 8,:)] Chakra)]. Action?,%r[prompt(combat)] There are no more attacks against you.)]%r)], [pemit(%#,[if([hasattr(%l, Attacks`%#)], %r[setq(!, [extract([get(%l/Attacks`%#)], 1, 1,^)], atk)][prompt(combat)] [ansi(hm, [name([elements(%q<atk>, 1,:)])])] attacks you with [art(ansi(hg,[capstr([elements(%q<atk>, 2,:)])]))] for ([elements(%q<atk>, 4,:)]). Action?,%r[prompt(combat)] There are no more attacks against you.)]%r)])]
&FUNC`DEFENSERESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(0,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]))))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1)])))])]
&DAT`NATURE-COMBINATION`ICE #253=[If(match(get(%#/Dat`Clan),Yuki),Ice Release,Snow Release)]|
&DAT`TAIJUTSU`PHYSICAL #253=Body Technique|Taijutsu|[If(match(get(%#/Dat`Affiliation),Konohagakure),Strong Fist)]|[If(match(get(%#/Dat`Clan),Kaguya),Dead Bone Pulse|Shikotsumyaku)]|[If(match(get(%#/Dat`Clan),On'You),Setting Sun|Sekiyou)]|
&DAT`BUKIJUTSU`PHYSICAL #253=Weapon Style|Bukijutsu|[If(match(get(%#/Dat`Clan),Kaguya),Dead Bone Pulse|Shikotsumyaku)]|[If(match(get(%#/Dat`Clan),On'You),Rising Moon|Shinkou Tsuki)]|
&DAT`CHAKRA-FLOW-TAIJUTSU`PHYSICAL #253=Taijutsu|Body Technique|[If(match(get(%#/Dat`Clan),Kaguya),Dead Bone Pulse|Shikotsumyaku)]|[If(match(get(%#/Dat`Clan),Hyuuga),Gentle Fist|Juuken)]|[If(match(get(%#/Dat`Clan),Akimichi),Multi-Size)]|[If(match(get(%#/Dat`Clan),On'You),Setting Sun|Sekiyou)]|
&DAT`CHAKRA-FLOW-TAIJUTSU`YIN #253=Yin Technique|[If(match(get(%#/Dat`Clan),On'You),Setting Sun|Sekiyou)]|
&DAT`CHAKRA-FLOW-TAIJUTSU`YANG #253=Yang Technique|[If(match(get(%#/Dat`Affiliation),Konohagakure),Strong Fist)]|[If(match(get(%#/Dat`Clan),Hyuuga),Gentle Fist|Juuken)]|[If(match(get(%#/Dat`Clan),On'You),Setting Sun|Sekiyou)]|
&DAT`CHAKRA-FLOW-TAIJUTSU`FIRE #253=Fire Technique|
&DAT`CHAKRA-FLOW-TAIJUTSU`WIND #253=Wind Technique|
&DAT`CHAKRA-FLOW-TAIJUTSU`WATER #253=Water Technique|[If(match(get(%#/Dat`Clan),Hozuki),Water Body)]|
&DAT`CHAKRA-FLOW-TAIJUTSU`EARTH #253=Earth Technique|
&DAT`CHAKRA-FLOW-TAIJUTSU`LIGHTNING #253=Lightning Technique|
&DAT`CHAKRA-FLOW-BUKIJUTSU`PHYSICAL #253=Weapon Style|Bukijutsu|[If(match(get(%#/Dat`Clan),Kaguya),Dead Bone Pulse|Shikotsumyaku)]|[If(match(get(%#/Dat`Clan),On'You),Rising Moon|Shinkou Tsuki)]|
&DAT`CHAKRA-FLOW-BUKIJUTSU`YIN #253=Yin Style|[If(match(get(%#/Dat`Clan),On'You),Rising Moon|Shinkou Tsuki)]|
&DAT`CHAKRA-FLOW-BUKIJUTSU`YANG #253=Yang Style|[If(match(get(%#/Dat`Clan),On'You),Rising Moon|Shinkou Tsuki)]|
&DAT`CHAKRA-FLOW-BUKIJUTSU`FIRE #253=Fire Style|
&DAT`CHAKRA-FLOW-BUKIJUTSU`WIND #253=Wind Style|
&DAT`CHAKRA-FLOW-BUKIJUTSU`WATER #253=Water Style|[If(match(get(%#/Dat`Clan),Hozuki),Water Body)]|
&DAT`CHAKRA-FLOW-BUKIJUTSU`EARTH #253=Earth Style|
&DAT`CHAKRA-FLOW-BUKIJUTSU`LIGHTNING #253=Lightning Style|
&DAT`NINJUTSU`YIN #253=Yin Release|[If(match(get(%#/Dat`Clan),On'You),Primordial Darkness)]|
&DAT`NINJUTSU`YANG #253=Yang Release|[If(match(get(%#/Dat`Clan),On'You),Supreme Enlightenment)]|
&DAT`NINJUTSU`FIRE #253=Fire Release|[If(match(get(%#/Dat`Clan),On'You),Supreme Flame|Primordial Flame)]|Ash Release|
&DAT`NINJUTSU`WIND #253=Wind Release|[If(match(get(%#/Dat`Clan),On'You),Supreme Gale|Primordial Gale)]|
&DAT`NINJUTSU`WATER #253=Water Release|[If(match(get(%#/Dat`Clan),On'You),Supreme Torrent|Primordial Torrent)]|
&DAT`NINJUTSU`EARTH #253=Earth Release|[If(match(get(%#/Dat`Clan),On'You),Supreme Earth|Primordial Earth)]|Mud Release|
&DAT`NINJUTSU`LIGHTNING #253=Lightning Release|[If(match(get(%#/Dat`Clan),On'You),Supreme Bolt|Primordial Bolt)]|
&DAT`NINTAIJUTSU`YIN #253=Yin Release|
&DAT`NINTAIJUTSU`YANG #253=Yang Release|
&DAT`NINTAIJUTSU`FIRE #253=Fire Release|
&DAT`NINTAIJUTSU`WIND #253=Wind Release|
&DAT`NINTAIJUTSU`WATER #253=Water Release|
&DAT`NINTAIJUTSU`EARTH #253=Earth Release|
&DAT`NINTAIJUTSU`LIGHTNING #253=Lightning Release|
&DAT`NATURE-COMBINATION`LAVA #253=Lava Release|
&DAT`NATURE-COMBINATION`BOIL #253=Boil Release|
&DAT`NATURE-COMBINATION`SCORCH #253=Scorch Release|
&DAT`NATURE-COMBINATION`EXPLOSION #253=Explosion Release|
&DAT`NATURE-COMBINATION`STORM #253=Storm Release|
&DAT`NATURE-COMBINATION`WOOD #253=Wood Release|
&DAT`NATURE-COMBINATION`MAGNET #253=Magnet Release|
&DAT`SEALS`YIN #253=Yin Release|
&DAT`SEALS`YANG #253=Yang Release|[If(match(get(%#/Dat`Clan),Uzumaki),Uzumaki Seals)]|
&DAT`SEALS`FIRE #253=Fire Release|
&DAT`SEALS`WIND #253=Wind Release|
&DAT`SEALS`WATER #253=Water Release|
&DAT`SEALS`EARTH #253=Earth Release|
&DAT`SEALS`LIGHTNING #253=Lightning Release|
&DAT`CALLIGRAPHY`PHYSICAL #253=Scroll Release|
&DAT`CALLIGRAPHY`YIN #253=Yin Release|
&DAT`CALLIGRAPHY`YANG #253=Yang Release|
&DAT`CALLIGRAPHY`FIRE #253=Fire Release|
&DAT`CALLIGRAPHY`WIND #253=Wind Release|
&DAT`CALLIGRAPHY`WATER #253=Water Release|
&DAT`CALLIGRAPHY`EARTH #253=Earth Release|
&DAT`CALLIGRAPHY`LIGHTNING #253=Lightning Release|
&DAT`GENJUTSU`YIN #253=Genjutsu|Illusion Technique|[If(match(get(%#/Dat`Clan),On'You),Ancient Dream|Kyuumu)]|
&DAT`GENTAIJUTSU`PHYSICAL #253=Apparition Technique|GenTaijutsu|[If(match(get(%#/Dat`Clan),On'You),Ancient Dream|Kyuumu)]|
&DAT`GENBUKIJUTSU`PHYSICAL #253=Apparition Style|GenBukijutsu|[If(match(get(%#/Dat`Clan),On'You),Ancient Dream|Kyuumu)]|
&FUNC`DOTRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add(u(#253/Func`CombatAP,%0),1)))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),[ceil(mul(u(#253/func`CombatStamina,%0),1.1))])])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),[ceil(mul(u(#253/Func`CombatChakra,%0),1.1))])])]
&FUNC`DOTEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] attempts a DoT with [art([u(#253/func`rating)])], [if(gt(words(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")),1),multi,[lcstr(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"))])]-ranged %r%t[ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`ar)]) against [ansi(hr,[name(locate(%#, %1, nP))])].}, blah)]%r)]
&FUNC`DOTRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),Sub([ceil(mul(sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]),1.1))],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)]))),gte(get(%#/Dat`Chakra`Current),Sub([ceil(mul(sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]),1.1))],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)]))))
&FUNC`CHARGERESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],[u(#253/func`efficiencymod,[edit(%0,%b,-)])])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),[sub(mul(add(words(%1),%2),.8),%3)],[sub(mul(1,%2),%3)])]))),gte(get(%#/Dat`Chakra`Current),add(ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],[u(#253/func`efficiencymod,[edit(%0,%b,-)])])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),[sub(mul(add(words(%1),%2),.8),%3)],[sub(mul(1,%2),%3)])])),1000)))
&FUNC`CHARGERESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),[ceil(sub(3,mul(3,[u(#253/func`adaptabilitymod,[edit(%0,%b,-)])])))])))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),[ceil(mul(u(#253/func`CombatStamina,%0),1))])])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),[ceil(add(mul(u(#253/Func`CombatChakra,%0),1),[switch([sqlite_query(Game, Select Rank From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],E,500,D,1000,C,1500,B,2000,A,2500,S,3000)]))])])]
&FUNC`CHARGEEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] [if(gte(%2,4),successfully Charges,fails to Charge)] [art([u(#253/func`rating)])], [if(gt(words(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")),1),multi,[lcstr(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"))])]-ranged %r%t[ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`ar)]) against [ansi(hr,[name(locate(%#, %1, nP))])].}, blah)]%r)]
&FUNC`DRAINRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),4,2)]))))
&FUNC`DRAINRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)][if(gt(words(%1),1),3,1)]))))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),4,2)])))])]
&FUNC`DRAINEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] attempts to Drain chakra with [art([u(#253/func`rating)])], [if(gt(words(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")),1),multi,[lcstr(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"))])]-ranged [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`ar)]) against [ansi(hr,[name(locate(%#, %1, nP))])].}, blah)]%r)]
&FUNC`DRAIN #253=[switch([sqlite_query(Game, Select Rank from Templates where ID="[extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`%0),7,1,|)]")],E,[setq(D,rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.065,.015)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.07,.02)],[add(u(#253/Func`EffectivenessMod,%0),1)])))))],D,[setq(D,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.07,.02)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.08,.03)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])],C,[setq(D,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.08,.03)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.1,.05)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])],B,[setq(D,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.1,.05)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.125,.075)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])],A,[setq(D,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.125,.075)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.15,.1)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])],S,[setq(D,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.15,.1)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([if(gte(after(grab(get(%#/dat`expertiseList), Chakra Drain*, |), ^),1),.2,.15)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])])][if(gte(sub(get(%#/Dat`Chakra`Current),%qD),0),%r%r%t %N has been Drained of %qD Chakra! [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),%qD)])],[if(gt(get(%#/Dat`Chakra`Current),0),%r%r%t %N has been Drained of [get(%#/Dat`Chakra`Current)] Chakra![set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),get(%#/Dat`Chakra`Current))])],%r%r%t %N has no chakra to drain.)])]
&FUNC`TENSEEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)] tenses against [ansi(hr,[name([extract(get(%L/Attacks`%#),1,1,:)])]'s [caplist(extract(get(%L/Attacks`%#),2,1,:))])]([extract(get(%L/Attacks`%#),4,1,:)]) receiving[if(gt([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),[setq(C,[ceil(mul(add([u(#253/Func`CritMod,%0)],add(max(0,mul(mul([u(#253/Func`FormMod,%0)],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit([extract(get(%L/Attacks`%#),2,1,:)],%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,.5)]),-3)),mul(mul([u(#253/Func`FormDefMod,%1,[extract(get(%L/Attacks`%#),1,1,:)])],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,1)]),5))),[switch(after(grab(get(%#/dat`expertiseList), Targeted*, |), ^),0,1.5,1,2,2,3,1.5)]))])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,if(gte(%qC,100),ceil(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),[switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)]),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],1)]),2)),ceil(mul([extract(get(%L/Attacks`%#),5,1,:)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),[switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)]),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],1)]))),:)])] [extract(get(%L/Attacks`%#),5,1,:)] [if(gte(%qC,100),[ansi(hr,CRITICAL damage!%b)],damage.%b)][u(#253/func`Vitalitywound,[extract(get(%L/Attacks`%#),5,1,:)])] [set(%#,Dat`Vitality`Current:[sub(get(%#/Dat`Vitality`Current),[extract(get(%L/Attacks`%#),5,1,:)])])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[extract(get(%L/Attacks`%#),2,1,:)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],DoT,^),[u(#253/Func`DoT,[extract(get(%L/Attacks`%#),2,1,:)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[extract(get(%L/Attacks`%#),2,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Absorb,^),[u(#253/func`Absorb,[extract(get(%L/Attacks`%#),2,1,:)],[extract(get(%L/Attacks`%#),1,1,:)])],)],%bno damage.)][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
&FUNC`TENSEROLL #253=[set(%#,Dat`DR:[switch(after(grab(get(%#/dat`expertiseList), Sacrifice*, |), ^),0,20,1,30,2,40,20)])]
&FUNC`MENTALCHECK #253=ceil(mul(mul(rand(mul([u(#245/func`mentalchallenge,%0)],.6),add([u(#245/func`mentalchallenge,%0)],10)),IF(hasattr([locate(%#,%0,nP)]/Dat`TF),IF(match([sqlite_query(Game, Select Mental From Transformations Where Name="[get([locate(%#,%0,nP)]/Dat`TF)]")],Yes),1.25,1),1)),[if(match([extract(get([locate(%#,%0,nP)]/Dat`Control),2,1,|)],General,|),[switch(after(grab(get([locate(%#,%0,nP)]/dat`expertiseList), Control*, |), ^),0,.8,1,.75,2,.66,.8)],1)]))
&FUNC`GENATTACKRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)]))))
&FUNC`GENATTACKSTAMINA #253=[ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)]))]
&FUNC`GENATTACKCHAKRA #253=[ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)]))]
&FUNC`GENATTACKRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),[ceil(sub(1,mul(1,[u(#253/func`adaptabilitymod,[edit(%0,%b,-)])])))])))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)])))])]
&FUNC`LINKRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(200,add(2,get([locate(%#, %0, nP)]/Dat`Tier))),[if(match(get(%#/Dat`Affinitylist),Yin,|),.5,1)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(700,add(2,get([locate(%#, %0, nP)]/Dat`Tier))),[if(match(get(%#/Dat`Affinitylist),Yin,|),.5,1)]))))
&FUNC`LINKRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),ceil(mul(3,[if(match(get(%#/Dat`Affinitylist),Yin,|),.5,1)])))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(200,add(2,get([locate(%#, %0, nP)]/Dat`Tier))),[if(match(get(%#/Dat`Affinitylist),Yin,|),.5,1)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(700,add(2,get([locate(%#, %0, nP)]/Dat`Tier))),[if(match(get(%#/Dat`Affinitylist),Yin,|),.5,1)])))])]
&FUNC`LINKEMIT #253=[Pemit(%#,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)] attempts to Genjutsu Link %2 with the Genjutsu [caplist(%0)](%1).}, blah)]%r)]
&FUNC`EXHAUSTRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),mul(4000,[if(match(get(%#/Dat`Affinitylist),Yin,|),.5,1)])),gte(get(%#/Dat`Chakra`Current),mul(10000,[if(match(get(%#/Dat`Affinitylist),Yin,|),.5,1)])))
&FUNC`EXHAUSTRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),ceil(mul(6,[if(match(get(%#/Dat`Affinitylist),Yin,|),.5,1)])))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),mul(4000,[if(match(get(%#/Dat`Affinitylist),Yin,|),.5,1)]))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),mul(10000,[if(match(get(%#/Dat`Affinitylist),Yin,|),.5,1)]))])]
&FUNC`HEALRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(mul(mul(get([locate(%#, %0, nP)]/Dat`Vitality`Total),.25),[if(hasattr(%#/Dat`Link),2,1)]),[if([match(get(%#/Dat`AffinityList),Yang,|)],.75,1)]),%1))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(mul(mul(get([locate(%#, %0, nP)]/Dat`Vitality`Total),.5),[if(hasattr(%#/Dat`Link),2,1)]),[if([match(get(%#/Dat`AffinityList),Yang,|)],.75,1)]),%1))))
&FUNC`HEALRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),ceil(mul(add(6,[if([extract(get(%#/Dat`Link),2,1,|)],1)]),[if([match(get(%#/Dat`AffinityList),Yang,|)],.75,1)])))])][set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(mul(mul(get([locate(%#, %0, nP)]/Dat`Vitality`Total),.25),[if(hasattr(%#/Dat`Link),2,1)]),[if([match(get(%#/Dat`AffinityList),Yang,|)],.75,1)]),%1)))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(mul(mul(get([locate(%#, %0, nP)]/Dat`Vitality`Total),.5),[if(hasattr(%#/Dat`Link),2,1)]),[if([match(get(%#/Dat`AffinityList),Yang,|)],.75,1)]),%1)))])]
&FUNC`HEALEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] Heals [ansi(hg,[name(locate(%#, %1, nP))])] with [ansi(hc,[caplist(%0)])] for [if(lte(mul(get([locate(%#, %1, nP)]/Dat`Vitality`Total),[switch(after(grab(get(%#/dat`expertiseList), Medical Knowledge*, |), ^),0,.05,1,.1,2,.2,.05)]),[ceil(sub(get([locate(%#, %1, nP)]/Dat`Vitality`Max),get([locate(%#, %1, nP)]/Dat`Vitality`Current)))]),mul(get([locate(%#, %1, nP)]/Dat`Vitality`Total),[switch(after(grab(get(%#/dat`expertiseList), Medical Knowledge*, |), ^),0,.05,1,.1,2,.2,.05)]),[ceil(sub(get([locate(%#, %1, nP)]/Dat`Vitality`Max),get([locate(%#, %1, nP)]/Dat`Vitality`Current)))])] Vitality! }, blah)]%r)]
&FUNC`STEALTHRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),[switch(%0,Taijutsu,2500,Ninjutsu,500,Genjutsu,500)]),gte(get(%#/Dat`Chakra`Current),[switch(%0,Taijutsu,0,Ninjutsu,2000,Genjutsu,1500)]))
&FUNC`PERCEPTIONCHECK #253=ceil(mul(add(mul(rand(mul([u(#245/func`Perceptionchallenge,%0)],.6),add([u(#245/func`Perceptionchallenge,%0)],10)),IF(hasattr([locate(%#,%0,nP)]/Dat`TF),IF(match([sqlite_query(Game, Select Perception From Transformations Where Name="[get([locate(%#,%0,nP)]/Dat`TF)]")],Yes),1.25,1),1)),[switch(after(grab(get([locate(%#,%0,nP)]/dat`expertiseList), Extra Sensory*, |), ^),0,5,1,15,2,25,5)]),[if(match([extract(get([locate(%#,%0,nP)]/Dat`Control),2,1,|)],General,|),[switch(after(grab(get([locate(%#,%0,nP)]/dat`expertiseList), Control*, |), ^),0,.8,1,.75,2,.66,.8)],1)]))
&FUNC`STEALTHRESOURCES #253=[set(%#,Dat`Stamina`Current:[max(sub(get(%#/Dat`Stamina`Current),[switch(%0,Taijutsu,2500,Ninjutsu,500,Genjutsu,500)]),0)])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),[switch(%0,Taijutsu,0,Ninjutsu,2000,Genjutsu,1500)])])]
&FUNC`PERCEPTIONRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),[switch(%0,Taijutsu,500,Ninjutsu,50,Genjutsu,150)]),gte(get(%#/Dat`Chakra`Current),[switch(%0,Taijutsu,0,Ninjutsu,1450,Genjutsu,1150)]))
&FUNC`PERCEPTIONRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),2)])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),[switch(%0,Taijutsu,500,Ninjutsu,50,Genjutsu,150)])])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),[switch(%0,Taijutsu,0,Ninjutsu,1450,Genjutsu,1150)])])]
&FUNC`ABSORBEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] attempts to Absorb chakra with [art([u(#253/func`rating)])], [if(gt(words(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")),1),multi,[lcstr(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"))])]-ranged [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`ar)]) against [ansi(hr,[name(%1)])].}, blah)]%r)]
&FUNC`ABSORB #253=[switch([sqlite_query(Game, Select Rank from Templates where ID="[extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`%0),7,1,|)]")],E,[setq(A,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.01,1,.06,2,.11,.01)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.015,1,.065,2,.115,.015)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])],D,[setq(A,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.015,1,.065,2,.115,.015)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.02,1,.07,2,.12,.02)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])],C,[setq(A,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.02,1,.07,2,.12,.02)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.025,1,.075,2,.125,.025)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])],B,[setq(A,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.025,1,.075,2,.125,.025)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.03,1,.08,2,.13,.03)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])],A,[setq(A,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.03,1,.08,2,.13,.03)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.04,1,.09,2,.14,.04)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])],S,[setq(A,[rand(ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.04,1,.09,2,.14,.04)],[add(u(#253/Func`EffectivenessMod,%0),1)]))),ceil(mul(get(%#/Dat`Chakra`Max),mul([switch(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),0,.05,1,.1,2,.15,.05)],[add(u(#253/Func`EffectivenessMod,%0),1)]))))])])][if(gte(sub(get(%#/Dat`Chakra`Current),%qA),0),%r%r%t %N has had %qA Chakra Absorbed from them![set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),%qA)])][set([locate(%#, %1, nP)],Dat`Chakra`Current:[min(add(get([locate(%#, %1, nP)]/Dat`Chakra`Current),%qA),get([locate(%#, %1, nP)]/Dat`Chakra`Max))])][pemit([locate(%#, %1, nP)],You have absorbed %qA Chakra.)],[if(gt(get(%#/Dat`Chakra`Current),0),%r%r%t %N has had [get(%#/Dat`Chakra`Current)] Chakra Absorbed from them! [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),get(%#/Dat`Chakra`Current))])][set([locate(%#, %1, nP)],Dat`Chakra`Current:[min(add(get([locate(%#, %1, nP)]/Dat`Chakra`Current),get(%#/Dat`Chakra`Current)),get([locate(%#, %1, nP)]/Dat`Chakra`Max))])][pemit([locate(%#, %1, nP)],You have absorbed get(%#/Dat`Chakra`Current) Chakra.)],%r%r%t %N has no chakra to absorb.)])][u(#253/func`status)]
&FUNC`FEINTEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] Feints, pairing [ansi(hg,caplist([extract(extract(get(%L/Attacks`[locate(%#, %1, nP)]),[words(get(%L/Attacks`[locate(%#, %1, nP)]),^)],1,^),2,1,:)]))] with [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])] increasing [ansi(hg,caplist([extract(extract(get(%L/Attacks`[locate(%#, %1, nP)]),[words(get(%L/Attacks`[locate(%#, %1, nP)]),^)],1,^),2,1,:)]))]'s accuracy!}, blah)]%r)]
&FUNC`FLURRYRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),1.5),[if(hasattr(%#/Dat`Link),2,1)]))))
&FUNC`FLURRYEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] performs a Flurry of attacks with [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/Dat`AR)]) against [ansi(hr,[name(locate(%#, %1, nP))])]!}, blah)]%r)]
&FUNC`FLURRYRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),[ceil(sub(3,mul(3,[u(#253/func`adaptabilitymod,[edit(%0,%b,-)])])))])))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),1.5),[if(hasattr(%#/Dat`Link),2,1)])))])]
&FUNC`BARRAGERESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),4),[if(hasattr(%#/Dat`Link),2,1)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)]))))
&FUNC`BARRAGEEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] unleashes a Barrage of [[u(#253/func`rating)]] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/Dat`AR)]) attacks against [ansi(hr,[name(locate(%#, %1, nP))])]!}, blah)]%r)]
&FUNC`BARRAGERESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),[ceil(sub(5,mul(5,[u(#253/func`adaptabilitymod,[edit(%0,%b,-)])])))])))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),4),[if(hasattr(%#/Dat`Link),2,1)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)])))])]
setq
&FUNC`SACRIFICEEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Max)],0.8)),[switch(rand(3),0,Vigorous,1,Naturally,2,Effortlessly)],[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Max)],0.6)),[switch(rand(3),0,Winded,1,Sweating,2,Panting)],[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`max)],0.3)),[switch(rand(3),0,Pressured,1,Strained,2,Tired)],[IF(LT([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Max)],0.3)),[switch(rand(3),0,Determined,1,Fierce,2,Fervent)])])])])], [ansi(hm,%N)] Sacrifices [obj(%#)]self against [ansi(hr,[name([extract(get(%L/Attacks`[locate(%#, %0, nP)]),1,1,:)])]'s [caplist(extract(get(%L/Attacks`[locate(%#, %0, nP)]),2,1,:))])]([extract(get(%L/Attacks`[locate(%#, %0, nP)]),4,1,:)]) aimed at [ansi(hy,[name(*[extract(get(%L/Attacks`[locate(%#, %0, nP)]),3,1,:)])])] receiving[if(gt([extract(get(%L/Attacks`[locate(%#, %0, nP)]),4,1,:)],get(%#/dat`dr)),[set(%L,Attacks`[locate(%#, %0, nP)]:[replace(get(%L/Attacks`[locate(%#, %0, nP)]),5,if(gte(%qC,100),ceil(mul(mul([extract(get(%L/Attacks`[locate(%#, %0, nP)]),5,1,:)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),[switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)]),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],1)]),1.5)),ceil(mul([extract(get(%L/Attacks`[locate(%#, %0, nP)]),5,1,:)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),[switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)]),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],1)]))),:)])] [extract(get(%L/Attacks`[locate(%#, %0, nP)]),5,1,:)] damage.[u(#253/func`Vitalitywound,[extract(get(%L/Attacks`[locate(%#, %0, nP)]),5,1,:)])] [set(%#,Dat`Vitality`Current:[max(sub(get(%#/Dat`Vitality`Current),[extract(get(%L/Attacks`[locate(%#, %0, nP)]),5,1,:)]),0)])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[extract(get(%L/Attacks`%#),2,1,:)])],[extract(get(%L/Attacks`%#),1,1,:)])])][if(match([extract(get(%L/Attacks`%#),7,1,:)],DoT,^),[u(#253/Func`DoT,[extract(get(%L/Attacks`%#),2,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[extract(get(%L/Attacks`%#),2,1,:)])],)],%bno damage.)][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
&FUNC`RESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)]))))
&FUNC`TARGETEDEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] lines up [art([u(#253/func`rating)])], [if(gt(words(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")),1),multi,[lcstr(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"))])]-ranged [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/Dat`AR)]) Targeting [ansi(hr,[name(locate(%#, %1, nP))])]!}, blah)]%r)]
&FUNC`TARGETEDRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),[ceil(sub(3,mul(3,[u(#253/func`adaptabilitymod,[edit(%0,%b,-)])])))])))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)])))])]
&FUNC`POWERFULEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] lets loose with a Powerful, [u(#253/func`rating)], [if(gt(words(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")),1),multi,[lcstr(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"))])]-ranged [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/Dat`AR)]) against [ansi(hr,[name(locate(%#, %1, nP))])]!}, blah)]%r)]
&FUNC`POWERFULRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),[ceil(sub(3,mul(3,[u(#253/func`adaptabilitymod,[edit(%0,%b,-)])])))])))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)])))])]
&FUNC`POWERFULRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),3),[if(hasattr(%#/Dat`Link),2,1)]))))
&FUNC`SENSERESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),200),gte(get(%#/Dat`Chakra`Current),500))
&FUNC`SENSERESOURCES #253=[set(%#,Dat`AP`Current:[if([member([get(%l/list`players)],%#)],[sub([get(%#/Dat`AP`Current)],1)],[get(%#/Dat`AP`Current)])])][set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),200)])][set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),500)])]
&FUNC`SCROLLRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul([switch(sqlite_query(Game, Select Rank from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)]"),E,100,D,200,C,300,B,400,A,500,S,600)],[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%0),1),3,1)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul([switch(sqlite_query(Game, Select Rank from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)]"),E,300,D,600,C,1000,B,1500,A,2500,S,4000)],[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%0),1),3,1)]))))
&FUNC`SCROLLRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add(3,[if([extract(get(%#/Dat`Link),2,1,|)],1)][if(gt(words(%0),1),3,0)])))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul([switch(sqlite_query(Game, Select Rank from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)]"),E,100,D,200,C,300,B,400,A,500,S,600)],[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%0),1),3,1)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul([switch(sqlite_query(Game, Select Rank from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)]"),E,300,D,600,C,1000,B,1500,A,2500,S,4000)],[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%0),1),3,1)])))])]
&FUNC`SCROLLEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] unseals a Scroll with [art([u(#253/func`rating)])], [if(gt(words(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")),1),multi,[lcstr(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"))])]-ranged %r%t[ansi(hg,Scroll Release: [caplist(%0)])]([get(%#/dat`ar)]) Jutsu against [ansi(hr,[name(locate(%#, %1, nP))])].}, blah)]%r)]
&FUNC`CRITMOD #253=[rand(ceil(add([ceil(mul(fdiv(sqrt(sub(add(mul(8,mul(fdiv([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),4)),1),1)),2),4))],extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),1,1,|))),add(100,add(ceil(mul(add([ceil(mul(fdiv(sqrt(sub(add(mul(8,mul(fdiv([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),4)),1),1)),2),4))],extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),1,1,|)),add([if(match([extract(get(%L/Attacks`%#),7,1,:)],Targeted,^),add(1.5,[u(#253/Func`EffectivenessMod,%0)]),1)],IF(hasattr([extract(get(%L/Attacks`%#),1,1,:)]/Dat`TF),IF(Match([sqlite_query(Game, Select Crit From Transformations Where Name="[get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`TF)]")],Yes),1.5,0),0)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],5),5),0)])))]
&FUNC`MITMOD #253=round(mul(add(add(get(%#/Dat`Mit),[if(and(hasattr(%#/Dat`BodyMod),match(Akimichi|Oomori,[get(%#/Dat`Clan)],|)),add(fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],20),.05),0)]),[IF(hasattr(%#/Dat`TF),IF(Match([sqlite_query(Game, Select Mit From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),[add(.5,mul([u(#253/Func`EffectivenessMod,%0)],[switch([sqlite_query(Game, Select Rank from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,.5,D,.55,C,.6,B,.65,A,.7,S,.75)]))],[add(.25,mul([u(#253/Func`EffectivenessMod,%0)],[switch([sqlite_query(Game, Select Rank from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,.5,D,.55,C,.6,B,.65,A,.7,S,.75)]))]),[add(.25,mul([u(#253/Func`EffectivenessMod,%0)],[switch([sqlite_query(Game, Select Rank from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,.5,D,.55,C,.6,B,.65,A,.7,S,.75)]))])]),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.25),.25,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),.5,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),.75,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),1)]),2)
&FUNC`PENMOD #253=Add(IF(hasattr(%0/Dat`TF),IF(Match([sqlite_query(Game, Select Pen From Transformations Where Name="[get(%0/Dat`TF)]")],Yes),.75,.25),.25),[if(and(hasattr(%0/Dat`BodyMod),match(Kaguya|Oomori,[get(%0/Dat`Clan)],|)),add(fdiv([after(extract(get(%0/Dat`ExpertiseList),[match(get(%0/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10),.05),0)])
&FUNC`PRECISIONTOTALROLL #253=Ceil(MUL(mul([u(#253/Func`PrecisionMod,%0)],.75),MUL(Add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),1,1,|)],.1)),[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Total)],0.8)),1.25,[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Total)],0.5)),1,[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Total)],0.3)),0.85,[IF(LT([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Total)],0.3)),1.3)])])])])))
&FUNC`POTENCYTOTALROLL #253=Ceil(MUL(mul([u(#253/Func`PotencyMod,%0)],[switch(get(#254/Dat`JutsuRanks),E,3,D,4,C,5,B,6,A,7,S,8)]),Mul(ADD(1,MUL([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),3,1,|)],.1)),[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Total)],0.8)),1.15,[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Total)],0.5)),1,[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Total)],0.3)),0.85,[IF(LT([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Total)],0.3)),1.25)])])])])))
&FUNC`TFRESOURCECHECK #253=[gte(get(%#/Dat`Stamina`Current),ceil(mul(get(%#/Dat`Stamina`Current),mul(.2,[switch(1,[eq(get(%#/Dat`TFRank`[edit(get(%#/Dat`TF),%b,-)]),1)],.75,[eq(get(%#/Dat`TFRank`[edit(get(%#/Dat`TF),%b,-)]),2)],.5,[eq(get(%#/Dat`TFRank`[edit(get(%#/Dat`TF),%b,-)]),3)],.25,1)]))))]
&FUNC`TFRESOURCES #253=[set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(get(%#/Dat`Stamina`Current),mul(.2,[switch(1,[eq(get(%#/Dat`TFRank`[edit(get(%#/Dat`TF),%b,-)]),1)],.75,[eq(get(%#/Dat`TFRank`[edit(get(%#/Dat`TF),%b,-)]),2)],.5,[eq(get(%#/Dat`TFRank`[edit(get(%#/Dat`TF),%b,-)]),3)],.25,1)]))))])]
&FUNC`COUNTERRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),add(1.5,if(gte(strlen(%1),2),2.5,0))),[if(hasattr(%#/Dat`Link),2,1)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),add(1.5,if(gte(strlen(%1),2),2.5,0))),[if(hasattr(%#/Dat`Link),2,1)]))))
&FUNC`COUNTERRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),[ceil(sub(add(1,[if(gte(strlen(%1),2),3,0)]),mul(add(1,[if(gte(strlen(%1),2),3,0)]),[u(#253/func`adaptabilitymod,[edit(%0,%b,-)])])))])))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),add(1.5,if(gte(strlen(%1),2),2.5,0))),[if(hasattr(%#/Dat`Link),2,1)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),add(1.5,if(gte(strlen(%1),2),2.5,0))),[if(hasattr(%#/Dat`Link),2,1)])))])]
&FUNC`COUNTERCRITMOD #253=[rand(ceil(add(fdiv(mul(fdiv([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),100),10),extract(get(%#/Dat`JutsuAttributes`%0),2,1,|))),add(100,add(ceil(mul(add(fdiv(mul(fdiv([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),100),10),extract(get(%#/Dat`JutsuAttributes`%0),2,1,|)),add([if(match(%1,Targeted,^),1.25,1)],IF(hasattr(%#/Dat`TF),IF(Match([sqlite_query(Game, Select Crit From Transformations Where Name="[get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`TF)]")],Yes),.75,0),0)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],5),5),0)])))]
&FUNC`COUNTERVITWOUND #253=[switch(1,gt(%0,mul(max(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`Vitality`Max),get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`Vitality`Total)),.1)),[set([extract(get(%L/Attacks`%#),1,1,:)],Dat`Vitality`Max:[ceil(add(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`Vitality`Max),sub(mul(max(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`Vitality`Max),get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`Vitality`Total)),.1),%0)))])][ansi(Hr,A wound was suffered!)],0,)]
&FUNC`COUNTEREMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Max)],0.8)),[switch(rand(3),0,Vigorous,1,Naturally,2,Effortlessly)],[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Max)],0.6)),[switch(rand(3),0,Winded,1,Sweating,2,Panting)],[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`max)],0.3)),[switch(rand(3),0,Pressured,1,Strained,2,Tired)],[IF(LT([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Max)],0.3)),[switch(rand(3),0,Determined,1,Fierce,2,Fervent)])])])])], [ansi(hm,%N)] counters with [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),8,1,|)])]([get(%#/dat`dr)]) against [ansi(hr,[name([extract(get(%L/Attacks`%#),1,1,:)])]'s [caplist(extract(get(%L/Attacks`%#),2,1,:))])]([extract(get(%L/Attacks`%#),4,1,:)]) [if(gt([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),[setq(1,[u(#253/Func`CritMod,%0)])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,if(gte(%q1,100),ceil(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])])],.2))),1.5)),[ceil(mul(extract(get(%L/Attacks`%#),5,1,:),sub(1,[u(#253/Func`MitMod,%0)],[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])])))]),:)])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,[max(0,sub([extract(get(%L/Attacks`%#),5,1,:)],[ceil(mul(mul(add(ceil(mul([u(#253/Func`PotencyMod,%0)],add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],25),25),0)]),[u(#253/Func`DRMod,%0)]),[switch([sqlite_query(Game, Select Rank From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,1.25,C,1.5,B,1.75,A,2.25,S,3)]))]))],:)])][if(gte(%q1,100),receiving [ansi(hr, [max(0,[extract(get(%L/Attacks`%#),5,1,:)])] CRITICAL damage!)],receiving [max(0,[extract(get(%L/Attacks`%#),5,1,:)])] damage.)] [u(#253/func`Vitalitywound,[extract(get(%L/Attacks`%#),5,1,:)])] [set(%#,Dat`Vitality`Current:[max(0,sub(get(%#/Dat`Vitality`Current),[extract(get(%L/Attacks`%#),5,1,:)]))])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[setq(6,min(6,rand(match(get(#254/Dat`JutsuRanks),[sqlite_query(Game, Select Rank From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],|),6)))][set(%#,Dat`AP`Current:[max(sub(get(%#/Dat`AP`Current),%q6),0)])][switch(%q6,1,%r%r%N suffers [art(misstep.)],2,%r%r%N suffers [art(winding blow.)],3,%r%r%N suffers [art(unbalancing blow.)],4,%r%r%N suffers [art(staggering blow!)],5,%r%r%N suffers [art(disorienting hit!)],6,%r%r%N suffers [art(dazing hit!)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],DoT),[u(#253/Func`DoT,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[edit(%1,%b,-)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Absorb,^),[u(#253/func`Absorb,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),3,1,:)])],)],[setq(2,[u(#253/Func`CounterCritMod,%1,%2)])][set(%#,Dat`CounterDam:[if(gte(%q2,100),ceil(mul(get(%#/Dat`Damage),1.5)),get(%#/Dat`Damage))])][if(gte(%q2,100),dealing [ansi(hr,[get(%#/Dat`CounterDam)] CRITICAL  damage!)],dealing [get(%#/Dat`CounterDam)] damage.)] [u(#253/func`CounterVitwound,[get(%#/Dat`CounterDam)])] [set([extract(get(%L/Attacks`%#),1,1,:)],Dat`Vitality`Current:[max(sub(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`Vitality`Current),[get(%#/Dat`CounterDam)]),0)])][If([match(%2,Disrupt,^)],[setq(6,min(6,rand(match(get(#254/Dat`JutsuRanks),[sqlite_query(Game, Select Rank From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],|),6)))][set([extract(get(%L/Attacks`%#),1,1,:)],Dat`AP`Current:[max(sub(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`AP`Current),%q6),0)])][switch(%q6,1,%r%r[name([extract(get(%L/Attacks`%#),1,1,:)])] suffers [art(misstep.)],2,%r%r[name([extract(get(%L/Attacks`%#),1,1,:)])] suffers [art(winding blow.)],3,%r%r[name([extract(get(%L/Attacks`%#),1,1,:)])] suffers [art(unbalancing blow.)],4,%r%r[name([extract(get(%L/Attacks`%#),1,1,:)])] suffers [art(staggering blow!)],5,%r%r[name([extract(get(%L/Attacks`%#),1,1,:)])] suffers [art(disorienting hit!)],6,%r%r[name([extract(get(%L/Attacks`%#),1,1,:)])] suffers [art(dazing hit!)])],)][if(match(%2,DoT),[if(!hasattr([extract(get(%L/Attacks`%#),1,1,:)]/Dat`DoT),%r%r%t [name([extract(get(%L/Attacks`%#),1,1,:)])] is afflicted by a DoT for [setr(0,[rand(5,8)])] rounds![set([extract(get(%L/Attacks`%#),1,1,:)],Dat`DoT:[floor(fdiv(get(%#/Dat`CounterDam),r(0)))]|r(0))],%r%r%T [name([extract(get(%L/Attacks`%#),1,1,:)])] is additionally afflicted by a DoT for [add([extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`DoT),2,1,|)],[setr(0,[rand(5,8)])])] rounds! [set([extract(get(%L/Attacks`%#),1,1,:)],Dat`DoT:[add([extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`DoT),1,1,|)],floor(mul(fdiv(get(%#/Dat`CounterDam),r(0)),.33)))]|[add([extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`DoT),2,1,|)],r(0))])])],)][if(match(%2,Drain,^),[u(#253/func`Drain,[edit(%0,%b,-)])],)][if(match(%2,Absorb,^),[u(#253/func`Absorb,[edit(%0,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)])][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]


&FUNC`CLASHRESOURCECHECK #253=or(lte(get(%#/Dat`Stamina`Current),ceil(div(get(%#/Dat`Stamina`Max),2))),lte(get(%#/Dat`Vitality`Current),ceil(div(get(%#/Dat`Vitality`Max),2))))
&FUNC`CLASHRESOURCES #253=[set(%#,Dat`AP`Current:0)][set(%#,Dat`PhysicalEnergy`Current:[max(sub(get(%#/Dat`PhysicalEnergy`Current),ceil(mul(get(%#/Dat`PhysicalEnergy`Total),.2))),0)])][set(%#,Dat`Stamina`Current:[max(sub(get(%#/Dat`Stamina`Current),ceil(mul(get(%#/Dat`PhysicalEnergy`Total),.1))),0)])][set(%#,Dat`SpiritualEnergy`Current:[max(sub(get(%#/Dat`SpiritualEnergy`Current),ceil(mul(get(%#/Dat`SpiritualEnergy`Total),.2))),0)])][set(%#,Dat`Chakra`Current:[max(sub(get(%#/Dat`Chakra`Current),ceil(mul(get(%#/Dat`SpiritualEnergy`Total),.1))),0)])]
&FUNC`CLASHEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Max)],0.8)),[switch(rand(3),0,vigorously,1,naturally,2,effortlessly)],[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Max)],0.6)),[switch(rand(3),0,windedly,1,breathlessly,2,perspiringly)],[IF(GTE([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`max)],0.3)),[switch(rand(3),0,\,feeling pressured\,,1,\,showing strain\,,2,tiredly)],[IF(LT([get(%#/Dat`Stamina`Current)],MUL([get(%#/Dat`Stamina`Max)],0.3)),[switch(rand(3),0,\,digging deep\,,1,\,pushing beyond their limits\,,2,\,giving it all they've got\,)])])])])] Clashes with [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`dr)]) against [ansi(hr,[name([extract(get(%L/Attacks`%#),1,1,:)])]'s [caplist(extract(get(%L/Attacks`%#),2,1,:))])]([extract(get(%L/Attacks`%#),4,1,:)]) [if(gt([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),[setq(1,[sub([u(#253/Func`CritMod,%0)],min(0,mul([u(#253/Func`FormMod,%0)],-5)))])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,if(gte(%q1,100),ceil(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])])]))),3)),[ceil(mul(mul(extract(get(%L/Attacks`%#),5,1,:),sub(1,[u(#253/Func`MitMod,%0)],[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])])),2))]),:)])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,[max(0,sub([extract(get(%L/Attacks`%#),5,1,:)],[ceil(mul(mul(add(ceil(mul([u(#253/Func`PotencyMod,%0)],add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],25),25),0)]),[u(#253/Func`DRMod,%0)]),[switch([sqlite_query(Game, Select Rank From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,1.25,C,1.5,B,1.75,A,2.25,S,3)]))]))],:)])][if(gte(%q1,100),receiving [ansi(hr, [max(0,[extract(get(%L/Attacks`%#),5,1,:)])] CRITICAL damage!)],receiving [max(0,[extract(get(%L/Attacks`%#),5,1,:)])] damage.)] [u(#253/func`Vitalitywound,[extract(get(%L/Attacks`%#),5,1,:)])] [set(%#,Dat`Vitality`Current:[max(0,sub(get(%#/Dat`Vitality`Current),[extract(get(%L/Attacks`%#),5,1,:)]))])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],DoT),[u(#253/Func`DoT,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[edit(%1,%b,-)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Absorb,^),[u(#253/func`Absorb,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),3,1,:)])],)],[setq(2,[u(#253/Func`CounterCritMod,%1,%2)])][set(%#,Dat`CounterDam:[if(gte(%q2,100),ceil(mul(mul(get(%#/Dat`Damage),sub(1,sub([u(#253/Func`MitMod)],[add(if(match(%2,Powerful,^),.3),[u(#253/Func`PenMod,%#)])]))),3)),[ceil(mul(mul(get(%#/Dat`Damage),sub(1,[u(#253/Func`MitMod)],[u(#253/Func`PenMod,%#)])),2))])])][if(gte(%q2,100),dealing [ansi(hr,[get(%#/Dat`CounterDam)] CRITICAL damage!)],dealing [get(%#/Dat`CounterDam)] damage.)] [u(#253/func`CounterVitwound,[get(%#/Dat`CounterDam)])] [set([extract(get(%L/Attacks`%#),1,1,:)],Dat`Vitality`Current:[max(sub(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`Vitality`Current),[get(%#/Dat`CounterDam)]),0)])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match(%2,DoT),[if(!hasattr([extract(get(%L/Attacks`%#),1,1,:)]/Dat`DoT),%r%r%t [name([extract(get(%L/Attacks`%#),1,1,:)])] is afflicted by a DoT for [setr(0,[rand(5,8)])] rounds![set([extract(get(%L/Attacks`%#),1,1,:)],Dat`DoT:[floor(fdiv(get(%#/Dat`CounterDam),r(0)))]|r(0))],%r%r%T [name([extract(get(%L/Attacks`%#),1,1,:)])] is additionally afflicted by a DoT for [add([extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`DoT),2,1,|)],[setr(0,[rand(5,8)])])] rounds! [set([extract(get(%L/Attacks`%#),1,1,:)],Dat`DoT:[add([extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`DoT),1,1,|)],floor(mul(fdiv(get(%#/Dat`CounterDam),r(0)),.33)))]|[add([extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`DoT),2,1,|)],r(0))])])],)][if(match(%2,Drain,^),[u(#253/func`Drain,[edit(%0,%b,-)])],)][if(match(%2,Absorb,^),[u(#253/func`Absorb,[edit(%0,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)])][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
&FUNC`EVADERESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,2.5)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)]))))
&FUNC`EVADERESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),2)))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),3)))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),3)))])]
&FUNC`EVADEEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] Evades with [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`dr)]) against [ansi(hr,[name([extract(get(%L/Attacks`%#),1,1,:)])]'s [caplist(extract(get(%L/Attacks`%#),2,1,:))])]([extract(get(%L/Attacks`%#),4,1,:)]) receiving[if(gt([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),[setq(C,[ceil(mul(mul(add([u(#253/Func`CritMod,%0)],add(max(0,mul([u(#253/Func`FormMod,%0)],-3)),mul([u(#253/Func`FormDefMod,%1,[extract(get(%L/Attacks`%#),1,1,:)])],3))),[switch(after(grab(get(%#/dat`expertiseList), Targeted*, |), ^),0,1.5,1,2,2,3,1.5)]),[switch(after(grab(get(%#/dat`expertiseList), Evasive Maneuvers*, |), ^),0,1,1,.5,2,0,1)]))])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,if(gte(%qC,100),[ceil(mul(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],.2)]))),2),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1.5,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),1.3,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),1.15,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),1)]))],[ceil(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],.2)]))),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1.5,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),1.3,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),1.15,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),1)]))]),:)])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,[max(0,sub([extract(get(%L/Attacks`%#),5,1,:)],[ceil(mul(mul(add(ceil(mul([u(#253/Func`PotencyMod,%0)],add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],25),25),0)]),[u(#253/Func`DRMod,%0)]),[switch([sqlite_query(Game, Select Rank From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,1.25,C,1.5,B,1.75,A,2.25,S,3)]))]))],:)])][extract(get(%L/Attacks`%#),5,1,:)][if(gte(%qC,100),%b[ansi(hr,CRITICAL damage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)]!)],%bdamage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)].)] [u(#253/func`Vitalitywound,[extract(get(%L/Attacks`%#),5,1,:)])] [set(%#,Dat`Vitality`Current:[max(0,sub(get(%#/Dat`Vitality`Current),[extract(get(%L/Attacks`%#),5,1,:)]))])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[edit(%1,%b,-)])],[extract(get(%L/Attacks`%#),1,1,:)])][if(match([extract(get(%L/Attacks`%#),7,1,:)],DoT,^),[u(#253/Func`DoT,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[edit(%1,%b,-)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Absorb,^),[u(#253/func`Absorb,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)],%bno damage.)][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
&FUNC`BLOCKRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)]))))
&FUNC`BLOCKRESOURCES #253=[set(%#,Dat`AP`Current:[max(0,sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),1))))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,1.5)])))])]
&FUNC`BLOCKEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] Blocks with [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),8,1,|)])]([get(%#/dat`dr)]) against [ansi(hr,[name([extract(get(%L/Attacks`%#),1,1,:)])]'s [caplist(extract(get(%L/Attacks`%#),2,1,:))])]([extract(get(%L/Attacks`%#),4,1,:)]) receiving[if(gt([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),[setq(C,[ceil(mul(add([u(#253/Func`CritMod,%0)],add(max(0,mul(mul([u(#253/Func`FormMod,%0)],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit([extract(get(%L/Attacks`%#),2,1,:)],%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,.5)]),-3)),mul(mul([u(#253/Func`FormDefMod,%1,[extract(get(%L/Attacks`%#),1,1,:)])],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,1)]),5))),[switch(after(grab(get(%#/dat`expertiseList), Targeted*, |), ^),0,1.5,1,2,2,3,1.5)]))])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,if(gte(%qC,100),[ceil(mul(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],[switch(after(grab(get(%#/dat`expertiseList), Fortification*, |), ^),0,-.3,1,-.4,2,-.5,-.3)])]))),2),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),.9,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.8,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.75)]))],[ceil(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],[switch(after(grab(get(%#/dat`expertiseList), Fortification*, |), ^),0,-.3,1,-.4,2,-.5,-.3)])]))),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),.9,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.8,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.75)]))]),:)])] [set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,[max(0,sub([extract(get(%L/Attacks`%#),5,1,:)],[ceil(mul(mul(add(ceil(mul([u(#253/Func`PotencyMod,%0)],add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],25),25),0)]),[u(#253/Func`DRMod,%0)]),[switch([sqlite_query(Game, Select Rank From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,1.25,C,1.5,B,1.75,A,2.25,S,3)]))]))],:)])][extract(get(%L/Attacks`%#),5,1,:)][if(gte(%qC,100),%b[ansi(hr,CRITICAL damage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)]!)],%bdamage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)].)] [u(#253/func`Vitalitywound,[extract(get(%L/Attacks`%#),5,1,:)])] [set(%#,Dat`Vitality`Current:[max(0,sub(get(%#/Dat`Vitality`Current),[extract(get(%L/Attacks`%#),5,1,:)]))])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[edit(%1,%b,-)])],[extract(get(%L/Attacks`%#),1,1,:)])][if(match([extract(get(%L/Attacks`%#),7,1,:)],DoT,^),[u(#253/Func`DoT,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[edit(%1,%b,-)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Absorb,^),[u(#253/func`Absorb,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)],%bno damage. [if(match(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),2),[set(%#,Dat`Chakra`Current:[min(get(%#/Dat`Chakra`Max),add(get(%#/Dat`Chakra`Current),[sqlite_query(Game, Select Chakra From Templates where ID=[extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)])]))])] [ansi(hm,%N)] has absorbed [sqlite_query(Game, Select Chakra From Templates where ID=[extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)])] Chakra from the [caplist(%1)] jutsu!)] )][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
&FUNC`REFLECTIONRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),add(1.5,if(gte(strlen(%1),2),2.5,0))),[if(hasattr(%#/Dat`Link),2,1)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),add(3,if(gte(strlen(%1),2),2.5,0))),[if(hasattr(%#/Dat`Link),2,1)]))))
&FUNC`REFLECTIONRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,ceil(add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),[u(#253/func`adaptabilitymod,[edit(%0,%b,-)])],3))))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),add(1.5,if(gte(strlen(%1),2),2.5,0))),[if(hasattr(%#/Dat`Link),2,1)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),add(3,if(gte(strlen(%1),2),2.5,0))),[if(hasattr(%#/Dat`Link),2,1)])))])]
&FUNC`REFLECTIONEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] Reflects with [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`dr)]) against [ansi(hr,[name([extract(get(%L/Attacks`%#),1,1,:)])]'s [caplist(extract(get(%L/Attacks`%#),2,1,:))])]([extract(get(%L/Attacks`%#),4,1,:)]) [if(gt([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),[setq(1,[sub([u(#253/Func`CritMod,%0)],min(0,mul([u(#253/Func`FormMod,%0)],-5)))])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,if(gte(%q1,100),[ceil(mul(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])])]))),[switch(after(grab(get(%#/dat`expertiseList), Reflection*, |), ^),0,3,1,2,2,2,3)]),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),.9,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.8,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.75)]))],[ceil(mul(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])])]))),[switch(after(grab(get(%#/dat`expertiseList), Reflection*, |), ^),0,2.5,1,1.5,2,1.5,2.5)]),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),.9,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.8,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.75)]))]),:)])][if(gte(%q1,100),receiving [ansi(hr, [max(0,sub([extract(get(%L/Attacks`%#),5,1,:)],[ceil(mul(add(ceil(mul([u(#253/Func`PotencyMod,%0)],add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],25),25),0)]),[u(#253/Func`DRMod,%0)]))]))] CRITICAL damage!)],receiving [max(0,sub([extract(get(%L/Attacks`%#),5,1,:)],[ceil(mul(add(ceil(mul([u(#253/Func`PotencyMod,%0)],add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],25),25),0)]),[u(#253/Func`DRMod,%0)]))]))] damage.)] [u(#253/func`Vitalitywound,[extract(get(%L/Attacks`%#),5,1,:)])] [set(%#,Dat`Vitality`Current:[max(0,sub(get(%#/Dat`Vitality`Current),[max(0,sub([extract(get(%L/Attacks`%#),5,1,:)],[ceil(mul(add(ceil(mul([u(#253/Func`PotencyMod,%0)],add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],25),25),0)]),[u(#253/Func`DRMod,%0)]))]))]))])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],DoT),[u(#253/Func`DoT,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[edit(%1,%b,-)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Absorb,^),[u(#253/func`Absorb,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),3,1,:)])],)],[setq(2,[sub([u(#253/Func`CritMod,%0)],min(0,mul([u(#253/Func`FormMod,%0)],-5)))])][set(%#,Dat`CounterDam:[if(gte(%q1,100),[ceil(mul([extract(get(%L/Attacks`%#),5,1,:)],[switch(after(grab(get(%#/dat`expertiseList), Reflection*, |), ^),0,2,1,3,2,4,2)]))],[ceil(mul(extract(get(%L/Attacks`%#),5,1,:),[switch(after(grab(get(%#/dat`expertiseList), Reflection*, |), ^),0,1.5,1,2,2,2.5,1.5)]))])])][if(gte(%q1,100),dealing [ansi(hr,[get(%#/Dat`CounterDam)] CRITICAL damage!)],dealing [get(%#/Dat`CounterDam)] damage.)] [u(#253/func`CounterVitwound,[get(%#/Dat`CounterDam)])] [set([extract(get(%L/Attacks`%#),1,1,:)],Dat`Vitality`Current:[max(sub(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`Vitality`Current),[get(%#/Dat`CounterDam)]),0)])])][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
&FUNC`REGENRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),1),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(10000,[if(hasattr(%#/Dat`Link),2,1)]),[if([match(get(%#/Dat`AffinityList),Yang,|)],.75,1)]))))
&FUNC`REGENRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),ceil(mul(add(4,[if([extract(get(%#/Dat`Link),2,1,|)],1)]),[if([match(get(%#/Dat`AffinityList),Yang,|)],.75,1)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(10000,[if(hasattr(%#/Dat`Link),2,1)]),[if([match(get(%#/Dat`AffinityList),Yang,|)],.75,1)])))])]
&FUNC`REGENEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)] Regenerates Vitality! }, blah)]%r)] [pemit(%#,%r[prompt(Combat)] You have regenerated [sub(ceil(mul(add(get(%#/Dat`Vitality`Current),[if(lte(mul(get(%#/Dat`Vitality`Total),.3),[sub(get(%#/Dat`Vitality`Max),get(%#/Dat`Vitality`Current))]),mul(get(%#/Dat`Vitality`Total),.3),[sub(get(%#/Dat`Vitality`Max),get(%#/Dat`Vitality`Current))])]),[switch(after(grab(get(%#/dat`expertiseList), Regeneration*, |), ^),0,1,1,1.1,2,1.2,1)])),get(%#/Dat`Vitality`Current))] Vitality.)]
&FUNC`BARRIERRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[add(1,words(%1))]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[add(1,words(%1))]))))
&FUNC`BARRIERRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)],5))))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[add(1,words(%1))])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[add(1,words(%1))])))])]
&FUNC`BARRIERDUR #253=[set(%L,Dat`BarDur`%#:[ceil(mul(mul(switch([sqlite_query(Game, Select Rank From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,2,C,3,B,4,A,5,S,6),ceil(mul(mul(300,add([u(#253/Func`EffectivenessMod,%0)],1)),mul([u(#253/Func`DRMod,[edit(%0,%b,-)])],[switch(after(grab(get(%#/dat`expertiseList), Barrier*, |), ^),0,1,1,1.5,2,2,1)])))),%1))])]
&FUNC`DRMOD #253=Add(IF(hasattr(%#/Dat`TF),IF(match([sqlite_query(Game, Select DR From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.5,1),1),add(mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1),[if(and(hasattr(%#/Dat`BodyMod),match(Hozuki,[get(%#/Dat`Clan)],|)),add(fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],10),.1),0)]))
&FUNC`BARRIEREMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] erected a Barrier with [if(hasattr(%L/Dat`BarDur`%#),[get(%L/Dat`BarDur`%#)],no remaining)] durability utilizing [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),8,1,|)])]([get(%#/dat`dr)]) against [ansi(hr,[name([extract(get(%L/Attacks`%#),1,1,:)])]'s [caplist(extract(get(%L/Attacks`%#),2,1,:))])]([extract(get(%L/Attacks`%#),4,1,:)]) [if(gt([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),[setq(C,[ceil(mul(add([u(#253/Func`CritMod,%0)],add(max(0,mul(mul([u(#253/Func`FormMod,%0)],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit([extract(get(%L/Attacks`%#),2,1,:)],%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,.5)]),-3)),mul(mul([u(#253/Func`FormDefMod,%1,[extract(get(%L/Attacks`%#),1,1,:)])],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,1)]),5))),[switch(after(grab(get(%#/dat`expertiseList), Targeted*, |), ^),0,1.5,1,2,2,3,1.5)]))])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,if(gte(%qC,100),[ceil(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod)])])),2))],[ceil(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod)])])))]),:)])][if(gt(get(%L/Dat`BarDur`%#),[ceil(sub([extract(get(%L/Attacks`%#),5,1,:)],[u(#253/Func`DRMod,%0)]))]),[set(%L,Dat`BarDur`%#:[max(ceil(sub(get(%L/Dat`BarDur`%#),max(ceil(sub([extract(get(%L/Attacks`%#),5,1,:)],[u(#253/Func`DRMod,%0)])),0))),0)])]and the Barrier endures [max(ceil(sub([extract(get(%L/Attacks`%#),5,1,:)],[u(#253/Func`DRMod,%0)])),0)] damage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)] leaving it's durabiltiy at [get(%L/Dat`BarDur`%#)]. [set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,0,:)])],recieving [if(hasattr(%L/Dat`BarDur`%#),[set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,[max(ceil(sub([extract(get(%L/Attacks`%#),5,1,:)],get(%L/Dat`BarDur`%#))),0)],:)])][extract(get(%L/Attacks`%#),5,1,:)][if(gte(%qC,100),%b[ansi(hr,CRITICAL damage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)]!)],%bdamage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)].)] The barrier has been broken![set(%L,Dat`BarDur`%#:)],[set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,[max(ceil(sub([extract(get(%L/Attacks`%#),5,1,:)],get(%L/Dat`BarDur`%#))),0)],:)])][set(%L,Dat`BarDur`%#:)][extract(get(%L/Attacks`%#),5,1,:)][if(gte(%qC,100),%b[ansi(hr,CRITICAL damage!)] [if(lt(get(%L/Dat`BarDur`%#),[extract(get(%L/Attacks`%#),5,1,:)]), The Barrier has been broken!)],%bdamage. [if(lt(get(%L/Dat`BarDur`%#),[extract(get(%L/Attacks`%#),5,1,:)]), The Barrier has been broken!)])])])] [u(#253/func`Vitalitywound,[extract(get(%L/Attacks`%#),5,1,:)])] [set(%#,Dat`Vitality`Current:[max(0,ceil(sub(get(%#/Dat`Vitality`Current),[extract(get(%L/Attacks`%#),5,1,:)])))])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[edit(%1,%b,-)])],[extract(get(%L/Attacks`%#),1,1,:)])][if(and(match([extract(get(%L/Attacks`%#),7,1,:)],DoT,^),!hasattr(%L/Dat`BarDur`%#)),[u(#253/Func`DoT,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[edit(%1,%b,-)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Absorb,^),[u(#253/func`Absorb,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)],weathering the entire attack! [if(match(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),2),[set(%#,Dat`Chakra`Current:[min(get(%#/Dat`Chakra`Max),add(get(%#/Dat`Chakra`Current),[sqlite_query(Game, Select Chakra From Templates where ID=[extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)])]))])] [ansi(hm,%N)] has absorbed [sqlite_query(Game, Select Chakra From Templates where ID=[extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)])] Chakra from the [caplist(%1)] jutsu!)])][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
&FUNC`DISRUPTRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),4,2)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),4,2)]))))
&FUNC`DISRUPTRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)][if(gt(words(%1),1),3,2)]))))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),4,2)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)])],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),4,2)])))])]
&FUNC`DISRUPTEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] initiates Disruption with [art([u(#253/func`rating)])], [if(gt(words(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")),1),multi,[lcstr(sqlite_query(Game, Select Range from Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"))])]-ranged [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`ar)]) against [ansi(hr,[name(locate(%#, %1, nP))])].}, blah)]%r)]
&FUNC`STEALTHCHECK #253=ceil(mul(mul(rand(mul([u(#245/func`StealthChallenge,%0,%1)],.6),add([u(#245/func`StealthChallenge,%0,%1)],10)),IF(hasattr(%#/Dat`TF),IF(match([sqlite_query(Game, Select Perception From Transformations Where Name="[get(%#/Dat`TF)]")],Yes),1.25,1),1)),[if(match([extract(get(%#/Dat`Control),2,1,|)],General,|),[switch(after(grab(get([locate(%#,%1,nP)]/dat`expertiseList), Control*, |), ^),0,.8,1,.75,2,.66,.8)],1)]))
&FUNC`DISRUPT #253=[setq(6,min(6,rand([switch(after(grab(get(%1/dat`expertiseList), Disruption*, |), ^),1,1,2,2,0)],add([switch(match(get(#254/Dat`JutsuRanks),[sqlite_query(Game, Select Rank From Templates where ID=[extract(get(%1/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],|),1,3,2,4,3,5,4,5,5,6,6,6)],ceil(mul([u(#253/func`EffectivenessMod,[edit(%0,%b,-)])],2))))))][set(%1,Dat`AP`Current:[max(sub(get(%1/Dat`AP`Current),%q6),0)])][switch(%q6,0,%r%r%N remains unfazed!(-0),1,%r%r%N suffers [art(misstep.)](-1),2,%r%r%N suffers [art(winding blow.)](-2),3,%r%r%N suffers [art(unbalancing blow.)](-3),4,%r%r%N suffers [art(staggering blow!)](-4),5,%r%r%N suffers [art(disorienting hit!)](-5),6,%r%r%N suffers [art(dazing hit!)](-6))]
&FUNC`TURTLEEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] Turtles with [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`dr)]) against [ansi(hr,[name([extract(get(%L/Attacks`%#),1,1,:)])]'s [caplist(extract(get(%L/Attacks`%#),2,1,:))])]([extract(get(%L/Attacks`%#),4,1,:)]) receiving[if(gt([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),[setq(C,[ceil(mul(add([u(#253/Func`CritMod,%0)],add(max(0,mul(mul([u(#253/Func`FormMod,%0)],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit([extract(get(%L/Attacks`%#),2,1,:)],%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,.5)]),-3)),mul(mul([u(#253/Func`FormDefMod,%1,[extract(get(%L/Attacks`%#),1,1,:)])],[switch([sqlite_query(Game, Select Category From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],Taijutsu,1,Ninjutsu,1)]),5))),[switch(after(grab(get(%#/dat`expertiseList), Targeted*, |), ^),0,1.5,1,2,2,3,1.5)]))])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,if(gte(%qC,100),[ceil(mul(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],[switch(after(grab(get(%#/dat`expertiseList), Fortification*, |), ^),0,-.4,1,-.5,2,-.6,-.4)])],.2))),2),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),.9,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.8,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.75)]))],[ceil(mul(extract(get(%L/Attacks`%#),5,1,:),mul(sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],[switch(after(grab(get(%#/dat`expertiseList), Fortification*, |), ^),0,-.4,1,-.5,2,-.6,-.4)])],.2)),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),.9,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.8,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),.75)])))]),:)])] [set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,[max(0,sub([extract(get(%L/Attacks`%#),5,1,:)],[ceil(mul(mul(add(ceil(mul([u(#253/Func`PotencyMod,%0)],add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],25),25),0)]),[u(#253/Func`DRMod,%0)]),[switch([sqlite_query(Game, Select Rank From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,1.25,C,1.5,B,1.75,A,2.25,S,3)]))]))],:)])][extract(get(%L/Attacks`%#),5,1,:)][if(gte(%qC,100),%b[ansi(hr,CRITICAL damage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)]!)],%bdamage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)].)] [u(#253/func`Vitalitywound,[extract(get(%L/Attacks`%#),5,1,:)])] [set(%#,Dat`Vitality`Current:[max(0,sub(get(%#/Dat`Vitality`Current),[extract(get(%L/Attacks`%#),5,1,:)]))])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[edit(%1,%b,-)])],[extract(get(%L/Attacks`%#),1,1,:)])][if(match([extract(get(%L/Attacks`%#),7,1,:)],DoT,^),[u(#253/Func`DoT,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[edit(%1,%b,-)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Absorb,^),[u(#253/func`Absorb,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)],%bthe entire attack! [if(match(after(grab(get(%#/dat`expertiseList), Chakra Absorption*, |), ^),2),[set(%#,Dat`Chakra`Current:[min(get(%#/Dat`Chakra`Max),add(get(%#/Dat`Chakra`Current),[sqlite_query(Game, Select Chakra From Templates where ID=[extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)])]))])] [ansi(hm,%N)] has absorbed [sqlite_query(Game, Select Chakra From Templates where ID=[extract(get([extract(get(%L/Attacks`%#),1,1,:)]/Dat`JutsuAttributes`[edit(%1,%b,-)]),7,1,|)])] Chakra from the [caplist(%1)] jutsu!)] )][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
&FUNC`TURTLERESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,3)]))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,3)]))))
&FUNC`TURTLERESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,add([sqlite_query(Game, Select AP From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],add([u(#253/func`formmod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)],4))))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,3)])))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`efficiencymod,%0)])),[if(hasattr(%#/Dat`Link),2,1)]),[if(gt(words(%1),1),3,3)])))])]
&FUNC`DOT #253=[setq(0,[rand([sub(5,mul([after(grab(get(extract(get(%L/Attacks`%#),1,1,:)/dat`expertiseList), Attrition*, |), ^)],2))],[sub(8,mul(add(1,[after(grab(get(extract(get(%L/Attacks`%#),1,1,:)/dat`expertiseList), Attrition*, |), ^)]),2))])])]  [if(!hasattr(%#/Dat`DoT),%r%r%t %N is afflicted by a DoT for %q0 rounds! [set(%#,Dat`DoT:[ceil(mul(floor(fdiv(add([switch([sqlite_query(Game, Select Rank From Templates where ID="[extract(get(extract(get(%L/Attacks`%#),1,1,:)/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,[rand(100,250)],D,[rand(250,500)],C,[rand(500,1000)],B,[rand(1000,1500)],A,[rand(1500,2000)],S,[rand(2000,3000)])],mul(get(extract(get(%L/Attacks`%#),1,1,:)/Dat`Vitality`Total),.01)),%q0)),add([u(#253/Func`EffectivenessMod,%0)],1)))]|%q0)],%r%r%T %N is additionally afflicted by a DoT for [add([extract(get(%#/Dat`DoT),2,1,|)],%q0)] rounds! [set(%#,Dat`DoT:[ceil(add([extract(get(%#/Dat`DoT),1,1,|)],floor(mul(fdiv(add([switch([sqlite_query(Game, Select Rank From Templates where ID="[extract(get(extract(get(%L/Attacks`%#),1,1,:)/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,150,D,300,C,700,B,1000,A,1500,S,2000)],mul(get(extract(get(%L/Attacks`%#),1,1,:)/Dat`Vitality`Total),.01)),%q0),.75))))]|[add([extract(get(%#/Dat`DoT),2,1,|)],%q0)])])]
&FUNC`TAGEMIT #253=[setq(1,[u(#253/Func`PerceptionCheck,%#)])][setq(2,[u(#253/Func`PerceptionCheck,[locate(%#, %1, nP)])])][setq(3,rand(3))][setq(4,rand(ceil(mul(get([locate(%#, %1, nP)]/Dat`Chakra`Max),.03)),ceil(mul(get([locate(%#, %1, nP)]/Dat`Chakra`Max),.06))))][remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)] unseals [ansi(hg,[caplist(%0,,,L)])](%q1) against [ansi(hr,[name([locate(%#, %1, nP)])])]'s awareness(%q2).[if(gte(%q1,%q2),%b[name(locate(%#, %1, nP))] is caught off guard and receives [switch(%2,Damage,[mul(4000,[switch(1,lte(fdiv(%q2,%q1),.5),1,lte(fdiv(%q2,%q1),.75),.9,lte(fdiv(%q2,%q1),.9),.75,gt(fdiv(%q2,%q1),.9),.5)])],Drain,[mul(1500,[switch(1,lte(fdiv(%q2,%q1),.5),1,lte(fdiv(%q2,%q1),.75),.9,lte(fdiv(%q2,%q1),.9),.75,gt(fdiv(%q2,%q1),.9),.5)])],Disrupt,[mul(1000,[switch(1,lte(fdiv(%q2,%q1),.5),1,lte(fdiv(%q2,%q1),.75),.9,lte(fdiv(%q2,%q1),.9),.75,gt(fdiv(%q2,%q1),.9),.5)])])] damage.[If([match(Disrupt,%2)],%bAP is also reduced by %q3. [set([locate(%#, %1, nP)],Dat`AP`Current:[max(0,sub(Get([locate(%#, %1, nP)]/Dat`AP`Current),%q3))])])][If([match(Drain,%2)],%bChakra is also drained for %q4. [set([locate(%#, %1, nP)],Dat`Chakra`Current:[max(0,sub(Get([locate(%#, %1, nP)]/Dat`Chakra`Current),%q4))])])], %b[name(locate(%#, %1, nP))] is able to defend themselves in time!)] }, blah)]%r)];@eval [if(gte(%q1,%q2),[set([locate(%#, %1, nP)],Dat`Vitality`Current:[max(sub(get([locate(%#, %1, nP)]/Dat`Vitality`Current),[switch(%2,Damage,[mul(4000,[switch(1,lte(fdiv(%q2,%q1),.5),1,lte(fdiv(%q2,%q1),.75),.9,lte(fdiv(%q2,%q1),.9),.75,gt(fdiv(%q2,%q1),.9),.5)])],Drain,[mul(1500,[switch(1,lte(fdiv(%q2,%q1),.5),1,lte(fdiv(%q2,%q1),.75),.9,lte(fdiv(%q2,%q1),.9),.75,gt(fdiv(%q2,%q1),.9),.5)])],Disrupt,[mul(1000,[switch(1,lte(fdiv(%q2,%q1),.5),1,lte(fdiv(%q2,%q1),.75),.9,lte(fdiv(%q2,%q1),.9),.75,gt(fdiv(%q2,%q1),.9),.5)])])]),0)])][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])])]
&FUNC`AVOIDRESOURCECHECK #253=and(gte(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`Efficiencymod,[edit(%0,%b,-)])])),[if(hasattr(%#/Dat`Link),2,1)]),mul([if(gt(words(%1),1),4,4)],sub(1,[u(#253/func`Adaptabilitymod,[edit(%0,%b,-)])]))))),gte(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`Efficiencymod,[edit(%0,%b,-)])])),[if(hasattr(%#/Dat`Link),2,1)]),mul([if(gt(words(%1),1),2,2)],sub(1,[u(#253/func`Adaptabilitymod,[edit(%0,%b,-)])]))))))
&FUNC`AVOIDRESOURCES #253=[set(%#,Dat`AP`Current:[sub(get(%#/Dat`AP`Current),max(1,ceil(add([sqlite_query(Game, Select AP From Templates where ID=[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/Func`FormMod,[edit(%0,%b,-)])],[if([extract(get(%#/Dat`Link),2,1,|)],1)]),mul(4,sub(1,[u(#253/func`adaptabilitymod,[edit(%0,%b,-)])]))))))])] [set(%#,Dat`Stamina`Current:[sub(get(%#/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Stamina From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`Efficiencymod,[edit(%0,%b,-)])])),[if(hasattr(%#/Dat`Link),2,1)]),mul([if(gt(words(%1),1),4,4)],sub(1,[u(#253/func`Adaptabilitymod,[edit(%0,%b,-)])])))))])] [set(%#,Dat`Chakra`Current:[sub(get(%#/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],mul([sqlite_query(Game, Select Chakra From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`%0),7,1,|)]")],[u(#253/func`Efficiencymod,[edit(%0,%b,-)])])),[if(hasattr(%#/Dat`Link),2,1)]),mul([if(gt(words(%1),1),2,2)],sub(1,[u(#253/func`Adaptabilitymod,[edit(%0,%b,-)])])))))])]
&FUNC`AVOIDEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] and swiftly maneuvers with [art([u(#253/func`rating)])] [ansi(hg,[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get(%#/dat`dr)]) against [ansi(hr,[name([extract(get(%L/Attacks`%#),1,1,:)])]'s [caplist(extract(get(%L/Attacks`%#),2,1,:))])]([extract(get(%L/Attacks`%#),4,1,:)]) [if(gt([extract(get(%L/Attacks`%#),4,1,:)],get(%#/dat`dr)),[setq(C,[ceil(mul(mul(add([u(#253/Func`CritMod,%0)],add(max(0,mul([u(#253/Func`FormMod,%0)],-3)),mul([u(#253/Func`FormDefMod,%1,[extract(get(%L/Attacks`%#),1,1,:)])],3))),[switch(after(grab(get(%#/dat`expertiseList), Targeted*, |), ^),0,1.5,1,2,2,3,1.5)]),[switch(after(grab(get(%#/dat`expertiseList), Evasive Maneuvers*, |), ^),0,1,1,.5,2,0,1)]))])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,if(gte(%qC,100),[ceil(mul(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],.3)],.3))),2),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1.5,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),1.25,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),1.1,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),1)]))],[ceil(mul(mul([extract(get(%L/Attacks`%#),5,1,:)],sub(1,sub([u(#253/Func`MitMod,%0)],[add(if(match([extract(get(%L/Attacks`%#),7,1,:)],Powerful,^),add([switch(after(grab(get(%#/dat`expertiseList), Powerful*, |), ^),0,.3,1,.45,2,.6,.3)],mul([u(#253/Func`EffectivenessMod,%0)],.1))),[u(#253/Func`PenMod,[extract(get(%L/Attacks`%#),1,1,:)])],.3)],.3))),[switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),1.5,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),1.25,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9)1.1,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),1)]))]),:)])] receiving [set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,[max(0,sub([extract(get(%L/Attacks`%#),5,1,:)],[ceil(mul(mul(add(ceil(mul([u(#253/Func`PotencyMod,%0)],add(1,mul([extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),2,1,|)],.1)))),[if(and(hasattr(%#/Dat`BodyMod),match(Kaguya,[get(%#/Dat`Clan)],|)),add(mul([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Body Mod*,|)],1,|),^,1)],25),25),0)]),[u(#253/Func`DRMod,%0)]),[switch([sqlite_query(Game, Select Rank From Templates where ID="[extract(get(%#/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")],E,1,D,1.25,C,1.5,B,1.75,A,2.25,S,3)]))]))],:)])][extract(get(%L/Attacks`%#),5,1,:)][if(gte(%qC,100),%b[ansi(hr,CRITICAL damage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)]!)],%bdamage from a [switch(1,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.5),Clean Hit,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.75),Solid Strike,lte(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Partial Impact,gt(fdiv(get(%#/dat`dr),[extract(get(%L/Attacks`%#),4,1,:)]),.9),Glancing Blow)].)] [u(#253/func`Vitalitywound,[extract(get(%L/Attacks`%#),5,1,:)])] [set(%#,Dat`Vitality`Current:[max(0,sub(get(%#/Dat`Vitality`Current),[extract(get(%L/Attacks`%#),5,1,:)]))])][If([match([extract(get(%L/Attacks`%#),7,1,:)],Disrupt,^)],[u(#253/func`Disrupt,[edit(%1,%b,-)])],[extract(get(%L/Attacks`%#),1,1,:)])][if(match([extract(get(%L/Attacks`%#),7,1,:)],DoT,^),[u(#253/Func`DoT,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Drain,^),[u(#253/func`Drain,[edit(%1,%b,-)])],)][if(match([extract(get(%L/Attacks`%#),7,1,:)],Absorb,^),[u(#253/func`Absorb,[edit(%1,%b,-)],[extract(get(%L/Attacks`%#),1,1,:)])],)], avoiding the entire attack!)][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
&FUNC`EASSAULTEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)][IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.8)),[switch(rand(3),0,%, with great vigor%,,1,%, with a fluid grace%,,2,%, seemingly effortlessly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.6)),[switch(rand(3),0,%b windedly,1,%b breathlessly,2,%b perspiringly)],[IF(GTE(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, feeling pressured%,,1,%, showing strain%,,2,%b tiredly)],[IF(LT(ceil(mul(add(get(%#/Dat`Vitality`Current),get(%#/Dat`Stamina`Current)),.8)),MUL([get(%#/Dat`Stamina`Total)],.3)),[switch(rand(3),0,%, with determination%,,1,%b fiercely,2,%b fervently)])])])])] Assaults with [switch(get(%#/Dat`Clan),Hyuuga,[ansi(hg,Eight Trigrams:)] [iter(extract(Two Palms...|Four Palms...|Eight Palms...|Sixteen Palms...|Thirty Two Palms...!|Sixty Four Palms...!|One Hundred Twenty Eight Palms!,1,%1,|),%r %i0,|)],Aburame,[ansi(hg,Kikaichu Jutsu:)] [iter(extract(Tiny Swarm...|Large Swarm...|Great Swarm...|Massive Swarm...|Collosal Swarm...!|Sky Darkening Swarm...!|All Consuming Swarm!,1,%1,|),%r %i0,|)],[ansi(hg,Escalating Assault:)] [iter(extract(Basic Combination...|Sharp Combination...|Complex Combination...|Skilled Combination...|Expert Combination...!|Mastered Combination...!|Flawless Combination!,1,%1,|),%r %i0,|)])][if(lt(%1,7),%r ... before losing focus%, ending the Assault prematurely)] against [ansi(hr,[name(locate(%#, %0, nP))])] dealing [if(match(get(%#/Dat`Clan),Hyuuga),[setq(2,[rand(mul(10,%1),add(100,mul(10,%1)))])][setq(0,[if(gte(%q2,100),[ceil(mul(mul(mul(100,[switch(1,lte(fdiv(%3,%2),.5),.5,lte(fdiv(%3,%2),.75),.75,lte(fdiv(%3,%2),.9),.9,gt(fdiv(%3,%2),.9),1)]),[add(%1,add([extract(get(%#/Dat`PrimaryStats),1,1,|)],[extract(get(%#/Dat`TranscendAttribs),1,1,|)],[extract(get(%#/Dat`PrimaryStats),7,1,|)],[extract(get(%#/Dat`TranscendAttribs),7,1,|)]))]),1.5))],[ceil(mul(mul(100,[switch(1,lte(fdiv(%3,%2),.5),.5,lte(fdiv(%3,%2),.75),.75,lte(fdiv(%3,%2),.9),.9,gt(fdiv(%3,%2),.9),1)]),[add(%1,add([extract(get(%#/Dat`PrimaryStats),1,1,|)],[extract(get(%#/Dat`TranscendAttribs),1,1,|)],[extract(get(%#/Dat`PrimaryStats),4,1,|)],[extract(get(%#/Dat`TranscendAttribs),4,1,|)]))]))])])]%q0[if(gte(%q2,100),%b[ansi(hr,CRITICAL)]%b,%b)]internal damage and [setq(1,[if(gte(%q2,100),[ceil(mul(mul(mul(1000,[switch(1,lte(fdiv(%3,%2),.5),.5,lte(fdiv(%3,%2),.75),.75,lte(fdiv(%3,%2),.9),.9,gt(fdiv(%3,%2),.9),1)]),[add(%1,add([extract(get(%#/Dat`PrimaryStats),1,1,|)],[extract(get(%#/Dat`TranscendAttribs),1,1,|)],[extract(get(%#/Dat`PrimaryStats),5,1,|)],[extract(get(%#/Dat`TranscendAttribs),5,1,|)]))]),1.5))],[ceil(mul(mul(1000,[switch(1,lte(fdiv(%3,%2),.5),.5,lte(fdiv(%3,%2),.75),.75,lte(fdiv(%3,%2),.9),.9,gt(fdiv(%3,%2),.9),1)]),[add(%1,add([extract(get(%#/Dat`PrimaryStats),1,1,|)],[extract(get(%#/Dat`TranscendAttribs),1,1,|)],[extract(get(%#/Dat`PrimaryStats),5,1,|)],[extract(get(%#/Dat`TranscendAttribs),5,1,|)]))]))])])]%q1[if(gte(%q2,100),%b[ansi(hr,CRITICAL)]%b,%b)]damage to [name([locate(%#, %0, nP)])]'s Chakra Network! [set([locate(%#, %0, nP)],Dat`Vitality`Current:[max(0,sub(get([locate(%#, %0, nP)]/Dat`Vitality`Current),%q0))])][set([locate(%#, %0, nP)],Dat`SpiritualEnergy`Current:[max(0,sub(get([locate(%#, %0, nP)]/Dat`SpiritualEnergy`Current),%q1))])][set([locate(%#, %0, nP)],Dat`Chakra`Max:[max(0,[u(#245/func`ChakraCalcReset,%0)])])][set(%#,Dat`Stamina`Current:[max(0,sub(get(%#/Dat`Stamina`Current),200))])][set(%#,Dat`Chakra`Current:[max(0,sub(get(%#/Dat`Chakra`Current),660))])],[if(match(get(%#/Dat`Clan),Aburame),[setq(2,[rand(mul(5,%1),add(100,mul(5,%1)))])][setq(3,[if(gte(%q2,100),[ceil(mul(mul(mul(150,[switch(1,lte(fdiv(%3,%2),.5),.5,lte(fdiv(%3,%2),.75),.75,lte(fdiv(%3,%2),.9),.9,gt(fdiv(%3,%2),.9),1)]),[add(%1,add([extract(get(%#/Dat`PrimaryStats),2,1,|)],[extract(get(%#/Dat`TranscendAttribs),2,1,|)],[extract(get(%#/Dat`PrimaryStats),7,1,|)],[extract(get(%#/Dat`TranscendAttribs),7,1,|)]))]),1.5))],[ceil(mul(mul(150,[switch(1,lte(fdiv(%3,%2),.5),.5,lte(fdiv(%3,%2),.75),.75,lte(fdiv(%3,%2),.9),.9,gt(fdiv(%3,%2),.9),1)]),[add(%1,add([extract(get(%#/Dat`PrimaryStats),2,1,|)],[extract(get(%#/Dat`TranscendAttribs),2,1,|)],[extract(get(%#/Dat`PrimaryStats),7,1,|)],[extract(get(%#/Dat`TranscendAttribs),7,1,|)]))]))])])]%q3[if(gte(%q2,100),%b[ansi(hr,CRITICAL)]%b,%b)]infestation damage and [setq(4,[if(gte(%q2,100),[ceil(mul(mul(mul(1000,[switch(1,lte(fdiv(%3,%2),.5),.5,lte(fdiv(%3,%2),.75),.75,lte(fdiv(%3,%2),.9),.9,gt(fdiv(%3,%2),.9),1)]),[add(%1,add([extract(get(%#/Dat`PrimaryStats),2,1,|)],[extract(get(%#/Dat`TranscendAttribs),2,1,|)],[extract(get(%#/Dat`PrimaryStats),8,1,|)],[extract(get(%#/Dat`TranscendAttribs),8,1,|)]))]),1.5))],[ceil(mul(mul(1000,[switch(1,lte(fdiv(%3,%2),.5),.5,lte(fdiv(%3,%2),.75),.75,lte(fdiv(%3,%2),.9),.9,gt(fdiv(%3,%2),.9),1)]),[add(%1,add([extract(get(%#/Dat`PrimaryStats),2,1,|)],[extract(get(%#/Dat`TranscendAttribs),2,1,|)],[extract(get(%#/Dat`PrimaryStats),8,1,|)],[extract(get(%#/Dat`TranscendAttribs),8,1,|)]))]))])])][if(gte(%q2,100),a [ansi(hr,CRITICAL)] amount (%q4),%q4)] of [name([locate(%#, %0, nP)])]'s chakra is devoured! [set([locate(%#, %0, nP)],Dat`Vitality`Current:[max(0,sub(get([locate(%#, %0, nP)]/Dat`Vitality`Current),%q3))])][set([locate(%#, %0, nP)],Dat`Chakra`Current:[max(0,sub(get([locate(%#, %0, nP)]/Dat`Chakra`Current),%q4))])][set(%#,Dat`Stamina`Current:[max(0,sub(get(%#/Dat`Stamina`Current),660))])][set(%#,Dat`Chakra`Current:[max(0,sub(get(%#/Dat`Chakra`Current),2000))])],[setq(2,[rand(mul(7,%1),add(100,mul(7,%1)))])][setq(5,[if(gte(%q2,100),[ceil(mul(mul(mul(300,[switch(1,lte(fdiv(%3,%2),.5),.5,lte(fdiv(%3,%2),.75),.75,lte(fdiv(%3,%2),.9),.9,gt(fdiv(%3,%2),.9),1)]),[add(%1,add([extract(get(%#/Dat`PrimaryStats),1,1,|)],[extract(get(%#/Dat`TranscendAttribs),1,1,|)],[extract(get(%#/Dat`PrimaryStats),4,1,|)],[extract(get(%#/Dat`TranscendAttribs),4,1,|)]))]),1.5))],[ceil(mul(mul(300,[switch(1,lte(fdiv(%3,%2),.5),.5,lte(fdiv(%3,%2),.75),.75,lte(fdiv(%3,%2),.9),.9,gt(fdiv(%3,%2),.9),1)]),[add(%1,add([extract(get(%#/Dat`PrimaryStats),1,1,|)],[extract(get(%#/Dat`TranscendAttribs),1,1,|)],[extract(get(%#/Dat`PrimaryStats),4,1,|)],[extract(get(%#/Dat`TranscendAttribs),4,1,|)]))]))])])]%q5[if(gte(%q2,100),%b[ansi(hr,CRITICAL)]%b,%b)]damage over multiple blows![set([locate(%#, %0, nP)],Dat`Vitality`Current:[max(0,sub(get(%#/Dat`Vitality`Current),%q5))])][set(%#,Dat`Stamina`Current:[max(0,sub(get(%#/Dat`Stamina`Current),1330))])][set(%#,Dat`Chakra`Current:[max(0,sub(get(%#/Dat`Chakra`Current),1330))])])])][if(lt(get(%#/Dat`AP`Current),0),[set(%#,Dat`AP`Current:0)])]}, blah)]%r)]
&FUNC`COLLABEMIT #253=@remit %L=[prompt(Combat)] %N begins to perform a Collaborative [caplist(%0,,,L)] with [if(gte(words(%1),2),[insert(%1,-2,and)],%1)] with [if(gte(words(%2),2),[insert(%2,-2,and)],%2)] as the [if(gte(words(%2),2),targets,target)]!
&FUNC`AMBUSH #253=[if(hasattr(%L/Attacks`%#),if(and(hasattr(%#/Dat`PerceptionCheck),match(extract(get(%#/Dat`PerceptionCheck),3,1,|),%0)),[if(gte([extract(get(%#/Dat`PerceptionCheck),1,1,|)],[u(#253/func`PerceptionCheck,%#)]),[remit(%L,[prompt(Combat)] [name(*[extract(get(%#/Dat`PerceptionCheck),3,1,|)])] successfully ambushes %N!)] [set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),4,[ceil(mul([extract(get(%L/Attacks`%#),4,1,:)],1.25))],:)])][set(%L,Attacks`%#:[replace(get(%L/Attacks`%#),5,[ceil(mul([extract(get(%L/Attacks`%#),5,1,:)],1.25))],:)])],[remit(%L,[prompt(Combat)] [name(*[extract(get(%#/Dat`PerceptionCheck),3,1,|)])] fails to ambush %N%, revealing [obj([extract(get(%#/Dat`PerceptionCheck),3,1,|)])]self and losing the element of surprise!)][set(%#,Dat`PerceptionCheck:)])]))]
&FUNC`INTERCEPTEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)] successfully Intercepted [name(*[extract(extract(get(%L/Attacks`[locate(%#, %0, nP)]),%1,1,^),1,1,:)])]'s [extract(extract(get(%L/Attacks`[locate(%#, %0, nP)]),%1,1,^),2,1,:)]([extract(extract(get(%L/Attacks`[locate(%#, %0, nP)]),%1,1,^),4,1,:)]) attack that was headed towards [name(locate(%#, %0, nP))]! }, blah)]%r)]
&FUNC`CCOMBATRESOURCES #253=[set([locate(%#, %0, nP)],Dat`AP`Current:[sub(get([locate(%#, %0, nP)]/Dat`AP`Current),%3)])] [set([locate(%#, %0, nP)],Dat`Stamina`Current:[sub(get([locate(%#, %0, nP)]/Dat`Stamina`Current),%1)])] [set([locate(%#, %0, nP)],Dat`Chakra`Current:[sub(get([locate(%#, %0, nP)]/Dat`Chakra`Current),%2)])]
&FUNC`CCOMBATSTAMINA #253=[ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get([locate(%#, %4, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get([locate(%#, %4, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],[u(#253/func`efficiencymod,[edit(%0,%b,-)])])),[if(hasattr([locate(%#, %4, nP)]/Dat`Link),2,1)]),[if(gt(words(%1),1),[sub(mul(add(words(%1),%2),.8),%3)],[sub(mul(1,%2),%3)])]))]
&FUNC`CCOMBATCHAKRA #253=[ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get([locate(%#, %4, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get([locate(%#, %4, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],[u(#253/func`efficiencymod,[edit(%0,%b,-)])])),[if(hasattr([locate(%#, %4, nP)]/Dat`Link),2,1)]),[if(gt(words(%1),1),[sub(mul(add(words(%1),%2),.8),%3)],[sub(mul(1,%2),%3)])]))]
&FUNC`CCOMBATAP #253=[max([switch([sqlite_query(Game, Select Method From Templates where ID=[extract(get([locate(%#, %3, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],Attack,[switch([sqlite_query(Game, Select Category From Templates where ID=[extract(get([locate(%#, %3, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],Taijutsu,[switch([sqlite_query(Game, Select Rank From Templates where ID=[extract(get([locate(%#, %3, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],E,1,D,1,C,1,B,2,A,2,S,3)],Ninjutsu,[switch([sqlite_query(Game, Select Rank From Templates where ID=[extract(get([locate(%#, %3, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],E,2,D,2,C,3,B,3,A,3,S,4)])],Defend,0)],[ceil(add([sqlite_query(Game, Select AP From Templates where ID=[extract(get([locate(%#, %3, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],add([u(#253/func`Cformmod,[edit(%0,%b,-)],%3)],[if(hasattr([extract(get([locate(%#, %3, nP)]/Dat`Link),2,1,|)]),1)][if(gt(words(%1),1),mul(words(%1),.8))],[sub(%2,mul(%2,[u(#253/func`Cadaptabilitymod,[edit(%0,%b,-)],%3)]))])))])]
&FUNC`CATTACKEMIT #253=[remit(%L,%r[prompt(Combat)] [setr(!,{[ansi(hm,%N)] forces [name(locate(%#, %2, nP))] to [IF(GTE([get([locate(%#, %2, nP)]/Dat`Stamina`Current)],MUL([get([locate(%#, %2, nP)]/Dat`Stamina`Max)],0.8)),[switch(rand(3),0,vigorously,1,naturally,2,effortlessly)],[IF(GTE([get([locate(%#, %2, nP)]/Dat`Stamina`Current)],MUL([get([locate(%#, %2, nP)]/Dat`Stamina`Max)],0.6)),[switch(rand(3),0,windedly,1,breathlessly,2,perspiringly)],[IF(GTE([get([locate(%#, %2, nP)]/Dat`Stamina`Current)],MUL([get([locate(%#, %2, nP)]/Dat`Stamina`max)],0.3)),[switch(rand(3),0,feeling pressured,1,showing strain,2,tiredly)],[IF(LT([get([locate(%#, %2, nP)]/Dat`Stamina`Current)],MUL([get([locate(%#, %2, nP)]/Dat`Stamina`Max)],0.3)),[switch(rand(3),0,with determination,1,fiercely,2,fervently)])])])])] attack with [art([u(#253/func`rating)])], [if(gt(words(sqlite_query(Game, Select Range from Templates where ID="[extract(get([locate(%#, %2, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]")),1),multi,[lcstr(sqlite_query(Game, Select Range from Templates where ID="[extract(get([locate(%#, %2, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)]"))])]-ranged [ansi(hg,[extract(get([locate(%#, %2, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),12,1,|)] [caplist(%0)])]([get([locate(%#, %2, nP)]/dat`ar)]) against [ansi(hr,[name(locate(%#, %1, nP))])].}, blah)]%r)]
&FUNC`CSTATUS #253=[set([locate(%#, %0, nP)],Dat`Stamina`Max:[u(#245/func`staminacalc,[locate(%#, %0, nP)])])][set([locate(%#, %0, nP)],Dat`Chakra`Max:[u(#245/func`Chakracalc,[locate(%#, %0, nP)])])][if(gt([get([locate(%#, %0, nP)]/dat`Vitality`Current)],[get([locate(%#, %0, nP)]/dat`Vitality`Max)]),[set([locate(%#, %0, nP)],Dat`Vitality`Current:[get([locate(%#, %0, nP)]/dat`Vitality`Max)])])][if(gt([get([locate(%#, %0, nP)]/dat`Stamina`Current)],[get([locate(%#, %0, nP)]/dat`Stamina`Max)]),[set([locate(%#, %0, nP)],Dat`Stamina`Current:[get([locate(%#, %0, nP)]/dat`Stamina`Max)])])][if(gt([get([locate(%#, %0, nP)]/dat`Chakra`Current)],[get([locate(%#, %0, nP)]/dat`Chakra`Max)]),[set([locate(%#, %0, nP)],Dat`Chakra`Current:[get([locate(%#, %0, nP)]/dat`Chakra`Max)])])][pemit([locate(%#, %0, nP)],[prompt(Combat)] [ansi(hr,Vit)]:[ansi(hw,[get([locate(%#, %0, nP)]/dat`Vitality`Current)])]|[ansi(hr,[get([locate(%#, %0, nP)]/dat`Vitality`Max)])] [ansi(hg,Stam)]:[ansi(hw,[get([locate(%#, %0, nP)]/dat`stamina`Current)])]|[ansi(hg,[get([locate(%#, %0, nP)]/dat`Stamina`Max)])] [ansi(hc,Chakra)]:[ansi(hw,[get([locate(%#, %0, nP)]/dat`chakra`Current)])]|[ansi(hc,[get([locate(%#, %0, nP)]/dat`Chakra`Max)])] [ansi(hy,AP)]:[ansi(hw,[get([locate(%#, %0, nP)]/dat`AP`Current)])]|[ansi(hy,[get([locate(%#, %0, nP)]/dat`AP`Max)])]%r%t[ansi(y,Current Stance)]: [ansi(hy,[get([locate(%#, %0, nP)]/Dat`Stance)])] %r)]
&FUNC`CRESOURCECHECK #253=and(gte(get([locate(%#, %4, nP)]/Dat`Stamina`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get([locate(%#, %4, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],mul([sqlite_query(Game, Select Stamina From Templates where ID=[extract(get([locate(%#, %4, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],[u(#253/func`efficiencymod,[edit(%0,%b,-)])])),[if(hasattr([locate(%#, %4, nP)]/Dat`Link),2,1)]),[if(gt(words(%1),1),[sub(mul(add(words(%1),%2),.5),%3)],[sub(mul(1,%2),%3)])]))),gte(get([locate(%#, %4, nP)]/Dat`Chakra`Current),ceil(mul(mul(Sub([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get([locate(%#, %4, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],mul([sqlite_query(Game, Select Chakra From Templates where ID=[extract(get([locate(%#, %4, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),7,1,|)])],[u(#253/func`efficiencymod,[edit(%0,%b,-)])])),[if(hasattr([locate(%#, %4, nP)]/Dat`Link),2,1)]),[if(gt(words(%1),1),[sub(mul(add(words(%1),%2),.5),%3)],[sub(mul(1,%2),%3)])]))))
&FUNC`CFORMMOD #253=CEIL(fDiv(ADD(MUL(add([extract(get([locate(%#, %1, nP)]/Dat`TranscendAttribs),5,1,|)],[extract(get([locate(%#, %1, nP)]/Dat`PrimaryStats),5,1,|)]),[if([match(get(%#/Dat`ExpertiseList),Alacrity*,|)],[min(add(add(fdiv([after(extract(get(%#/Dat`ExpertiseList),[match(get(%#/Dat`ExpertiseList),Alacrity*,|)],1,|),^,1)],20),.05),.25),.4)],.25)]),MUL(MUL(MUL([extract(get([locate(%#, %1, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),3,1,|)],IF(GTE([get([locate(%#, %1, nP)]/Dat`PhysicalEnergy`Current)],MUL([get([locate(%#, %1, nP)]/Dat`PhysicalEnergy`Total)],0.75)),1.25,IF(GTE([get([locate(%#, %1, nP)]/Dat`PhysicalEnergy`Current)],MUL([get([locate(%#, %1, nP)]/Dat`PhysicalEnergy`Total)],0.5)),1,0.75))),IF(hasattr([locate(%#, %1, nP)]/Dat`TF),IF(Match([sqlite_query(Game, Select Form From Transformations Where Name="[get([locate(%#, %1, nP)]/Dat`TF)]")],Yes),1.25,.1),1)),0.4)),-1))
&FUNC`CADAPTABILITYMOD #253=round(ADD(MUL(.075,MUL(MUL(MUL([extract(get([locate(%#, %1, nP)]/Dat`JutsuAttributes`[edit(%0,%b,-)]),6,1,|)],IF(GTE(get([locate(%#, %1, nP)]/Dat`SpiritualEnergy`Current),MUL(get([locate(%#, %1, nP)]/Dat`SpiritualEnergy`Total),0.75)),1.25,IF(GTE(get([locate(%#, %1, nP)]/Dat`SpiritualEnergy`Current),MUL(get([locate(%#, %1, nP)]/Dat`SpiritualEnergy`Total),0.5)),1,0.75))),IF(hasattr([locate(%#, %1, nP)]/Dat`TF),IF(match([sqlite_query(Game, Select Adaptability From Transformations Where Name="[get([locate(%#, %1, nP)]/Dat`TF)]")],Yes),1.5,1),1)),0.5)),MUL(ADD([extract(get([locate(%#, %1, nP)]/Dat`PrimaryStats),8,1,|)],[extract(get([locate(%#, %1, nP)]/Dat`TranscendAttribs),8,1,|)]),0.01)),2)

&FUNC`DiagnosEMIT #253=[remit(%L,%r[prompt(Diagnose)] [setr(!,{[ansi(hm,%N)] diagnoses [ansi(hg,[name(locate(%#, %0, nP))])].}, blah)]%r)][pemit(%#,%r[prompt(Diagnose)] [name(locate(%#, %0, nP))] currently has: %r%rVitality: [switch(1,gte([get(locate(%#, %0, nP)/Dat`Vitality`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`Vitality`Max),.8))]),[ansi(hg,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`Vitality`Current),get(locate(%#, %0, nP)/Dat`Vitality`Max)),2),100)])]%%,gte([get(locate(%#, %0, nP)/Dat`Vitality`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`Vitality`Max),.5))]),[ansi(hy,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`Vitality`Current),get(locate(%#, %0, nP)/Dat`Vitality`Max)),2),100)])]%%,gte([get(locate(%#, %0, nP)/Dat`Vitality`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`Vitality`Max),.25))]),[ansi(hr,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`Vitality`Current),get(locate(%#, %0, nP)/Dat`Vitality`Max)),2),100)])]%%,lt([get(locate(%#, %0, nP)/Dat`Vitality`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`Vitality`Max),.25))]),[ansi(hx,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`Vitality`Current),get(locate(%#, %0, nP)/Dat`Vitality`Max)),2),100)])]%%)]|[switch(1,gte([get(locate(%#, %0, nP)/Dat`Vitality`Total)],[ceil(mul(get(locate(%#, %0, nP)/Dat`Vitality`Max),.8))]),[ansi(hg,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`Vitality`Max),get(locate(%#, %0, nP)/Dat`Vitality`Total)),2),100)])]%%,gte([get(locate(%#, %0, nP)/Dat`Vitality`Total)],[ceil(mul(get(locate(%#, %0, nP)/Dat`Vitality`Max),.5))]),[ansi(hy,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`Vitality`Max),get(locate(%#, %0, nP)/Dat`Vitality`Total)),2),100)])]%%,gte([get(locate(%#, %0, nP)/Dat`Vitality`Total)],[ceil(mul(get(locate(%#, %0, nP)/Dat`Vitality`Max),.25))]),[ansi(hr,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`Vitality`Max),get(locate(%#, %0, nP)/Dat`Vitality`Total)),2),100)])]%%,lt([get(locate(%#, %0, nP)/Dat`Vitality`Total)],[ceil(mul(get(locate(%#, %0, nP)/Dat`Vitality`Max),.25))]),[ansi(hx,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`Vitality`Max),get(locate(%#, %0, nP)/Dat`Vitality`Total)),2),100)])]%%)] %rPhysical Energy: [switch(1,gte([get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Max),.8))]),[ansi(hg,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Current),get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Max)),2),100)])]%%,gte([get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Max),.5))]),[ansi(hy,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Current),get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Max)),2),100)])]%%,gte([get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Max),.25))]),[ansi(hr,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Current),get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Max)),2),100)])]%%,lt([get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Max),.25))]),[ansi(hx,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Current),get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Max)),2),100)])]%%)]|[ansi(hg,mul(round(fdiv([get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Max)],[get(locate(%#, %0, nP)/Dat`PhysicalEnergy`Max)]),2),100))]%% %rSpiritual Energy: [switch(1,gte([get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Max),.8))]),[ansi(hg,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Current),get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Max)),2),100)])]%%,gte([get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Max),.5))]),[ansi(hy,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Current),get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Max)),2),100)])]%%,gte([get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Max),.25))]),[ansi(hr,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Current),get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Max)),2),100)])]%%,lt([get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Current)],[ceil(mul(get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Max),.25))]),[ansi(hx,[mul(round(fdiv(get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Current),get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Max)),2),100)])]%%)]|[ansi(hg,mul(round(fdiv([get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Max)],[get(locate(%#, %0, nP)/Dat`SpiritualEnergy`Max)]),2),100))]%% %rOverall Condition: [IF(GTE(ceil(mul(add(get(locate(%#, %0, nP)/Dat`Vitality`Current),get(locate(%#, %0, nP)/Dat`Stamina`Current)),.9)),MUL([get(locate(%#, %0, nP)/Dat`Stamina`Total)],1)),[ansi(hg,Excellent)],[IF(GTE(ceil(mul(add(get(locate(%#, %0, nP)/Dat`Vitality`Current),get(locate(%#, %0, nP)/Dat`Stamina`Current)),.9)),MUL([get(locate(%#, %0, nP)/Dat`Stamina`Total)],.75)),[ansi(hy,Mediocre)],[IF(GTE(ceil(mul(add(get(locate(%#, %0, nP)/Dat`Vitality`Current),get(locate(%#, %0, nP)/Dat`Stamina`Current)),.9)),MUL([get(locate(%#, %0, nP)/Dat`Stamina`Total)],.5)),[ansi(hr,Poor)],[IF(LT(ceil(mul(add(get(locate(%#, %0, nP)/Dat`Vitality`Current),get(locate(%#, %0, nP)/Dat`Stamina`Current)),.9)),MUL([get(locate(%#, %0, nP)/Dat`Stamina`Total)],.5)),[ansi(hx,Critical)])])])])] %rLingering Effects: [if(hasattr(locate(%#, %0, nP)/Dat`DoT),DoT%b)][if(hasattr(locate(%#, %0, nP)/Dat`Link),Link%b)][if(hasattr(locate(%#, %0, nP)/Dat`Control),Control%b)][if(and(!hasattr(locate(%#, %0, nP)/Dat`Control),!hasattr(locate(%#, %0, nP)/Dat`DoT),!hasattr(locate(%#, %0, nP)/Dat`Link)),[ansi(hc,Clear)]%b)]%r)]
